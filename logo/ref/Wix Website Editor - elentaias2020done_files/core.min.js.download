define("core",["tslib","lodash","util","react","prop-types","create-react-class","constants","stateManagement","coreBi","experiment","helpIds","santa-core-utils","react-dom","zepto","santa-editor-utils","platformEvents","requirejs"],(function(t,e,o,n,i,r,a,s,u,c,l,p,d,f,g,m,h){return function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1488)}({0:function(e,o){e.exports=t},1:function(t,o){t.exports=e},12:function(t,e){t.exports=u},13:function(t,e){t.exports=c},14:function(t,e){t.exports=l},1488:function(t,e,o){var n,i;n=[o,e,o(0),o(1489),o(420),o(1509),o(421),o(1511),o(430),o(1518),o(1519),o(1524),o(427),o(423),o(1525),o(1526),o(1527),o(1529),o(1530),o(1531),o(428),o(246),o(248),o(432),o(151),o(1533),o(426),o(424),o(1534),o(1535),o(1536),o(1537),o(1538),o(1541),o(422),o(1542),o(416),o(425),o(247),o(1543)],void 0===(i=function(t,e,o,n,i,r,a,s,u,c,l,p,d,f,g,m,h,y,_,P,S,x,v,D,w,C,I,A,T,R,b,O,E,L,M,N,B,F,k,U){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=o.__importDefault(n),i=o.__importDefault(i),r=o.__importDefault(r),a=o.__importDefault(a),s=o.__importDefault(s),u=o.__importDefault(u),c=o.__importDefault(c),l=o.__importDefault(l),p=o.__importDefault(p),d=o.__importDefault(d),f=o.__importDefault(f),g=o.__importDefault(g),m=o.__importDefault(m),h=o.__importDefault(h),y=o.__importDefault(y),_=o.__importDefault(_),P=o.__importDefault(P),S=o.__importDefault(S),x=o.__importDefault(x),v=o.__importDefault(v),D=o.__importDefault(D),w=o.__importDefault(w),C=o.__importDefault(C),I=o.__importDefault(I),A=o.__importDefault(A),T=o.__importDefault(T),R=o.__importDefault(R),b=o.__importDefault(b),O=o.__importDefault(O),E=o.__importDefault(E),L=o.__importDefault(L),M=o.__importDefault(M),N=o.__importDefault(N),B=o.__importDefault(B),F=o.__importDefault(F),k=o.__importDefault(k),U=o.__importDefault(U),e.styleManager=R.default,e.designManager=b.default,e.premiumServicesAPI=O.default;const Y={pageTitleUtils:N.default,menuLogic:E.default,addUtil:n.default,AddPanelDragHandler:i.default,AddPanelSectionDragHandler:r.default,AttachHandler:a.default,DragConstraintsHandler:p.default,updateLayoutUtil:s.default,LayoutConstraintsUtil:u.default,updateDataUtil:c.default,updatePropertiesUtil:l.default,layoutTransitionsUtil:d.default,SnapToHandler:f.default,scrollUtils:g.default,fixedPositionUtils:h.default,social:y.default,spotifyUtils:_.default,compControlsMeasurer:m.default,compsSectionsAnalyzer:S.default,sectionsReorganizeUtil:x.default,componentPreviewReadyPlugins:P.default,blogTypeUtils:v.default,dynamicTypeUtils:D.default,tpaTypeUtils:w.default,wixStoreTypeUtils:C.default,gridLinesUtil:A.default,mediaManagerPresetUtil:M.default,toolbarPositioning:L.default,sectionDrag:I.default,addComponentPlugins:B.default,addPanelBiUtils:F.default,popoverUtils:k.default,addPopoverUtils:U.default};e.utils=Y;const H={editorAPIMixin:T.default};e.mixins=H}.apply(e,n))||(t.exports=i)},1489:function(t,e,o){var n,i;n=[o,e,o(0),o(416),o(245)],void 0===(i=function(t,e,o,n,i){"use strict";n=o.__importDefault(n),i=o.__importDefault(i);return{addComponent:function(t,e,o,r,a,s,u,c){const l=r.componentType,p=r.data&&r.data.type;if(i.default[p]&&(r.data=i.default[p](r.data)),n.default.before[l]){const i=n.default.before[l](t,e,o,r,a,s);if(i)return i}const d=e(o,r,a,c);return t.dsActions.waitForChangesApplied((function(){s&&s(d),n.default.after[l]&&n.default.after[l](t,d,u)})),d},componentsWithPlugins:Object.keys(n.default)}}.apply(e,n))||(t.exports=i)},1490:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(6),o(2)],void 0===(i=function(t,e,o,n,i,r){"use strict";function a(t,e,o){n.default.forEach(o,(function(o){const i=function(t,e,o){let i=e;return n.default.forEach(o,(function(e){const o=t.components.getChildren(i);i=o[e]})),i}(t,e,o.pathToParent),r=t.dsActions.tpa.widget.add(o.appDefinitionId,{widgetId:o.widgetId,pageId:e.id,parentContainerRef:i,layout:o.layout,style:o.style});n.default.forOwn(o.data,(function(e,o){t.dsActions.tpa.data.set(r,o,e)}))}))}function s(t,e,o,n){t.history.add("adding new popup",{actionType:i.default.DS_ACTIONS.ADD_PAGE,nextPage:e.id,currentPage:o}),t.dsActions.waitForChangesApplied((function(){const o=t.pages.popupPages.getPopupContainer(e.id);t.selection.selectComponentByCompRef(o),n(o)}))}return n=o.__importDefault(n),i=o.__importDefault(i),r=o.__importStar(r),function(t,e,o,i,u,c){if(i.data.isPopup){i.layout.x=0,i.layout.y=0,i.data.pageUriSEO=null;const e=n.default.omit(i,"tpaComps"),o=t.pages.popupPages.add(r.translate(e.data.title),e),u=t.dsRead.pages.getFocusedPageId();return t.pages.navigateTo(o.id),i.tpaComps?t.dsActions.waitForChangesApplied((function(){a(t,o,i.tpaComps),s(t,o,u,c)})):s(t,o,u,c),o}return null}}.apply(e,n))||(t.exports=i)},1491:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(2)],void 0===(i=function(t,e,o,n,i){"use strict";n=o.__importDefault(n),i=o.__importStar(i);function r(t,e,o){let i;const r=function(t,e,o){const i=new RegExp("".concat(o,"\\s(\\d+)")),r=[];return n.default.forEach(e,(function(e){const o=t.components.data.get(e).name.match(i);o&&r.push(parseInt(o[1],10))})),r}(t,e,o);for(r.sort((function(t,e){return t-e})),i=0;i<r.length;++i)if(!n.default.includes(r,i+1))return i+1;return i+1}return function(t,e,o,n,a,s){const u=i.translate("component_label_anchor"),c=t.dsRead.pages.getReference(t.dsRead.pages.getPrimaryPageId()),l=t.components.get.byType("wysiwyg.common.components.anchor.viewer.Anchor",c),p=r(t,l,u);n.data.name="".concat(u," ").concat(p);const d=e(o,n);return s&&t.dsActions.waitForChangesApplied((function(){s(d)})),d}}.apply(e,n))||(t.exports=i)},1492:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(417),o(2)],void 0===(i=function(t,e,o,n,i,r){"use strict";n=o.__importDefault(n),i=o.__importDefault(i),r=o.__importStar(r);function a(t,e){return n.default.merge({},t,{data:{title:e.title,link:{docId:e.fileUrl,name:e.title,type:"DocumentLink"}}})}return function(t,e,o,n,s,u){if(n.data.link&&n.data.link.docId)return!1;const c=t.mediaServices;return c.mediaManager.open(c.mediaManager.categories.DOCUMENT,"add_panel_documents",{callback(r){i.default(t,e,o,n,s,u,a,r),c.setFocusToEditor()},translation:{submitButton:r.translate("MMGR_submitbutton_addpanel_mydocs_add")}}),!0}}.apply(e,n))||(t.exports=i)},1493:function(t,e,o){var n,i;n=[o,e,o(0),o(2)],void 0===(i=function(t,e,o,n){"use strict";n=o.__importStar(n);return function(t){return t.title&&(t.title=n.media.fixMediaTitleLength(t.title,100)),t.description&&(t.description=n.media.fixMediaTitleLength(t.description,1200)),t}}.apply(e,n))||(t.exports=i)},1494:function(t,e,o){var n,i;n=[o,e,o(0),o(2)],void 0===(i=function(t,e,o,n){"use strict";n=o.__importStar(n);return function(t){return t.title&&(t.title=n.media.fixMediaTitleLength(t.title,100)),t}}.apply(e,n))||(t.exports=i)},1495:function(t,e,o){var n,i;n=[o,e,o(0),o(2)],void 0===(i=function(t,e,o,n){"use strict";n=o.__importStar(n);return function(t){return t.title&&(t.title=n.media.fixMediaTitleLength(t.title,100)),t}}.apply(e,n))||(t.exports=i)},1496:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(418)],void 0===(i=function(t,e,o,n,i){"use strict";function r(t,e){return n.default.merge({},t,{data:{uri:e.fileName,originalFileName:e.title}})}return n=o.__importDefault(n),i=o.__importDefault(i),function(t,e,o,n,a,s){return i.default.handleAudioAdd(t,e,o,n,a,s,r)}}.apply(e,n))||(t.exports=i)},1497:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(418)],void 0===(i=function(t,e,o,n,i){"use strict";function r(t,e){return n.default.merge({},t,{data:{uri:e.fileName,originalFileName:e.title,artist:"Unknown Artist",track:"Unknown Track"}})}return n=o.__importDefault(n),i=o.__importDefault(i),function(t,e,o,n,a,s){return i.default.handleAudioAdd(t,e,o,n,a,s,r)}}.apply(e,n))||(t.exports=i)},1498:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(2),o(419)],void 0===(i=function(t,e,o,n,i,r){"use strict";n=o.__importDefault(n),i=o.__importStar(i),r=o.__importDefault(r);const a={successMessage:"Contact_Form_Settings_Messages_Success_message_default",validationErrorMessage:"Contact_Form_Settings_Messages_Error_message_mandatory_fields_default",errorMessage:"Contact_Form_Settings_Messages_Error_message_for_email_fields_default"};return function(t,e,o,s,u,c){var l;l=s.data,n.default.forOwn(a,(function(t,e){l[e]=i.translate(t)})),r.default.updateDataWithDefaults(s.data,t);const p=e(o,s);return c&&t.dsActions.waitForChangesApplied((function(){c(p)})),p}}.apply(e,n))||(t.exports=i)},1499:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(2)],void 0===(i=function(t,e,o,n,i){"use strict";n=o.__importDefault(n);const r=(i=o.__importStar(i)).imageTransform.fittingTypes;return function(t,e,o,i,a,s){i.props||(i=function(t){return n.default.merge(t,{data:{title:""},layout:{rotationInDegrees:0,scale:1,fixedPosition:!1,anchors:[]},props:{displayMode:r.SCALE_TO_FILL,type:"WPhotoProperties"},style:t.style||"ca1"})}(i));const u=e(o,i);return s&&t.dsActions.waitForChangesApplied((function(){s(u)})),u}}.apply(e,n))||(t.exports=i)},1500:function(t,e,o){var n,i;n=[o,e,o(0),o(1)],void 0===(i=function(t,e,o,n){"use strict";return n=o.__importDefault(n),function(t,e,o,i,r,a){const s=e(o,function(t){return n.default.defaults(t,{data:{link:null,type:"SvgShape"}})}(i));return a&&t.dsActions.waitForChangesApplied((function(){a(s)})),s}}.apply(e,n))||(t.exports=i)},1501:function(t,e,o){var n,i;n=[o,e,o(0),o(1)],void 0===(i=function(t,e,o,n){"use strict";return n=o.__importDefault(n),function(t,e,o,i,r,a){i.props||(i=function(t){return n.default.merge({},t,{layout:{rotationInDegrees:0,scale:1,fixedPosition:!1,anchors:[]},props:{type:"WPhotoProperties"},style:t.style||"wp2"})}(i));const s=e(o,i);return a&&t.dsActions.waitForChangesApplied((function(){a(s)})),s}}.apply(e,n))||(t.exports=i)},1502:function(t,e,o){var n,i;n=[o,e,o(0),o(6)],void 0===(i=function(t,e,o,n){"use strict";return n=o.__importDefault(n),function(t,e,o,i,r,a){const s=i.layout;s.fixedPosition&&(s.docked.right.px+=n.default.SECTIONS_REORGANIZE.STRIP_WIDTH,s.docked.right.px+=t.isVerticalScrollbarHidden()?.01*window.innerWidth:n.default.SECTIONS_REORGANIZE.STRIP_WIDTH,delete s.x,delete s.y);const u=e(o,i);return a&&t.dsActions.waitForChangesApplied((function(){a(u)})),u}}.apply(e,n))||(t.exports=i)},1503:function(t,e,o){var n;void 0===(n=function(t,e){"use strict";return function(t,e,o,n){n.layout.x=0}}.apply(e,[o,e]))||(t.exports=n)},1504:function(t,e,o){var n,i;n=[o,e,o(0),o(29)],void 0===(i=function(t,e,o,n){"use strict";return n=o.__importStar(n),function(t,e,o){const i=t.components.data.get(e),r=t.dsRead.platform.getAppDataByAppDefId(i.applicationId);r&&t.dsActions.platform.notifyApplication(r.applicationId,n.factory.controllerAdded({controllerRef:e,origin:o}))}}.apply(e,n))||(t.exports=i)},1505:function(t,e,o){var n,i;n=[o,e,o(0),o(1)],void 0===(i=function(t,e,o,n){"use strict";return n=o.__importDefault(n),function(t,e,o,i){const r=i.data.svgId;t.media.vectorImage.fetchSvg(r,n.default.noop)}}.apply(e,n))||(t.exports=i)},1506:function(t,e,o){var n,i;n=[o,e,o(0),o(6),o(1)],void 0===(i=function(t,e,o,n,i){"use strict";return n=o.__importDefault(n),i=o.__importDefault(i),function(t,e){const o=t.components.properties.get(e);if("fit"===o.displayMode||"legacyFit"===o.displayMode){const o=t.media.vectorImage.getSvgOriginalAspectRatio(e);t.components.layout.resetCompLayoutToAspectRatio(e,o,!0)}const r=t.components.data.get(e),a=t.media.vectorImage.getSvgInfoFromCache(r.svgId),s=i.default.get(a,"svgType");if(i.default.includes(["shape","tint"],s)){const o=t.components.design.get(e),r=i.default.get(o,"overrideColors");if(i.default.isEmpty(r)){const r=n.default.VECTOR_IMAGE_DEFAULTS.VECTOR_SHAPE_COLOR_DEFAULT.color1,a=i.default.assign({},o,{overrideColors:{color1:r}});t.components.design.update(e,a,!0,!0)}}}}.apply(e,n))||(t.exports=i)},1507:function(t,e,o){var n,i;n=[o,e,o(0),o(1)],void 0===(i=function(t,e,o,n){"use strict";return n=o.__importDefault(n),function(t,e){const o=n.default.head(t.components.modes.getModesByType(e,"POPOVER"));o&&t.components.modes.activateComponentMode(e,o.modeId)}}.apply(e,n))||(t.exports=i)},1508:function(t,e,o){var n;void 0===(n=function(t,e){"use strict";return function(t,e,o,n){n.data.urlFormat=t.dsRead.generalInfo.urlFormat.get()}}.apply(e,[o,e]))||(t.exports=n)},1509:function(t,e,o){var n,i;function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function a(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){s(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function s(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}n=[o,e,o(0),o(1),o(420),o(426),o(246)],void 0===(i=function(t,e,o,n,i,r,s){"use strict";function u(t,e,o,n,r,a,s){i.default.call(this,t,e,o,n,r,a,s)}return n=o.__importDefault(n),i=o.__importDefault(i),r=o.__importDefault(r),s=o.__importDefault(s),u.prototype=Object.create(i.default.prototype),u.prototype.constructor=u,n.default.assign(u.prototype,{init:n.default.noop,getFixedDragPosition:t=>({x:t.clientX,y:t.clientY}),handleDragOutsidePanelArea(t){const e=this.getDragBoxStageLayout();this.handleSectionDrag(t,e)},handleDragInPanelArea(){this.cancelSectionDragIfNeeded()},handleSectionDrag(t,e){this.isSectionDrag||(this.initSectionDrag(t,e),this.isSectionDrag=!0),this.draggedSection=a({},this.draggedSection,{layout:a({},this.draggedSection.layout,{y:e.y})}),r.default.on(t)},initSectionDrag(t,e){this.draggedSection=function(t,e){const o=function(t){const e=t.pages.getFocusedPage();return t.components.layout.getRelativeToScreen(e)}(t),i=Math.max(o.y-e.y,0);return{origin:"addPanel",comps:[],layout:n.default.pick(e,["y","height"]),position:{top:e.y+i,bottom:e.y+e.height+i}}}(this.editorAPI,e);let o=s.default.getPageSections(this.editorAPI);o=s.default.addSectionByPosition(o,this.draggedSection),this.editorAPI.setPageSections(o,null),r.default.start(this.editorAPI,{sections:o,evt:t,draggedSection:this.draggedSection})},cancelSectionDragIfNeeded(){this.isSectionDrag&&(this.isSectionDrag=!1,this.editorAPI.history.add("sections reorganize"),this.editorAPI.history.undo(),this.editorAPI.clearPageSections())},clearDrag(){this.isSectionDrag&&this.editorAPI.clearPageSections()},getDropContainer(){return this.editorAPI.pages.getFocusedPage()},getCompPositionRelativeToContainer(t,e){const o=i.default.prototype.getCompPositionRelativeToContainer.call(this,t,e),n=this.draggedSection.position.top-this.draggedSection.layout.y;return o.y+=n,o}}),u}.apply(e,n))||(t.exports=i)},151:function(t,e,o){var n;void 0===(n=function(t,e){"use strict";const o={isTPA:function(t){return!!t.tpaApplicationId},isTPASpecialPage:function(t,e,n){if(!o.isTPA(e))return!1;const i=t.pages.isContainsCompWithType(e.id,t.tpa.constants.COMP_TYPES.TPA_MULTI_SECTION),r=!n||!t.routers.getRouterDataForPageIfExist(e.id);return i&&r},isPageNotVisibleInPagesMenu:function(t,e){return t.tpa.isPageMarkedAsHideFromMenu(e.tpaApplicationId,e.tpaPageId)}};return o}.apply(e,[o,e]))||(t.exports=n)},1510:function(t,e,o){var n,i;n=[o,e,o(0),o(1)],void 0===(i=function(t,e,o,n){"use strict";function i(t){return Boolean(t.docked&&t.docked.vCenter||t.symmetry&&t.symmetry.vertical)}function r(t){const e=n.default.chain(t).get("docked.left.vw").isFinite().value(),o=n.default.chain(t).get("docked.right.vw").isFinite().value();return e&&o}return n=o.__importDefault(n),{getLayoutSymmetry:function(t){return{horizontal:(e=t,Boolean(e.docked&&e.docked.hCenter||e.symmetry&&e.symmetry.horizontal)||r(t)),vertical:i(t)};var e}}}.apply(e,n))||(t.exports=i)},1511:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(429)],void 0===(i=function(t,e,o,n,i){"use strict";function r(t,e,o,i){if(!t)return t;const r=n.default.pick(t,["width","height"]);return n.default.isNumber(t.x)&&(r.x=e.x+t.x,o&&(r.x+=i)),n.default.isNumber(t.y)&&(r.y=e.y+t.y),r}function a(t,e){return n.default.some(t,(function(t,o){return!n.default.isEqual(t,e[o])}))}return n=o.__importDefault(n),i=o.__importDefault(i),{getLayoutAfterConstraints:function(t,e,o,s){if(a(o,s)&&!t.utils.isPage(e)){const a=new i.default(t,e);if(a.hasConstraints()){const i=t.components.layout.isHorizontallyStretchedToScreen(e),u=t.site.getSiteX(),c=function(t,e){const o=t.components.getContainer(e);return t.components.layout.getRelativeToScreen(o)}(t,e),l=r(o,c,i,u),p=r(s,c,i,u);a.applyConstraints(t,e,l,p);const d=function(t,e,o,i){if(!t)return t;const r=n.default.pick(t,["width","height"]);return n.default.isNumber(t.x)&&(r.x=t.x-e.x,o&&(r.x-=i)),n.default.isNumber(t.y)&&(r.y=t.y-e.y),r}(l,c,i,u);n.default.assign(o,n.default.pick(d,n.default.keys(o)))}}return o},getLayoutRelativeToScreenAfterConstraints:function(t,e,o,n){if(a(o,n)&&!t.utils.isPage(e)){const r=new i.default(t,e);r.hasConstraints()&&r.applyConstraints(t,e,o,n)}return o}}}.apply(e,n))||(t.exports=i)},1512:function(t,e,o){var n,i;n=[o,e,o(0),o(1)],void 0===(i=function(t,e,o,n){"use strict";function i(t,e,o){!function(t,e,o){const i=e.x,r=e.x+e.width,a=t.left;a&&(n.default.isNumber(a.compLeftX)&&(o.x&&i<a.compLeftX&&(e.x+=a.compLeftX-i),o.width&&i<a.compLeftX&&(e.width-=a.compLeftX-i)),n.default.isNumber(a.compRightX)&&(o.x&&r<a.compRightX&&(e.x+=a.compRightX-r),o.width&&r<a.compRightX&&(e.width+=a.compRightX-r)))}(t,e,o),function(t,e,o){const i=e.x,r=e.x+e.width,a=t.right;a&&(n.default.isNumber(a.compRightX)&&(o.x&&r>a.compRightX&&(e.x+=a.compRightX-r),o.width&&r>a.compRightX&&(e.width+=a.compRightX-r)),n.default.isNumber(a.compLeftX)&&(o.x&&i>a.compLeftX&&(e.x+=a.compLeftX-i),o.width&&i>a.compLeftX&&(e.width-=a.compLeftX-i)))}(t,e,o)}function r(t,e,o){!function(t,e,o){const i=e.y,r=e.y+e.height,a=t.top;a&&(n.default.isNumber(a.compTopY)&&(o.y&&i<a.compTopY&&(e.y+=a.compTopY-i),o.height&&i<a.compTopY&&(e.height-=a.compTopY-i)),n.default.isNumber(a.compBottomY)&&(o.y&&r<a.compBottomY&&(e.y+=a.compBottomY-r),o.height&&r<a.compBottomY&&(e.height+=a.compBottomY-r)))}(t,e,o),function(t,e,o){const i=e.y,r=e.y+e.height,a=t.bottom;a&&(n.default.isNumber(a.compBottomY)&&(o.y&&r>a.compBottomY&&(e.y+=a.compBottomY-r),o.height&&r>a.compBottomY&&(e.height+=a.compBottomY-r)),n.default.isNumber(a.compTopY)&&(o.y&&i>a.compTopY&&(e.y+=a.compTopY-i),o.height&&i>a.compTopY&&(e.height-=a.compTopY-i)))}(t,e,o)}return n=o.__importDefault(n),{applyBoundariesConstraintOnLayout:function(t,e,o,a,s){const u=function(t,e){return n.default(t).pick(["x","y","width","height"]).pickBy((function(t,o){return!n.default.isEqual(t,e[o])})).mapValues((function(t,e){return e})).value()}(a,s);(t.left||t.right)&&i(t,a,u),(t.top||t.bottom)&&r(t,a,u)}}}.apply(e,n))||(t.exports=i)},1513:function(t,e,o){var n,i;n=[o,e,o(0),o(1514),o(1515),o(1516),o(1517)],void 0===(i=function(t,e,o,n,i,r,a){"use strict";return n=o.__importDefault(n),i=o.__importDefault(i),r=o.__importDefault(r),a=o.__importDefault(a),[n.default,i.default,r.default,a.default]}.apply(e,n))||(t.exports=i)},1514:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(7)],void 0===(i=function(t,e,o,n,i){"use strict";n=o.__importDefault(n),i=o.__importDefault(i);const{getPreviewPosition:r}=i.default.editorPlugins.domMeasurements.selectors;return{shouldConstrain:function(t,e){return t.components.layout.isHorizontallyStretchedToScreen(e)},applyConstraint:function(t,e,o,i){const a=t.store.getState(),s=r(a).width,u=function(t,e){return n.default(t).pick(["x","y","width","height"]).pickBy((function(t,o){return!n.default.isEqual(t,e[o])})).mapValues((function(t,e){return e})).value()}(o,i);let c;if(u.x){const t=o.x,e=80;c=n.default.min([e-t,0]),c&&(o.x+=c)}if(u.width){const t=o.x+o.width,e=s-80;c=n.default.max([e-t,0]),c&&(o.width+=c)}}}}.apply(e,n))||(t.exports=i)},1515:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(431),o(7),o(6)],void 0===(i=function(t,e,o,n,i,r,a){"use strict";n=o.__importDefault(n),i=o.__importDefault(i),r=o.__importDefault(r),a=o.__importDefault(a);const s="getSiteStructure",u="getHeader",c="getFooter",l=r.default.editorPlugins.components.selectors;function p(t,e){const o=t.siteSegments[e].call(t.siteSegment);return t.components.layout.getRelativeToScreen(o)}function d(t,e){return{left:t.x,width:t.width,height:t.height-e.height}}function f(t,e){const o=p(t,u);return n.default.assign(d(e,o),{top:e.y+o.height})}function g(t,e){return t.utils.isSameRef(e,t.dsRead.siteSegments.getHeader())}function m(t,e){return t.utils.isSameRef(e,t.dsRead.siteSegments.getFooter())}function h(t,e){return"SiteRegionContainer"===l.getCompTypeSuffix(e,t.dsRead)}function y(t){const e=p(t,s);return{top:{compBottomY:a.default.SIZE_LIMITS.MOBILE_DRAG_CONSTRAINT_MARGINS},bottom:{},left:{compRightX:e.x+a.default.SIZE_LIMITS.MOBILE_DRAG_CONSTRAINT_MARGINS},right:{compLeftX:e.x+e.width-a.default.SIZE_LIMITS.MOBILE_DRAG_CONSTRAINT_MARGINS}}}const _={getBoundaries(t,e){const o=t.components.getContainer(e);if(h(t,o))return function(t,e){const o=t.components.layout.getRelativeToScreen(e);return{top:{compTopY:o.y},bottom:{compBottomY:o.y+o.height},left:{compLeftX:o.x},right:{compRightX:o.x+o.width}}}(t,o);const a=y(t);if(!i.default.isShownOnAllPagesComponent(t,e))return n.default.assign(a.bottom,{compBottomY:5e5}),a;const s=p(t,c);if(function(t){const e=r.default.editorPlugins.selection.selectors.getFocusedContainer(t.store.getState());return function(t,e){return"wysiwyg.viewer.components.MenuContainer"===t.components.getType(e)}(t,e)}(t)||n.default.assign(a.bottom,{compBottomY:s.y+s.height}),g(t,o)){const e=p(t,u);return n.default.assign(a.bottom,{compBottomY:e.height}),a}return m(t,o)&&n.default.assign(a.top,{compTopY:s.y}),a},getConstraintArea(t,e){const o=t.components.getContainer(e),r=p(t,s);return h(t,o)?function(t,e,o){const i=p(t,u),r={left:i.x,width:i.width,height:i.height,top:i.y},a=t.components.layout.getRelativeToScreen(o),s=n.default.assign(d(e,a),{top:e.y+a.height+a.y});return n.default.concat(r,s)}(t,r,o):i.default.isShownOnAllPagesComponent(t,e)?g(t,o)?f(t,r):m(t,o)?function(t,e){const o=p(t,c);return n.default.assign(d(e,o),{bottom:e.y+o.y})}(t,r):null:null}},P={getBoundaries(t){const e=p(t,s),o=p(t,u);return{top:{compTopY:e.y},bottom:{compBottomY:o?Math.min(o.height,a.default.SIZE_LIMITS.MOBILE_MENU_MAX_Y):a.default.SIZE_LIMITS.MOBILE_MENU_MAX_Y},left:{compLeftX:e.x},right:{compRightX:e.x+e.width}}},getConstraintArea(t){const e=p(t,s),o=p(t,u),i=f(t,e);return n.default.assign(i,{top:e.y+Math.min(a.default.SIZE_LIMITS.MOBILE_MENU_MAX_Y,o.height)}),i}},S={"wysiwyg.viewer.components.HeaderContainer":{getBoundaries(t,e){const o=t.dsRead.components.getChildren(n.default.isArray(e)?e[0]:e),i=y(t);return n.default.isEmpty(o)?i:n.default.assign(i,{top:{compBottomY:a.default.SIZE_LIMITS.MOBILE_HEADER_MIN_HEIGHT}})},getConstraintArea:()=>null},"wysiwyg.viewer.components.mobile.TinyMenu":P,"wysiwyg.viewer.components.MenuToggle":P,"wysiwyg.viewer.components.BackToTopButton":{getBoundaries:()=>({}),getConstraintArea:()=>null}};function x(t,e){const o=t.components.getType(e);return S[o]||_}return{shouldConstrain:t=>t.isMobileEditor(),getConstraintArea:(t,e)=>x(t,e).getConstraintArea(t,e),getBoundaries:(t,e)=>x(t,e).getBoundaries(t,e)}}.apply(e,n))||(t.exports=i)},1516:function(t,e,o){var n,i;n=[o,e,o(0),o(431),o(13)],void 0===(i=function(t,e,o,n,i){"use strict";n=o.__importDefault(n),i=o.__importDefault(i);function r(t,e){if(n.default.isShownOnAllPagesComponent(t,e)&&(!t.siteSegments.isUsingSectionsLayout()||!function(t,e){const o=t.siteSegments.getSiteStructure();return t.utils.isSameRef(t.components.getContainer(e),o)}(t,e))){const e=t.components.layout.getRelativeToScreen(t.dsRead.siteSegments.getFooter());return e.y+e.height}return 5e5}return{shouldConstrain:t=>!t.isMobileEditor(),getBoundaries:function(t,e){const o={};return o.top=i.default.isOpen("removeDesktopTopConstraintExp")?{compBottomY:20}:{compTopY:0},t.isCurrentPageLandingPage()||(o.bottom={compBottomY:r(t,e)}),o}}}.apply(e,n))||(t.exports=i)},1517:function(t,e,o){var n,i;n=[o,e,o(0),o(7)],void 0===(i=function(t,e,o,n){"use strict";const i=(n=o.__importDefault(n)).default.editorPlugins.components.selectors;return{shouldConstrain:(t,e)=>t.isMobileEditor()&&t.components.is.descendantOfRepeaterItem(e)&&!i.isRepeaterItem(e,t.dsRead),getBoundaries:function(t,e){const o=t.components.getAncestorRepeaterItem(e),n=t.components.layout.getRelativeToScreen(e),i=t.components.layout.getRelativeToScreen(o);return{left:{compLeftX:i.x-n.width+20},right:{compRightX:i.x+i.width+n.width-20},top:{compTopY:i.y},bottom:{compBottomY:i.y+i.height}}}}}.apply(e,n))||(t.exports=i)},1518:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(245)],void 0===(i=function(t,e,o,n,i){"use strict";return n=o.__importDefault(n),i=o.__importDefault(i),{fixData:function t(e){return i.default[e.type]&&i.default[e.type](e),n.default.forEach(e,(function(e){n.default.isPlainObject(e)&&e.type&&t(e)})),e}}}.apply(e,n))||(t.exports=i)},1519:function(t,e,o){var n,i;n=[o,e,o(0),o(1520)],void 0===(i=function(t,e,o,n){"use strict";return n=o.__importDefault(n),{fixProperties:function(t,e,o,i,r){const a=t.type||"DefaultProperties";return n.default[a]&&n.default[a](t,e,o,i,r),t}}}.apply(e,n))||(t.exports=i)},1520:function(t,e,o){var n,i;n=[o,e,o(0),o(1521),o(1522),o(1523)],void 0===(i=function(t,e,o,n,i,r){"use strict";return n=o.__importDefault(n),i=o.__importDefault(i),r=o.__importDefault(r),{WPhotoProperties:n.default,VectorImageProperties:i.default,PopoverProperties:r.default}}.apply(e,n))||(t.exports=i)},1521:function(t,e,o){var n,i;n=[o,e,o(0),o(1)],void 0===(i=function(t,e,o,n){"use strict";return n=o.__importDefault(n),function(t,e,o,i,r){return r||function(t,e,o,i){const r=n.default.pick(t,"filterEffect");if(n.default.isEmpty(r))return;const a=o.viewMode.VIEW_MODES.MOBILE,s=o.components.getPage(e).id,u=o.components.get.byId(e.id,s,a);u&&o.components.is.exist(u)&&o.components.properties.mobile.isForked(u)&&i.components.properties.update(u,r)}(t,e,o,i),t}}.apply(e,n))||(t.exports=i)},1522:function(t,e,o){var n,i;n=[o,e,o(0),o(1)],void 0===(i=function(t,e,o,n){"use strict";return n=o.__importDefault(n),function(t,e,o,i,r){return r||function(t,e,o,i){const r=n.default.pick(t,"flip");if(n.default.isEmpty(r)||!i.components.properties.mobile)return;const a=o.viewMode.VIEW_MODES.MOBILE,s=o.components.getPage(e).id,u=o.components.get.byId(e.id,s,a),c=u&&o.components.is.exist(u),l=c&&o.components.properties.mobile.isForked(u);c&&!l&&i.components.properties.mobile.fork(u)}(t,e,o,i),t}}.apply(e,n))||(t.exports=i)},1523:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(247),o(13)],void 0===(i=function(t,e,o,n,i,r){"use strict";return n=o.__importDefault(n),i=o.__importDefault(i),(r=o.__importDefault(r)).default.isOpen("se_newPopover")?function(t,e,o,n){const r=i.default.getComponentConnectedToPopover(o,e),a=o.components.layout.get(r),s=o.components.layout.get(e),u=i.default.calculatePopoverPosition({triggerBounding:a.bounding,popoverWidth:s.bounding.width,popoverHeight:s.bounding.height,popoverProps:t});n.components.layout.update(e,u)}:n.default.noop}.apply(e,n))||(t.exports=i)},1524:function(t,e,o){var n,i;n=[o,e,o(0),o(429)],void 0===(i=function(t,e,o,n){"use strict";function i(t,e){if(!t)return;this.editorAPI=t,this.comp=e;const o=new n.default(t,e);this.constraintArea=o.getConstraintArea(t,e)}return n=o.__importDefault(n),i.prototype.highlightDragConstraints=function(){this.editorAPI.setConstraintArea(this.constraintArea)},i.prototype.removeHighlightDragConstraints=function(){this.editorAPI.setConstraintArea(null)},i}.apply(e,n))||(t.exports=i)},1525:function(t,e,o){var n,i;n=[o,e,o(0),o(1)],void 0===(i=function(t,e,o,n){"use strict";function i(){return window.document.getElementById("scrollableEditorStage")}return n=o.__importDefault(n),{getScroll(){const t=i();return n.default.pick(t,["scrollLeft","scrollTop","scrollHeight","scrollWidth"])},setScroll(t){const e=i();n.default.isUndefined(t.scrollTop)||(e.scrollTop=t.scrollTop),n.default.isUndefined(t.scrollLeft)||(e.scrollLeft=t.scrollLeft)}}}.apply(e,n))||(t.exports=i)},1526:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(22),o(6)],void 0===(i=function(t,e,o,n,i,r){"use strict";let a;n=o.__importDefault(n),i=o.__importDefault(i);const s=(r=o.__importDefault(r)).default.UI.compPanelMargins,u="compTop",c="compBottom",l="compLeft",p="compRight",d="viewPortTop",f="viewPortBottom",g="viewPortLeft",m="viewPortRight",h="gfppLeft",y="gfppRight";function _(t){return{y:t.y,x:t.x,width:t.width,height:t.height,bottomY:t.y+t.height,rightX:t.x+t.width}}function P(t,e){const o=e.viewPortForChildOfFocused||e.viewPort;return t.y>=o.y?u:t.bottomY<=o.bottomY?c:d}function S(t,e,o){const n=e.viewPort,r=n.bottomY-t.y,a=t.bottomY-n.y,s=o?i.default(o).height():0,l=t.y<n.y,p=s<=r,g=t.bottomY>n.bottomY,m=s<=a,h=s<=n.bottomY-n.y;return l||!h?d:p?u:g?f:m?c:d}function x(t,e,o){return{gfpp:P(t,e),compPanel:S(t,e,o)}}function v(t,e,o,n,i){const r=Math.max(a,i&&i.top||0)+n,s=n+a,l=Math.max(a,i&&i.bottom||0);switch(t){case u:return Math.max(e.y-r,o.y-s);case c:return e.bottomY+l;case d:return o.y-s}}function D(t,e,o,n){switch(t){case c:return e.bottomY-n;case u:return e.y;case f:return o.bottomY-n}return o.y}function w(t,e,o,n,i){if(b(e,o.width)){return Math.max(i,o.x)}switch(t){case l:return e.x;case g:return o.x;case m:return o.rightX-n}}function C(t,e,o,n,r){const d=r.gfppSize,f=r.viewPort,_=r.rotateKnobMargins,P=r.pageXBoundary,x=r.alignToPageBoundaries,C={gfpp:{top:0,left:0},compPanel:{top:0,left:0}},I=d.height,A=d.width,T=n?i.default(n).height():0,R=n?i.default(n).width():0;if(C.gfpp.top=v(t.gfpp,o,f,I,_),C.gfpp.left=w(e.gfpp,o,f,A,P),x||b(o,f.width)){const e=Math.max(P,f.x),r=function(t,e,o,n,r,l,p){const d={left:0,top:0},f=o?i.default(o).height():0,g=o?i.default(o).width():0;if(0===g||0===f)return{left:0,top:0};const m=D(S(t,{viewPort:e},o),t,e,f),h=g<=r-e.x,y=f<=e.bottomY-p,_=l===u&&f<=p-e.y-s,P=l===c&&f<=e.bottomY-(p+n)-s;h?(d.left=r-(g+s/2),d.top=y?p:e.bottomY-f):_?(d.left=r,d.top=p-(f+a)):P?(d.left=r,d.top=p+n+a):(d.left=e.rightX-g,d.top=m);return d}(o,f,n,d.height,e,t.gfpp,C.gfpp.top);C.compPanel=r}else C.compPanel.top=D(t.compPanel,o,f,T),C.compPanel.left=function(t,e,o,n,i,r,a){const u=e.rightX-e.x;switch(t){case l:return e.x-n-Math.max(s,a&&a.left||0);case p:return e.x+u+Math.max(s,a&&a.right||0);case g:return o.x;case m:return o.rightX-n-s;case h:return r-n-s;case y:return r+i+s}}(e.compPanel,o,f,R,A,C.gfpp.left,_);return C}function I(t,e,o){let n;return n=t.x>=e.x?o+t.x<=e.rightX?l:m:g,n}function A(t,e,o){const n={},i=function(t){const e=t.x+r.default.UI.CUSTOM_GFPP_POS.X_OFFSET_FROM_CLICK,o=t.y;return{y:o,x:e,width:0,height:0,bottomY:o,rightX:e}}(t),a=x(i,{viewPort:e}).gfpp,s=I(i,e,o.width);return n.top=v(a,i,e,o.height),n.left=w(s,i,e,o.width,0),n}function T(t,e,o,n){const a=n.gfppSize,u=n.viewPort,c=n.navControlsSize,d=a.width,f=o?i.default(o).width():0,_=t.rightX-t.x,P={};let S,x;return P.gfpp=I(t,u,d),P.navControls=function(t,e,o){let n;return n=t.x>=e.x?o+t.x+r.default.UI.NAVIGATION_CONTROLS_POS.LEFT<=e.rightX?l:m:g,n}(t,u,c.width),e.gfpp===e.compPanel?(S=t.rightX+f+s<=u.rightX,x=t.x-f-s>=u.x,t.rightX<u.x?P.compPanel=g:P.compPanel=S?p:x?l:m):P.gfpp===l?d<=_?(S=t.x+_+s+f<u.rightX,x=t.x-s-f>=u.x,P.compPanel=S?p:x?l:m):(x=t.x-s-f>=u.x,P.compPanel=x?l:y):P.gfpp===m?P.compPanel=h:P.gfpp===g&&(S=Math.max(u.x+d,t.x+_)+f<=u.rightX,S?u.x+d>t.x+_?P.compPanel=y:P.compPanel=p:P.compPanel=m),P}function R(t,e,o){const n=x(t,o,e),i=T(t,n,e,o),a=C(n,i,t,e,o),s=function(t,e,o,n){const i=n.navControlsSize,a=n.viewPort,s=n.pageXBoundary,p={};if(b(o,a.width)){const t=Math.max(s,a.x);p.left=t-o.x+r.default.UI.NAVIGATION_CONTROLS_POS.LEFT}else switch(e.navControls){case g:p.left=a.x-o.x+r.default.UI.NAVIGATION_CONTROLS_POS.LEFT;break;case m:p.left=a.rightX-(o.x+i.width+r.default.UI.NAVIGATION_CONTROLS_POS.LEFT);break;case l:p.left=r.default.UI.NAVIGATION_CONTROLS_POS.LEFT}switch(t.gfpp){case c:p.top=r.default.UI.NAVIGATION_CONTROLS_POS.BOTTOM;break;case u:case d:p.top=r.default.UI.NAVIGATION_CONTROLS_POS.TOP}return p}(n,i,t,o),p=function(t,e){return e.navControlsSize.width?t.left+e.navControlsSize.width+r.default.UI.MARGIN_BETWEEN_FOCUS_TAB_AND_COMP_LABELS:0}(s,o);return{gfppStyle:a.gfpp,compPanelStyle:a.compPanel,navControlsStyle:s,editBoxLabelsOffset:p}}function b(t,e){return t.x<1&&t.width>=e}return{getCompControlsPositions(t,e,o,i,s,u){let c,l;i=n.default(i).pickBy().defaults({gfppSize:{width:0,height:0},navControlsSize:{width:0,height:0},pageXBoundary:0,rotateKnobMargins:{},alignToPageBoundaries:!1}).value();const p=_(o.layout),d=t&&t.id!==o.id;if(a=r.default.UI.gfppMargins,u?a=u:t&&!d?a=r.default.UI.navControlsGfppMargins:o.hasLabels&&(a=r.default.UI.componentLabelsGfppMargins),t?(l=_(t.layout),c=R(l,e,i)):c=R(p,e,i),t&&d){const t=function(t,e,o){if(e.height<o.height+2*r.default.UI.VIEWPORT_VERTICAL_MARGINS)return t;const i={y:Math.max(t.y,e.y+r.default.UI.VIEWPORT_VERTICAL_MARGINS),height:Math.min(t.height,e.height-2*r.default.UI.VIEWPORT_VERTICAL_MARGINS),bottomY:Math.min(t.bottomY,e.bottomY-r.default.UI.VIEWPORT_VERTICAL_MARGINS)};return n.default.assign({},t,i)}(i.viewPort,l,p),o=R(p,e,n.default.defaults({viewPortForChildOfFocused:t},i));c.gfppStyle=o.gfppStyle,c.compPanelStyle=o.compPanelStyle,c.editBoxLabelsOffset=0}return s&&(c.gfppStyle=A(s,i.viewPort,i.gfppSize)),c},getGfppPosition(t,e,o){a=r.default.UI.gfppMargins;const n=_(e),i=P(n,{viewPort:o}),s=I(n,o,t.width);return{top:v(i,n,o,t.height),left:w(s,n,o,t.width,0)}}}}.apply(e,n))||(t.exports=i)},1527:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(1528)],void 0===(i=function(t,e,o,n,i){"use strict";n=o.__importDefault(n);const r={"wysiwyg.viewer.components.mobile.TinyMenu":(i=o.__importDefault(i)).default,"wysiwyg.viewer.components.MenuToggle":i.default};return{registerPlugin:function(t,e){r[t]=e},setFixedPosition:function(t,e,o){const i=t.components.getType(e);return r[i]&&n.default.isFunction(r[i])?r[i].call(null,t,e,o):function(t,e,o){t.components.layout.updateFixedPosition(e[0]||e,o)}(t,e,o),o}}}.apply(e,n))||(t.exports=i)},1528:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(6)],void 0===(i=function(t,e,o,n,i){"use strict";return n=o.__importDefault(n),i=o.__importDefault(i),function(t,e,o){const r=t.components.layout.getRelativeToStructure(e),a={fixedPosition:o},s=i.default.SIZE_LIMITS.MOBILE_MENU_MAX_Y;r.y>s&&(!function(t,e){const o=t.components.getContainer(e),i=t.dsRead.siteSegments.getHeader();n.default.isEqual(o,i)||t.components.setContainer(e,i)}(t,e),n.default.merge(a,t.mobile.mobileOnlyComponents.getTinyMenuDefaultPosition())),t.components.layout.update(e,a)}}.apply(e,n))||(t.exports=i)},1529:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(2),o(38),o(17)],void 0===(i=function(t,e,o,n,i,r,a){"use strict";n=o.__importDefault(n),i=o.__importStar(i),r=o.__importDefault(r),a=o.__importDefault(a);const s="135c3d92-0fea-1f9d-2ba5-2a1dfb04297e",u="feedb3b8-0b1a-413f-bcab-73e805d0f554";function c(t){window.open(t)}const l=n.default.once((function(t){let e;const o=function(){const t=window.location.hostname.match(/editor\.(.*)/);return t?"www.".concat(t[1]):"www.wix.com"}();e=n.default.includes(o,"wix.com")?"304553036307597":"394905507233800";const i={appId:e,status:!0,cookie:!0,xfbml:1};t.init(i)}));return{openShoutout(t){c(["//www.wix.com/my-account/sites/",t,"/app/",s,"?referralInfo=ed_prem_promo","&appState=%3Fdl%3Dmessage%26messageId%3D",u].join(""))},openTwitter(t,e){const o=e?i.translate("TWITTER_CHECK_OUT_MY_SITE_MSG_PREMIUM"):i.translate("TWITTER_CHECK_OUT_MY_SITE_MSG_NON_PREMIUM");var n,r,a;c((n=o,r=i.translate("TWITTER_RELATED_WIX_ACCOUNTS"),a=i.translate("TWITTER_WIX_HASHTAGS"),n=decodeURIComponent(n),"".concat("https://twitter.com/intent/tweet?url="+t,"&text=").concat(n,"&related=").concat(r,"&hashtags=").concat(a)))},openFacebook(t,e,o,s){r.default(["facebook"],(function(r){l(r);const a=n.default.clone(t),u=(c=a,"http://".concat(e,".wix.com/html5webbuilder/share")+"?utm_campaign=".concat("vir_fb_pub_h","_").concat(e,"&experiment_id=")+c.replace(/https?:\/\//,""));var c;const p={method:"feed",name:o,description:s,link:t,actions:[{name:i.translate("FACEBBOK_SHARE_MESSAGE"),link:u}]};r.ui(p)}),(function(t){a.default.log.error(t)}))}}}.apply(e,n))||(t.exports=i)},1530:function(t,e,o){var n,i;n=[o,e,o(0),o(2)],void 0===(i=function(t,e,o,n){"use strict";const i=(n=o.__importStar(n)).url,r=["tracks","albums","artists"],a=i.joinURL(n.editorModel.editorBase,"app/external/SpotifySearch/index.html?id=");function s(t,e,o){return"".concat(a+t,"&lang=").concat(o,"&tabs=").concat(JSON.stringify(e),"&default_tab=").concat(e[0],"&fontFaceUrl=https://static.parastorage.com/services/wix-public/1.160.0/css/Helvetica/fontFace.css")}return{openIframe(t,e,o){const i=n.languages.getLanguageCode(),a="spotifySearch_".concat(Date.now());e=e||r;const u=t.selection.getSelectedComponentType();t.panelManager.openPanel("panels.focusPanels.spotifySearchFocusPanel",{panelName:"Spotify Search",iframeSrc:s(a,e,i),id:a,selectedComponentType:u,callback:o},!1)},validateSpotifyUri:function(t){return(e=t)&&0===e.indexOf("spotify:")&&function(t){const e=t.split(":");return e.length>2&&e[e.length-1].length>0}(t);var e},validateFollowUri:function(t){return 0===t.toLowerCase().indexOf("spotify:artist:")}}}.apply(e,n))||(t.exports=i)},1531:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(7),o(14),o(419),o(1532)],void 0===(i=function(t,e,o,n,i,r,a,s){"use strict";return n=o.__importDefault(n),i=o.__importDefault(i),r=o.__importStar(r),a=o.__importDefault(a),s=o.__importDefault(s),[function(t,e){const o=e.components.get.byType(t);n.default.forEach(o,(function(t){const o=e.components.data.get(t),i=n.default.clone(o);a.default.updateDataWithDefaults(o,e),n.default.isEqual(o,i)||e.components.data.update(t,o)}))}.bind(null,["wysiwyg.viewer.components.ContactForm","wysiwyg.viewer.components.DynamicContactForm","wysiwyg.common.components.subscribeform.viewer.SubscribeForm"]),function(t){t.registerCannotRemovePlugin("*",e=>{const o=i.default.editorPlugins.components.selectors.isRefComponent(e),a=t.platform.controllers.getConnectedComponentStageData(e),s=n.default.get(a,["behavior","preventHide"],!1);o&&s&&t.store.dispatch(i.default.editorPlugins.notifications.actions.showUserActionNotification({message:"PLATFORM_Notification_open_close_cannot_delete_element",title:"Delete by ref inner comp",type:"error",link:{caption:"Notifications_Learn_More_Link",onNotificationLinkClick:()=>{t.panelManager.openHelpCenter(r.NOTIFICATIONS.CANNOT_DELETE_REF_COMPONENT_INNER_COMP)}}}))})},function(t){t.registerPasteComponentPlugin("platform.components.AppController",s.default.removeConnectedComponentsIfAlreadyExist),t.registerPasteComponentPlugin("*",s.default.removeSerializedDataId),t.registerAddComponentPlugin("*",s.default.stretchAppWidgetBottomOnConnectedComponentPaste)}]}.apply(e,n))||(t.exports=i)},1532:function(t,e,o){var n,i;n=[o,e,o(0),o(1)],void 0===(i=function(t,e,o,n){"use strict";n=o.__importDefault(n);function i(t,e){return n.default.isEqual(e.controllerRef,t.controllerRef)&&n.default.isEqual(e.role,t.role)}return{removeConnectedComponentsIfAlreadyExist:function(t,e){const o=function(t,e){const o=e.id&&t.components.get.byId(e.id);return o&&t.components.is.exist(o)?n.default.omit(e,"id"):e}(t,n.default.cloneDeep(e)),r=t.dsRead.platform.serialization.getConnectedComponents(o),a=n.default.transform(r,(function(e,o,r){e[r]=function(t,e,o){const r=t.components.get.byId(e,t.dsRead.pages.getFocusedPageId());if(!r)return[];const a=t.dsRead.platform.controllers.connections.get(r);return n.default.reject(o,(function(t){return n.default.find(a,n.default.partial(i,t))}))}(t,r,o)}),{});return t.dsActions.platform.serialization.setConnectedComponents(o,a)},removeSerializedDataId:function(t,e){return"platform.components.AppController"===e.componentType?e:n.default.omit(e,"id")},stretchAppWidgetBottomOnConnectedComponentPaste:function(t,e,o,n){if(o){const i=t.dsRead.components.layout.getRelativeToScreen(o),r=t.dsRead.components.layout.getRelativeToScreen(n).y-i.y,a=e.layout.height+e.layout.y+r;a>i.height&&t.components.layout.update(o,{height:a})}}}}.apply(e,n))||(t.exports=i)},1533:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(151)],void 0===(i=function(t,e,o,n,i){"use strict";n=o.__importDefault(n),i=o.__importDefault(i);const r="product_page",a="shopping_cart",s="thank_you_page";function u(t,e){return e.tpaPageId===t}return{isWixStore:n.default.partial((function(t,e,o){return function(t,e){if(i.default.isTPA(e)){const o=t.dsRead.tpa.section.getPageData(e.id).appData;return o&&o.appDefinitionId}}(e,o)===t}),"1380b703-ce81-ff05-f115-39571d94dfcd"),isWixStoreCartPage:n.default.partial(u,a),isWixStoreThankYouPage:n.default.partial(u,s),isWixStoreProductPage:n.default.partial(u,r)}}.apply(e,n))||(t.exports=i)},1534:function(t,e,o){var n,i;n=[o,e,o(0),o(4)],void 0===(i=function(t,e,o,n){"use strict";return{contextTypes:{editorAPI:(n=o.__importDefault(n)).default.object},getEditorAPI(){return this.context.editorAPI}}}.apply(e,n))||(t.exports=i)},1535:function(t,e,o){var n,i;n=[o,e,o(0),o(1)],void 0===(i=function(t,e,o,n){"use strict";function i(t,e){return n.default.isEqual(t,e)}function r(t,e,o,i,r){const a=n.default.union(i,[o]);return n.default.reduce(a,(t,o)=>{const i=n.default(o).thru(e.get.byType).map(t=>({compPtr:t,styleItem:e.style.get(t)})).filter({styleItem:{styleType:r}}).value();return t=n.default.union(t,i)},[])}function a(t,e,o){const i=function(t,e,o){if(!e){const e=n.default.find(t.COMPONENT_DEFINITION_MAP,(function(t){return t.styles&&t.styles[o]}));return e&&e.styles[o]}{const n=t.getDefinition(e);if(n&&n.styles)return n.styles[o]}}(t,e,o);return i?{id:o,compId:"",componentClassName:"",pageId:"",styleType:"system",type:"TopLevelStyle",skin:i,style:{groups:{},properties:{},propertiesSource:{}}}:null}function s(t){const e=n.default.map(t,(function(t,e){return[e,t]}));return n.default.sortBy(e,n.default.head)}return n=o.__importDefault(n),{getSystemStyleById(t,e,o,n){let i=t.styles.get(o);return i||(i=a(e,n,o)),i},getStyleById(t,e,o,n){return this.getSystemStyleById(t,e,o,n)},getUniqueCustomStylesAndCompPtr(t,e,o){const i=r(0,e,o,[],"custom"),a=this.getUniqueThemeStyleList(t,e,o),u=n.default.uniqBy(i,(function(t){return JSON.stringify(t.styleItem.style?s(t.styleItem.style.properties):{})}));return n.default.remove(u,n.default.bind((function(t){return n.default.find(a,n.default.bind((function(e){return this.isEqualWithoutTypeConsideration(t.styleItem,e)}),this))}),this)),n.default.sortBy(u,"styleItem.id")},getUniqueCustomStyleList(t,e,o){const i=function(t,e,o,i,r){const a=n.default.union(i,[o]);return n.default.reduce(a,(t,o)=>{const i=n.default(o).thru(e.get.byType).map(t=>e.style.get(t)).filter({styleType:r}).value();return t=n.default.union(t,i)},[])}(0,e,o,[],"custom"),r=this.getUniqueThemeStyleList(t,e,o),a=n.default.uniqBy(i,(function(t){return JSON.stringify(t.style?s(t.style.properties):{})}));return n.default.remove(a,n.default.bind((function(t){return n.default.find(r,n.default.bind((function(e){return this.isEqualWithoutTypeConsideration(t,e)}),this))}),this)),n.default.sortBy(a,"skin")},getUniqueThemeStyleList(t,e,o){const i=this.getThemedStyleForComp(t,e,o),r=n.default.uniqBy(i,(function(t){return JSON.stringify(t.style?s(t.style.properties):{})+t.skin}));return n.default.sortBy(r,"skin")},getUniqueThemeStyleAndCompPtrList(t,e,o){const i=r(0,e,o,[],"system"),a=n.default.uniqBy(i,(function(t){return JSON.stringify(t.styleItem.style?s(t.styleItem.style.properties):{})+t.skin}));return n.default.sortBy(a,"styleItem.skin")},getThemedStyleForComp(t,e,o){const i=e.getDefinition(o)?n.default.keys(e.getDefinition(o).styles):[];return n.default.map(i,n.default.bind((function(n){return this.getSystemStyleById(t,e,n,o)}),this))},getThemedStyleAndCompPtrForComp:(t,e,o)=>r(0,e,o,[],"system"),getDuplicateToStyleList(t,e,o,i,a){const s=this.getUniqueThemeStyleAndCompPtrList(t,e,i),u=r(0,e,i,a,"custom"),c=s.concat(u);return n.default(c).reject({id:o.id}).filter(t=>this.isEqualWithoutTypeConsideration(t.styleItem,o)).value()},isEqual(t,e){if(!t||!e)throw new Error("Style is not defined");return t.skin===e.skin&&t.styleType===e.styleType&&("system"===t.styleType?t.id===e.id:!t.style||!e.style||i(t.style.properties,e.style.properties))},isEqualWithoutTypeConsideration(t,e){if(!t||!e)throw new Error("Style is not defined");return t.skin===e.skin&&(!t.style||!e.style||i(t.style.properties,e.style.properties))},getCompDefStyle(t,e){const o=t.style||t.styleId;return n.default.isString(o)?this.getStyleById(e.theme,e.components,o,t.compType):o}}}.apply(e,n))||(t.exports=i)},1536:function(t,e,o){var n,i;n=[o,e,o(0),o(1)],void 0===(i=function(t,e,o,n){"use strict";n=o.__importDefault(n);const i={},r={};function a(t,e){return!n.default.isUndefined(r[t])&&!n.default.isUndefined(r[t][e.charas])}return{getPersonalizedDesigns:function(t,e){return n.default(t.components.getAllComponents()).filter(n.default.flow(t.components.getType,n.default.partial(n.default.includes,e))).map((function(e){return{compRef:e,design:t.components.design.get(e)}})).reject((function(e){const o=t.components.getType(e.compRef),i=e.design;return function(t){const e=(t=t||this.props.compDesign).cssStyle;return n.default(e).keys().every((function(t){return n.default.isNull(e[t])}))}(i)||a(o,i)})).uniqBy("design.charas").value()},addPersonalizedDesign:function(t,e){n.default.isUndefined(i[t])&&(i[t]={}),i[t][e.charas]=e},removePersonalizedDesign:function(t,e){delete i[t][e.charas],n.default.isEmpty(i[t])&&delete i[t]},addThemePresetDesign:function(t,e){n.default.isUndefined(r[t])&&(r[t]={}),r[t][e.charas]=e},isThemeDesign:a}}.apply(e,n))||(t.exports=i)},1537:function(t,e,o){var n,i;n=[o,e,o(0),o(17),o(1),o(2)],void 0===(i=function(t,e,o,n,i,r){"use strict";n=o.__importDefault(n),i=o.__importDefault(i),r=o.__importStar(r);let a=r.serviceTopology.premiumStateApiUrl;return a=a?a.replace(/wix\/getTpaPremiumState/,"premium-management/external/getDocPremiumState?siteGuid="):"//editor.wix.com/_api/premium-management/external/getDocPremiumState?siteGuid=",{getSiteDomainInfo:function(t,e,o){n.default.requestsUtil.fetchJson(a+t,{contentType:"application/json",credentials:"same-origin",method:"GET"}).then(t=>{const o=function(t){return i.default.has(t,"payload.domain.domainName")&&i.default.has(t,"payload.domain.checkStatus")&&0===t.payload.domain.checkStatus}(t),n=function(t){let e=i.default.get(t,"payload.domain.domainName","");return i.default.isEmpty(e)||i.default.includes(e,"http://")||(e="http://"+e),i.default.isEmpty(e)?null:e}(t),r=function(t){return!i.default.isNil(i.default.get(t,"payload.plan.cycle"))}(t);e({isDomainConnected:o,sitePublishedDomain:n,isSitePremium:r})}).catch(o)}}}.apply(e,n))||(t.exports=i)},1538:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(1539),o(1540),o(248),o(151),o(432)],void 0===(i=function(t,e,o,n,i,r,a,s,u){"use strict";n=o.__importDefault(n),i=o.__importDefault(i),r=o.__importDefault(r),a=o.__importDefault(a),s=o.__importDefault(s),u=o.__importDefault(u);const c=a.default.isBlog,l=s.default.isTPA;return{isSpecialPage:(t,e,o)=>a.default.isBlogSpecialPage(e)||s.default.isTPASpecialPage(t.dsRead,e)||function(t,e,o){return o?n.default.has(o,e.id):u.default.isDynamicPage(t,e)}(t,e,o),isSubPageMenuItem(t,e){return this.isSpecialPage(t,e)&&!s.default.isPageNotVisibleInPagesMenu(t.dsRead,e)},getSectionPagesIds(t,e){const o=i.default.getSectionPagesDataList(t,e),a=r.default.getSectionPagesDataList(t,e);return n.default.union(n.default.map(o,"id"),n.default.map(a,"id"))},getSpecialPagesListBySectionPageOrBySibling(t,e,o){if(e){if(c(t,e))return function(t,e){return r.default.getSpecialPagesDataList(t,e||t.dsRead.pages.getPagesData())}(t,o);if(l(e))return function(t,e,o){return i.default.getSpecialPagesDataListByTPAId(t,e,o)}(t,e.tpaApplicationId,o)}return[]}}}.apply(e,n))||(t.exports=i)},1539:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(151)],void 0===(i=function(t,e,o,n,i){"use strict";function r(t,e,o){return n.default.includes(e,o.tpaApplicationId)&&!n.default.has(t,o.id)}n=o.__importDefault(n),i=o.__importDefault(i);const a={getSectionPagesDataList(t,e){const o=function(t,e){return n.default(t).filter(n.default.partial(i.default.isTPASpecialPage,e.dsRead)).keyBy("id").value()}(e,t),a=function(t,e){return n.default(t).filter(t=>n.default.has(e,t.id)).map("tpaApplicationId").uniq().value()}(e,o);return n.default.filter(e,n.default.partial(r,o,a))},getSpecialPagesDataList:(t,e)=>n.default.filter(e,n.default.partial(i.default.isTPASpecialPage,t.dsRead)),getSpecialPagesDataListByTPAId:(t,e,o)=>n.default.filter(a.getSpecialPagesDataList(t,o||t.dsRead.pages.getPagesData()),["tpaApplicationId",e])};return a}.apply(e,n))||(t.exports=i)},1540:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(248)],void 0===(i=function(t,e,o,n,i){"use strict";return n=o.__importDefault(n),i=o.__importDefault(i),{getSectionPagesDataList:(t,e)=>n.default.filter(e,n.default.partial(i.default.isBlogSectionPage,t)),getSpecialPagesDataList:(t,e)=>n.default.filter(e,i.default.isBlogSpecialPage)}}.apply(e,n))||(t.exports=i)},1541:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(3),o(18),o(4),o(22),o(2),o(24),o(6),o(5)],void 0===(i=function(t,e,o,n,i,r,a,s,u,c,l,p){"use strict";n=o.__importDefault(n),i=o.__importDefault(i),r=o.__importDefault(r),a=o.__importDefault(a),s=o.__importDefault(s),u=o.__importStar(u),c=o.__importStar(c),l=o.__importDefault(l),p=o.__importDefault(p);const{measuring:d}=c.hoc;return d(p.default({displayName:"toolbarPositioning",propTypes:{children:a.default.func.isRequired,isCustomPosition:a.default.bool,isHidden:a.default.bool,initialPos:a.default.object.isRequired,dragRightLimit:a.default.number.isRequired,lastCustomXPosition:a.default.number,className:a.default.string,reportMeasurements:a.default.func.isRequired,measurements:a.default.shape({shouldCompSlideRight:a.default.bool,dragLimits:a.default.shape({x:a.default.arrayOf(a.default.number),y:a.default.arrayOf(a.default.number)}),position:a.default.shape({left:a.default.number,top:a.default.number})}),stageLayout:a.default.object},getDefaultProps:()=>({dragRightLimit:0,initialPos:{right:0,top:0},lastCustomXPosition:null}),componentDidMount(){this.measureComp()},componentDidUpdate(){this.measureComp()},fitPositionToScreen(t){const e=r.default.findDOMNode(this).getBoundingClientRect(),o=e.top,n=this.props.lastCustomXPosition||e.left,i=t.x[1]-e.width;return{left:u.math.ensureWithinLimits(n,t.x[0],i),top:u.math.ensureWithinLimits(o,t.y[0],t.y[1])}},getDragLimits(){const t=this.props.stageLayout,e=l.default.PANELS.PANEL_SIZE_TO_KEEP_IN_VIEW,o=r.default.findDOMNode(this).clientHeight;return{x:[t.left+this.props.dragRightLimit,t.right-this.props.dragRightLimit],y:[t.top+this.props.dragRightLimit,t.bottom+o-e]}},getComponentPosition(t){return this.props.isCustomPosition?this.fitPositionToScreen(t):this.props.initialPos},measureComp(){if(this.props.isHidden)this.props.reportMeasurements(this.props.measurements);else{const t=this.getDragLimits();this.props.reportMeasurements({shouldCompSlideRight:this.shouldSlideRight(),dragLimits:t,position:this.getComponentPosition(t)})}},shouldSlideRight(){const t=s.default(r.default.findDOMNode(this));return t.offset().left+t.width()/2>s.default(window).width()/2},getClassNames(){const t=this.props.measurements.shouldCompSlideRight,e={"hide-tools":this.props.isHidden,"show-tools":!this.props.isHidden,"slide-right":t,"slide-left":!t};return n.default(e).keys().filter(t=>e[t]).join(" ").concat(" ".concat(this.props.className))},render(){let t={},e={};n.default.isEmpty(this.props.measurements)||(t=this.props.measurements.position,e=this.props.measurements.dragLimits);const o=this.getClassNames();return i.default.createElement("div",{style:t,className:o},this.props.children(e))}}))}.apply(e,n))||(t.exports=i)},1542:function(t,e,o){var n,i;n=[o,e,o(0),o(2)],void 0===(i=function(t,e,o,n){"use strict";n=o.__importStar(n);return{generateDuplicatedTitle:function(t){const e=new RegExp(/copy\s(\d+\s|)of\s/i);let o;return e.test(t)?(o=RegExp.$1?parseInt(RegExp.$1,10)+1:2,t.replace(e,"Copy ".concat(o," of "))):((t="".concat(n.translate("Pages_Actions_Duplicate_CopyOf")," ").concat(t)).length>40&&(t="".concat(t.substr(0,37),"...")),t)},convertPageNameToUrl:function(t){const e=t.replace(/\s/g,"-");return n.validate.byInvalidCharacters(n.validationExpressions.invalidUrlCharacters)(e)?e.toLowerCase():"blank"}}}.apply(e,n))||(t.exports=i)},1543:function(t,e,o){var n,i;n=[o,e,o(0),o(247),o(1544)],void 0===(i=function(t,e,o,n,i){"use strict";function r(t){let{popoverLayout:e,popoverProps:o}=t;return{type:"Container",components:[{type:"Container",componentType:"wysiwyg.viewer.components.MediaContainer",components:i.default.POPOVER_DEFAULT_COMPONENTS,modes:{overrides:[{modeIds:[i.default.POPOVER_OPENED_MODE_DEFINITION.modeId],isHiddenByModes:!1}],isHiddenByModes:!0},skin:"wysiwyg.viewer.skins.mediaContainer.DefaultMediaContainer",layout:{width:e.width,height:e.height,x:0,y:0},design:{type:"MediaContainerDesignData",background:{type:"BackgroundMedia",color:"{color_1}"},cssStyle:{cssBorder:{width:{top:{value:1,unit:"px"},right:{value:1,unit:"px"},bottom:{value:1,unit:"px"},left:{value:1,unit:"px"}},style:{top:"solid",right:"solid",left:"solid",bottom:"solid"},color:{top:{red:232,green:232,blue:232,alpha:1},right:{red:232,green:232,blue:232,alpha:1},left:{red:232,green:232,blue:232,alpha:1},bottom:{red:232,green:232,blue:232,alpha:1}}},cssBoxShadow:[{inset:!1,offsetX:{value:0,unit:"px"},offsetY:{value:3,unit:"px"},blurRadius:{value:14,unit:"px"},spreadRadius:{value:1,unit:"px"},color:{red:0,green:0,blue:0,alpha:.06}}]}}}],modes:{definitions:[i.default.POPOVER_OPENED_MODE_DEFINITION],overrides:[],isHiddenByModes:!1},skin:"wysiwyg.viewer.skins.popover.PopoverSkin",layout:Object.assign({},e),componentType:"wysiwyg.viewer.components.Popover",props:Object.assign({type:"PopoverProperties"},o),style:"pop1",mobileStructure:{type:"Container",modes:{definitions:[i.default.POPOVER_OPENED_MODE_DEFINITION]},skin:"wysiwyg.viewer.skins.popover.PopoverSkin",layout:{width:251,height:113,x:34,y:10},componentType:"wysiwyg.viewer.components.Popover",props:Object.assign({type:"PopoverProperties"},i.default.POPOVER_DEFAULT_MOBILE_PROPS),style:"pop1"},activeModes:{}}}return n=o.__importDefault(n),i=o.__importDefault(i),{getPopoverDefaultDefinition:function(){return r({popoverLayout:i.default.POPOVER_DEFAULT_LAYOUT,popoverProps:i.default.POPOVER_DEFAULT_PROPS})},addConnectedPopover:function(t,e){let{triggerRef:o}=e;const a=n.default.getPopoverContainerForTrigger(t.dsRead,o),s=function(t,e){let{triggerRef:o}=e;const n=t.components.layout.getRelativeToStructure(o);return Object.assign({},i.default.POPOVER_DEFAULT_PROPS,{position:n.bounding.y>=180?"top":"bottom"})}(t,{triggerRef:o}),u=r({popoverProps:s,popoverLayout:function(t,e){let{triggerRef:o,popoverContainerRef:r,popoverProps:a}=e;return n.default.calculatePopoverLayoutRelativeToContainer(t.dsRead,{triggerRef:o,popoverContainerRef:r,popoverProps:a,popoverWidth:i.default.POPOVER_DEFAULT_LAYOUT.width,popoverHeight:i.default.POPOVER_DEFAULT_LAYOUT.height})}(t,{triggerRef:o,popoverContainerRef:a,popoverProps:s})}),c=t.components.add(a,u);return t.dsActions.behaviors.update(o,{name:"mouseenter",type:"comp"},c,{name:"handleTriggerMouseEnter",type:"comp"}),c}}}.apply(e,n))||(t.exports=i)},1544:function(t,e,o){var n;void 0===(n=function(t,e){"use strict";return{POPOVER_DEFAULT_LAYOUT:{x:60,y:60,width:264,height:92},POPOVER_DEFAULT_PROPS:{position:"top",alignment:"center",horizontalOffset:0,verticalOffset:8,closeMethod:"mouseOut"},POPOVER_DEFAULT_MOBILE_PROPS:{position:"top",alignment:"center",horizontalOffset:0,verticalOffset:0,closeMethod:"outerClick"},POPOVER_DEFAULT_COMPONENTS:[{componentType:"wysiwyg.viewer.components.WRichText",skin:"wysiwyg.viewer.skins.WRichTextNewSkin",layout:{width:232,height:60,x:16,y:16},data:{type:"StyledText",text:'<p class="font_9" style="line-height: 1.43em;"><span class="color_15">Popovers float over page content and hold supporting information or user controls.</span></p>',stylesMapId:"CK_EDITOR_PARAGRAPH_STYLES"}}],POPOVER_OPENED_MODE_DEFINITION:{type:"POPOVER",modeId:"comp-jjpmg1d4-mode-jjpmg1dy",label:"MODE_LABEL_FROM_PRESET",params:""}}}.apply(e,[o,e]))||(t.exports=n)},17:function(t,e){t.exports=p},18:function(t,e){t.exports=d},2:function(t,e){t.exports=o},22:function(t,e){t.exports=f},24:function(t,e){t.exports=g},245:function(t,e,o){var n,i;n=[o,e,o(0),o(1493),o(1494),o(1495)],void 0===(i=function(t,e,o,n,i,r){"use strict";return n=o.__importDefault(n),i=o.__importDefault(i),r=o.__importDefault(r),{Image:n.default,VectorImage:i.default,WixVideo:r.default}}.apply(e,n))||(t.exports=i)},246:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(428)],void 0===(i=function(t,e,o,n,i){"use strict";function r(t){return t.position.top}function a(t){return t.position.bottom-t.position.top}function s(t,e,o){n.default.forEach(e,(function(e){const n=t.components.layout.get(e);t.components.layout.update(e,{y:n.y+o},!0)}))}function u(t,e){const o=n.default.clone(t.position),i=n.default.clone(e.position),r=a(t),s=a(e),u=r-s;t.position.top=i.top-u,t.position.bottom=t.position.top+r,e.position.top=o.top,e.position.bottom=e.position.top+s}function c(t,e,o){const i=n.default.findIndex(t,e),r=n.default.findIndex(t,o);t[i]=o,t[r]=e}function l(t,e,o){e.position.top+=o,e.position.bottom+=o,e.comps&&s(t,e.comps,o)}return n=o.__importDefault(n),i=o.__importDefault(i),{addSectionByPosition(t,e){const o=n.default.findIndex(t,(function(t){return t.position.top>e.position.top}));return o?t.splice(o,0,e):t.push(e),t},getSectionSizeForBI:function(t){return t>500?"large":t>61?"medium":"small"},getPageSections:function(t,e){if(e=e||t.pages.getFocusedPage(),t.dsRead.pages.isWidgetPage(e.id))return[];let o=i.default.analyzeContainer(t,e);const r=t.components.layout.getRelativeToScreen(e);return n.default.forEach(o,(function(t){t.position.top+=r.y,t.position.bottom+=r.y})),t.isMobileEditor()?(o=n.default.union(function(t,e){const o=t.dsRead.siteSegments.getSiteStructure(e),r=n.default.filter(t.dsRead.components.get.byType("wysiwyg.viewer.components.SiteRegionContainer",o)||[],t.dsRead.components.is.exist);if(!r.length)return[];const a=i.default.getSortedComponentsWithLayout(t,r);return n.default.map(a,(function(t){return{position:{top:t.layout.y,bottom:t.layout.bottomY},comps:[t.comp],isStaticSection:!0}}))}(t,"MOBILE"),o),n.default.sortBy(o,"position.top")):o},getHeaderSection:function(t){const e=t.components.layout.getRelativeToScreen(t.dsRead.siteSegments.getHeader());return{position:{top:e.y,bottom:e.height}}},duplicateSection:function(t,e,o){const n=e[o],i=t.components.layout.getRelativeToStructure(n.comps),r=a(n);for(let n=o+1;n<e.length;n++)l(t,e[n],r);const s=t.copyPaste.duplicate(n.comps);t.dsActions.waitForChangesApplied((function(){t.components.layout.updateRelativeToStructure(s,{x:i.x,y:n.position.bottom})}))},deleteSection:function(t,e,o){const n=e[o],i=a(n);for(let n=o+1;n<e.length;n++)l(t,e[n],-1*i);return t.components.remove(n.comps)},shiftSection:l,switchSectionsByDrag:function(t,e,o,n){let i,a;o.position.top<n.position.top?(i=o,a=n):(i=n,a=o);const l=r(i),p=r(a);u(i,a),c(e,i,a),s(t,n.comps,n===a?r(a)-p:r(i)-l)},switchSections:function(t,e,o,n){const i=r(o),a=r(n);u(o,n),c(e,o,n),s(t,n.comps,r(n)-a),s(t,o.comps,r(o)-i)},isAtSectionsSwitchPoint:function(t,e,o){const n=a(e),i=e.position.top+n/2;return 1===o?t.y+t.height>=i:t.y<=i}}}.apply(e,n))||(t.exports=i)},247:function(t,e,o){var n,i;n=[o,e,o(0),o(1)],void 0===(i=function(t,e,o,n){"use strict";n=o.__importDefault(n);const i="top",r="bottom",a="left",s="right",u="start",c="center",l="end";function p(t,e){return"wysiwyg.viewer.components.Popover"===t.components.getType(e)}function d(t,e){const o=t.behaviors.get(e);if(!o||0===o.length)return null;const i=o.find(e=>e.behavior&&p(t,t.components.get.byId(e.behavior.targetId))),r=n.default.get(i,"behavior.targetId");return r?t.components.get.byId(r):null}function f(t,e){const o=t.components.getPage(e);return t.components.getAllComponents(o.id).find(o=>t.behaviors.get(o).some(t=>n.default.get(t,"behavior.targetId")===e.id))}function g(t,e){return!!f(t,e)}function m(t){let{triggerBounding:e,popoverProps:o,popoverWidth:n,popoverHeight:p}=t;const d=o.verticalOffset||0,f=o.horizontalOffset||0;let g,m;switch(o.position){case i:m=e.y-p-d;break;case r:m=e.y+e.height+d;break;case a:case s:const t=e.height-p;let n;switch(o.alignment){case u:n=d;break;case c:n=Math.round(t/2)+d;break;case l:n=t-d}m=e.y+n}switch(o.position){case i:case r:const t=e.width-n;let p;switch(o.alignment){case u:p=f;break;case c:p=Math.round(t/2)+f;break;case l:p=t-f}g=e.x+p;break;case a:g=e.x-n-f;break;case s:g=e.x+e.width+f}return{x:g,y:m}}function h(t,e){let{triggerRef:o,popoverContainerRef:n,popoverProps:i,popoverWidth:r,popoverHeight:a}=e;const s=function(t,e){let{triggerRef:o,popoverContainerRef:n,popoverProps:i,popoverWidth:r,popoverHeight:a}=e;const{bounding:s}=t.components.layout.getRelativeToStructure(o),{bounding:u}=t.components.layout.getRelativeToStructure(n),c=m({triggerBounding:s,popoverProps:i,popoverWidth:r,popoverHeight:a});return{x:c.x-u.x,y:c.y-u.y}}(t,{triggerRef:o,popoverContainerRef:n,popoverProps:i,popoverWidth:r,popoverHeight:a});return{x:s.x,y:s.y,width:r,height:a}}function y(t,e){return t.components.isShowOnAllPages(e)?t.components.isDescendantOfComp(e,t.siteSegments.getFooter())?t.siteSegments.getFooter():t.siteSegments.getSiteStructure():t.components.getPage(e)}function _(t,e){const[o]=t.components.modes.getModesByType(e,"POPOVER");return o}return{isPopover:p,isPopoverWithConnectedComponent:function(t,e){return p(t,e)&&g(t,e)},getConnectedPopover:d,hasConnectedPopover:function(t,e){return!!d(t,e)},getComponentConnectedToPopover:f,hasComponentConnectedToPopover:g,calculatePopoverPosition:m,calculatePopoverLayoutRelativeToContainer:h,getPopoverContainerForTrigger:y,isPopoverOpened:function(t,e){const o=_(t.dsRead,e);return!0===t.dsRead.components.modes.getComponentActiveModeIds(e)[o.modeId]},openPopover:(t,e)=>{const o=_(t.dsRead,e);t.dsActions.components.modes.activateComponentMode(e,o.modeId)},closePopover:(t,e)=>{const o=_(t.dsRead,e);t.dsActions.components.modes.deactivateComponentMode(e,o.modeId)},updatePopoverContainerAndPosition:(t,e)=>{let{triggerRef:o,popoverRef:n}=e;const i=t.components.properties.get(n),r=t.components.layout.get(n),a=y(t.dsRead,o);t.components.setContainer(n,a,!0),t.components.layout.update(n,h(t.dsRead,{triggerRef:o,popoverContainerRef:a,popoverProps:i,popoverWidth:r.width,popoverHeight:r.height}))}}}.apply(e,n))||(t.exports=i)},248:function(t,e,o){var n,i;n=[o,e,o(0),o(151)],void 0===(i=function(t,e,o,n){"use strict";n=o.__importDefault(n);const i={isBlog:function(t,e){return!!e.appInnerID&&"blog"===t.dsRead.wixapps.classics.getPackageName(e.appInnerID)},isBlogPage:function(t,e){return"14bcded7-0066-7c35-14d7-466cb3f09103"===function(t,e){if(n.default.isTPA(e)){const o=t.dsRead.tpa.section.getPageData(e.id).appData;return o&&o.appDefinitionId}}(t,e)},isBlogSpecialPage:function(t){return"7326bfbb-4b10-4a8e-84c1-73f776051e10"===t.appPageId},isBlogSectionPage:function(t,e){return i.isBlog(t,e)&&!i.isBlogSpecialPage(e)}};return i}.apply(e,n))||(t.exports=i)},29:function(t,e){t.exports=m},3:function(t,e){t.exports=n},38:function(t,e){t.exports=h},4:function(t,e){t.exports=i},416:function(t,e,o){var n,i;n=[o,e,o(0),o(1490),o(1491),o(1492),o(1496),o(1497),o(1498),o(1499),o(1500),o(1501),o(1502),o(1503),o(1504),o(1505),o(1506),o(1507),o(1508)],void 0===(i=function(t,e,o,n,i,r,a,s,u,c,l,p,d,f,g,m,h,y,_){"use strict";return n=o.__importDefault(n),i=o.__importDefault(i),r=o.__importDefault(r),a=o.__importDefault(a),s=o.__importDefault(s),u=o.__importDefault(u),c=o.__importDefault(c),l=o.__importDefault(l),p=o.__importDefault(p),d=o.__importDefault(d),f=o.__importDefault(f),g=o.__importDefault(g),m=o.__importDefault(m),h=o.__importDefault(h),y=o.__importDefault(y),_=o.__importDefault(_),{before:{"mobile.core.components.Page":n.default,"wysiwyg.common.components.anchor.viewer.Anchor":i.default,"wysiwyg.viewer.components.documentmedia.DocumentMedia":r.default,"wysiwyg.viewer.components.AudioPlayer":a.default,"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer":s.default,"wysiwyg.viewer.components.ClipArt":c.default,"wysiwyg.viewer.components.ContactForm":u.default,"wysiwyg.viewer.components.DynamicContactForm":u.default,"wysiwyg.viewer.components.svgshape.SvgShape":l.default,"wysiwyg.viewer.components.WPhoto":p.default,"wysiwyg.viewer.components.StripContainer":f.default,"wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu":d.default,"wysiwyg.viewer.components.WTwitterTweet":_.default,"wysiwyg.viewer.components.VectorImage":m.default},after:{"platform.components.AppController":g.default,"wysiwyg.viewer.components.VectorImage":h.default,"wysiwyg.viewer.components.Popover":y.default}}}.apply(e,n))||(t.exports=i)},417:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(245)],void 0===(i=function(t,e,o,n,i){"use strict";return n=o.__importDefault(n),i=o.__importDefault(i),function(t,e,o,r,a,s,u,c){n.default.forEach(c,(function(a,c){let l,p,d;c>0?(d=t.dsRead.pages.getFocusedPageId(),p=t.pasteLogic.addContext.getPastePosition(t,r.layout,d),l=c>0?n.default.merge({},r,{layout:p}):r):l=r;const f=u(l,a),g=f.data&&f.data.type;i.default[g]&&(f.data=i.default[g](f.data));const m=e(o,f);s&&t.dsActions.waitForChangesApplied((function(){s(m)}))}))}}.apply(e,n))||(t.exports=i)},418:function(t,e,o){var n,i;n=[o,e,o(0),o(417),o(2)],void 0===(i=function(t,e,o,n,i){"use strict";n=o.__importDefault(n),i=o.__importStar(i);return{handleAudioAdd(t,e,o,r,a,s,u){if(r.data.uri)return!1;const c=t.mediaServices;return c.mediaManager.open(c.mediaManager.categories.MUSIC,"music_player",{callback(i){n.default(t,e,o,r,a,s,u,i),c.setFocusToEditor()},translation:{submitButton:i.translate("MMGR_submitbutton_addpanel_mytracks_add")}}),!0}}}.apply(e,n))||(t.exports=i)},419:function(t,e,o){var n,i;n=[o,e,o(0),o(1)],void 0===(i=function(t,e,o,n){"use strict";return n=o.__importDefault(n),{updateDataWithDefaults:function(t,e){const o=t.toEmailAddress,i=e.dsRead.generalInfo.getUserInfo().email;var r;o||(r=i,n.default.endsWith(r,"@wix.com"))||(t.toEmailAddress=i)}}}.apply(e,n))||(t.exports=i)},420:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(22),o(2),o(6),o(12),o(421),o(422),o(7),o(423),o(425)],void 0===(i=function(t,e,o,n,i,r,a,s,u,c,l,p,d){"use strict";n=o.__importDefault(n),i=o.__importDefault(i),r=o.__importStar(r),a=o.__importDefault(a),s=o.__importStar(s),u=o.__importDefault(u),c=o.__importDefault(c),l=o.__importDefault(l),p=o.__importDefault(p),d=o.__importDefault(d);const{translateToViewerCoordinates:f,getPreviewPosition:g,getStageLayout:m,getSiteScale:h}=l.default.editorPlugins.domMeasurements.selectors,y={top:!0,bottom:!0,left:!0,right:!0,centerX:!0,centerY:!0},_={top:!0,bottom:!0,left:!1,right:!1,centerX:!1,centerY:!0};function P(t,e,o,i){n.default.assign(o.structure.layout,e);const u=function(e){if(!n.default.isEmpty(t.components.modes.getModes(i))&&e.id){const o=t.components.modes.getComponentActiveModeIds(i);t.components.modes.showComponentOnlyInModesCombination(e,n.default.keys(o)),t.tabIndicationState.activateAddAnimation(!0),t.components.modes.addDefaultSingleModeAnimations(e)}"Page"!==o.structure.type&&t.history.add("component dragged to stage from add panel");const u=t.components.getType(i),c=t.components.is.repeatedComponent(i),{props:l}=o.structure;if(t.selection.selectComponentByCompRef(e),t.openFirstTimePanel(e),t.bi.event(s.events.addPanel.COMPONENT_ADDED_TO_STAGE,n.default.assign({origin:o.dragOrigin||"add_panel",category:o.categoryId,section:o.sectionTitle,component_type:o.structure.componentType,component_id:e.id,preset_id:o.itemId||"",adding_method:"drag",preset_data_skin:o.structure.style.skin||o.structure.skin||o.structure.style,preset_data_tags:o.tags||"",page_id:t.pages.getFocusedPage()&&t.pages.getFocusedPage().id,target_component:u,is_target_repeated:c},d.default(l),o.appDefinitionId?{app_id:o.appDefinitionId}:{})),t.openCompOutOfGridPanelIfNeeded(e),o.appDefinitionId){const n=t.dsRead.platform.getAppDataByAppDefId(o.appDefinitionId);n&&n.applicationId&&t.dsActions.platform.notifyApplication(n.applicationId,{eventType:a.default.EVENTS.ADD_PANEL.COMPONENT_ADDED_TO_STAGE,eventPayload:{compRef:e,appDefinitionId:o.appDefinitionId}})}r.fedopsLogger.interactionEnded(r.fedopsLogger.INTERACTIONS.ADD_COMP_FROM_ADD_PANEL)};o.appDefinitionId?t.tpa.installAppIfNeeded(o.appDefinitionId).then(()=>{t.components.add(i,o.structure,void 0,u)}):t.components.add(i,o.structure,void 0,u)}function S(t){const e=l.default.editorPlugins.selection.selectors.getFocusedContainer(t.store.getState());return t.components.is.spotlightStageContainer(e)?e:null}function x(t,e,o,n,i,r,a){if(!t)return;const s=t.store.getState();this.editorAPI=t,this.initialEvent=e,this.item=o,this.panelElm=n,this.dragBoxClass=i,this.onItemDragStart=r,this.onItemDragEnd=a,this.ignoreTouchingGridLines=t.dsRead.pages.isWidgetPage(t.pages.getFocusedPageId()),this.isFirstDragEvent=!0,this.originalDragPosition={x:this.initialEvent.pageX,y:this.initialEvent.pageY},this.item.onDrop=this.item.onDrop||P.bind(null,this.editorAPI),this.stageLayout=m(s),this.editorAPI.components.is.fullWidthByStructure(this.item.structure)?(this.isFullWidth=!0,this.allowedSnapDirections=_):(this.allowedSnapDirections=y,this.isFullWidth=!1),this.init()}return x.prototype={init(){const t=S(this.editorAPI);this.snapToHandler=new p.default(this.editorAPI),this.attachHandler=new u.default(this.editorAPI,{comp:this.item.structure,layout:n.default.pick(this.item.structure.layout,["width","height"])},u.default.TYPES.STRUCTURE,t?{scopeRef:t}:{})},getFixedDragPosition:t=>({x:t.clientX,y:t.clientY}),onDrag(t){const e=this.editorAPI.store.getState(),o=f(e,t);if(this.isFirstDragEvent){if(!function(t,e){return Math.abs(e.x-t.pageX)>=8||Math.abs(e.y-t.pageY)>=8}(o,this.originalDragPosition))return;r.fedopsLogger.interactionStarted(r.fedopsLogger.INTERACTIONS.ADD_COMP_FROM_ADD_PANEL),this.onInitialDrag(),this.isFirstDragEvent=!1}this.lastDragPosition={x:o.pageX,y:o.pageY},this.lastDragFixedPosition=this.getFixedDragPosition(t);const n=this.isInPanelArea();n?this.handleDragInPanelArea():this.handleDragOutsidePanelArea(t),this.setDragBox(n)},onInitialDrag(){n.default.isFunction(this.onItemDragStart)&&this.onItemDragStart()},isInPanelArea(){const t=this.getPanelClientRect();return this.lastDragFixedPosition.x>=t.left&&this.lastDragFixedPosition.x<=t.right&&this.lastDragFixedPosition.y>=t.top&&this.lastDragFixedPosition.y<=t.bottom},getPanelClientRect(){return this._panelClientRect||(this._panelClientRect=this.panelElm.getBoundingClientRect()),this._panelClientRect},handleDragOutsidePanelArea(){const t=this.getDragBoxStageLayout(),e=this.getDragBoxStageLayout(!0);if("popup"!==this.item.categoryId){this.snapDragBoxToCompIfNeeded(t);const{candidateRef:o,candidateStatus:n}=this.attachHandler.getCurrentAttachCandidate(e);n===u.default.ATTACH_CANDIDATE_STATUSES.VALID&&this.attachHandler.highlightAttachCandidate(o)}},handleDragInPanelArea(){this.editorAPI.snapData.clear(!0),this.attachHandler.clearHighlightAttachCandidate(!0)},getDragBoxStageLayout(t){const e={x:this.lastDragPosition.x+this.getBoxOffset().left*this.item.structure.layout.width,y:this.lastDragPosition.y+this.getBoxOffset().top*this.item.structure.layout.height,width:this.item.structure.layout.width,height:this.item.structure.layout.height};if(t){const t=this.editorAPI.ui.scroll.getScroll();e.x-=t.scrollLeft,e.y-=t.scrollTop}return e},getBoxOffset(){if(!this._boxOffset){const t=this.getRectSize();this._boxOffset={left:(this.item.rect.left+i.default(window).scrollLeft()-this.originalDragPosition.x)/t.width,top:(this.item.rect.top+i.default(window).scrollTop()-this.originalDragPosition.y)/t.height}}return this._boxOffset},getRectSize(){return{width:this.item.rect.width,height:this.item.rect.height}},setDragBox(t){const e=this.editorAPI.store.getState(),o=h(e);let i={key:"dragToStageDragBox",coords:{left:this.lastDragFixedPosition.x,top:this.lastDragFixedPosition.y},boxOffset:this.getBoxOffset()};if(t)i.boxSize=this.getRectSize();else if("popup"===this.item.categoryId)i=function(t,e,o){const i=e.structure.components[0],r=i.layout,a=i.props.alignmentType,s=i.props.verticalAlignment,u=i.props.horizontalAlignment,c={fullHeight:()=>({left:"left"===u?o.left:o.right-r.width,top:o.top,height:o.height,width:r.width}),fullWidth:()=>({left:o.left,top:"bottom"===s?o.bottom-r.height:o.top,height:r.height,width:o.width}),nineGrid:()=>({left:(o.width-r.width)/2,top:(o.height-r.height)/2,height:r.height,width:r.width})}[a]();return t.coords=n.default.pick(c,["left","top"]),t.boxSize=n.default.pick(c,["height","width"]),t.boxOffset={left:0,top:0},t}(i,this.item,this.stageLayout),i.boxSize.height*=o;else if(i.boxSize=n.default.pick(this.item.structure.layout,["width","height"]),i.boxSize.height*=o,this.isFullWidth){const t=g(e);i=function(t,e,o){return t.boxOffset=n.default.assign({},t.boxOffset,{left:0}),t.coords.left=o.left,e&&(t.boxSize.width=e),t}(i,this.stageLayout.width,t)}const r={props:i,componentType:this.item.structure.componentType,reactClass:this.dragBoxClass};this.editorAPI.setPortalChildren("addPanel",[r])},snapDragBoxToCompIfNeeded(t){const e=this.snapToHandler.getClosestLayoutDistance(this.editorAPI,t,this.allowedSnapDirections);Math.abs(e.x)<=5&&(this.lastDragPosition.x+=e.x,this.lastDragFixedPosition.x+=e.x,t.x+=e.x),Math.abs(e.y)<=5&&(this.lastDragPosition.y+=e.y,this.lastDragFixedPosition.y+=e.y,t.y+=e.y);const o=this.snapToHandler.getSnapData(t,this.allowedSnapDirections,this.ignoreTouchingGridLines);this.editorAPI.snapData.set(o,!0)},clearDrag(){this.editorAPI.snapData.clear(!0),this.attachHandler.clearHighlightAttachCandidate(!0)},endDrag(t){if(this.clearDrag(),this.editorAPI.setPortalChildren("addPanel",null),this.isFirstDragEvent)return!1;const e=this.editorAPI.store.getState(),o=f(e,t);return this.lastDragPosition={x:o.pageX,y:o.pageY},this.isInPanelArea()?r.fedopsLogger.interactionEnded(r.fedopsLogger.INTERACTIONS.ADD_COMP_FROM_ADD_PANEL):this.onDrop(t),this.onItemDragEnd&&this.onItemDragEnd(),!0},getCompPositionRelativeToContainer(t,e){return{x:this.lastDragPosition.x-t.x-e.x+this.getBoxOffset().left*this.item.structure.layout.width,y:this.lastDragPosition.y-t.y-e.y+this.getBoxOffset().top*this.item.structure.layout.height}},getCompPositionRelativeToDockedNotFixedContainer(t){return{x:this.lastDragPosition.x-t.x+this.getBoxOffset().left*this.item.structure.layout.width,y:this.lastDragPosition.y-t.y+this.getBoxOffset().top*this.item.structure.layout.height}},getDropArguments(){const{editorAPI:t}=this,e=t.pluginService.getAllPluginsOfType(t.pluginService.pluginConstants.ADD_PANEL_DROP),o=n.default.find(e,e=>n.default.invoke(e,"condition",t));if(o)return o.getOverrides(t,this);const i=this.getDragBoxStageLayout(!0),r=this.getDropContainer(i);if(!r)return{dropContainer:null,compPosRelativeToContainer:null};const a=t.components.layout.getRelativeToStructure(r);if(function(t,e){const o=t.components.is.repeaterItem(e)?e:t.components.getAncestorRepeaterItem(e);if(!o)return!1;const n=t.components.getContainer(o);return t.components.layout.isHorizontallyStretchedToScreen(n)}(t,r))return{dropContainer:r,compPosRelativeToContainer:this.getCompPositionRelativeToDockedNotFixedContainer(a)};const s=this.getCompPositionRelativeToContainer(function(t){const e=t.dsRead.siteSegments.getPagesContainer();return{x:t.components.layout.getRelativeToScreen(e).x,y:0}}(t),a);if(S(t)){if(s.x+i.width<0||a.width<s.x||s.y+i.height<0||a.height<s.y)return{dropContainer:r,compPosRelativeToContainer:{x:(a.width-i.width)/2,y:(a.height-i.height)/2}}}return{dropContainer:r,compPosRelativeToContainer:s}},onDrop(){const{dropContainer:t,compPosRelativeToContainer:e,prerequisiteFunc:o}=this.getDropArguments();t&&(n.default.isFunction(o)&&o(),this.item.onDrop&&(n.default.defer(function(){this.item.onDrop(e,this.item,t,this.editorAPI)}.bind(this)),c.default.storePath(this.editorAPI,c.default.getIdByDataType(this.item.structure),n.default.get(this.item,["mediaManager","path"]))))},getDropContainer(t){const{candidateRef:e,candidateStatus:o}=this.attachHandler.getCurrentAttachCandidate(t);return o===u.default.ATTACH_CANDIDATE_STATUSES.INVALID?null:e}},x}.apply(e,n))||(t.exports=i)},421:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(7)],void 0===(i=function(t,e,o,n,i){"use strict";n=o.__importDefault(n),i=o.__importDefault(i);const r={COMP:"comp",STRUCTURE:"structure"},a={SAME:"same",VALID:"valid",INVALID:"invalid"},s={comp:{getContainer:(t,e)=>t.components.getContainer(e),isContainable:(t,e,o)=>t.components.is.containable(e,o)&&!t.components.is.group(o),canReparent:(t,e)=>t.components.is.canReparent(e),getCompLayout:(t,e)=>t.components.layout.getRelativeToScreenConsideringScroll(e).bounding,getCompType:(t,e)=>t.components.getType(e),isShowOnAllPages:(t,e)=>t.components.isShowOnAllPages(e)},structure:{getCompType:()=>"",getContainer:()=>({}),isContainable:(t,e,o)=>t.components.is.containableByStructure(e,o)&&!t.components.is.group(o),canReparent:()=>!0,isShowOnAllPages:()=>!1}};function u(t,e){return t.components.layout.getRelativeToScreenConsideringScroll(e)}function c(t){return t.isMobileEditor()}function l(t,e){const o=t.dsRead.siteSegments.getFooter();return n.default.filter(e,(function(e){const n=t.components.isDescendantOfComp(e,o);return!t.utils.isSameRef(e,o)&&!n}))}function p(t,e){const o=t.siteSegments.getSiteStructure();return t.utils.isSameRef(t.components.getContainer(e),o)}function d(t){const e=i.default.editorPlugins.selection.selectors.getFocusedContainer(t.store.getState());return"wysiwyg.viewer.components.MenuContainer"===t.components.getType(e)}function f(t,e,o){let{scopeRef:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=t.dsRead.siteSegments.getHeader(),f=t.dsRead.pages.getFocusedPageId();let g=t.components.getAllComponents(f);c(t,e.comp)&&(g=g.concat(t.dsRead.siteSegments.getSiteStructure()));const m=o===r.COMP;return m&&(!t.components.isShowOnAllPages(e.comp)||t.siteSegments.isUsingSectionsLayout()&&p(t,e.comp))&&(g=l(t,g)),n.default(g).filter((function(n){return!t.utils.isSameRef(n,e.comp)&&s[o].isContainable(t,e.comp,n)})).filter((function(e){return t.components.isRenderedOnSite(e)})).filter((function(e){return!i||(t.components.isDescendantOfComp(e,i)||t.utils.isSameRef(e,i))})).filter((function(e){return!d(t)||!t.utils.isSiteSegment(e)})).map((function(e){return{layout:u(t,e),comp:e}})).filter((function(o){const n=t.utils.isSameRef(o.comp,a),r=t.utils.isSameRef(o.comp,t.pages.getPrimaryContainer());return i||r||o.layout.width>=e.layout.width&&(n||o.layout.height>=e.layout.height)})).value()}function g(t,e,o,n){const i=t.components.is.fullWidth(e),r=t.utils.isSameRef(e,t.dsRead.siteSegments.getHeader());return(i||o.x>=n.x)&&(i||o.x+o.width<=n.x+n.width)&&(r||o.y>=n.y)&&o.y+o.height<=n.y+n.height}function m(t,e){const o=e.layout,i=e.comp,r=t.layout,a=s[this.type].getContainer(this.editorAPI,this.comp);return!(n.default.isEmpty(a)&&this.editorAPI.utils.isSiteStructure(i))&&!function(t,e,o){return!n.default.isEmpty(e)&&t.utils.isSiteStructure(e)&&t.utils.isPage(o)}(this.editorAPI,a,i)&&!function(t,e,o){return!n.default.isEmpty(e)&&!t.components.isShowOnAllPages(e)&&t.utils.isSiteStructure(o)}(this.editorAPI,a,i)&&!function(t,e,o){return!n.default.isEmpty(e)&&!t.components.isShowOnAllPages(e)&&"wysiwyg.viewer.components.FooterContainer"===t.components.getType(o)}(this.editorAPI,a,i)&&!this.editorAPI.utils.isSameRef(a,i)&&g(this.editorAPI,e.comp,r,o)}function h(t){const e=s[this.type].getContainer(this.editorAPI,this.comp);return!(!n.default.isEmpty(e)&&s[this.type].getCompLayout)||!y(t,s[this.type].getCompLayout(this.editorAPI,e))}function y(t,e){return!(t.x>=e.x+e.width||e.x>=t.x+t.width||t.y>=e.y+e.height||e.y>=t.y+t.height)}function _(t,e){if(!s[this.type].canReparent(this.editorAPI,this.comp))return s[this.type].getContainer(this.editorAPI,this.comp);n.default.has(this,"attachCandidates")||(this.attachCandidates=f(this.editorAPI,this.initialCompWithLayout,this.type,{scopeRef:this.scopeRef}));const o=n.default.find(this.attachCandidates,n.default.bind((function(o){var n,i,r;return o.layout=(n=this.editorAPI,i=o,r=this.comp,n.components.is.repeatedComponent(r)?u(n,i.comp):i.layout),e?g(this.editorAPI,o.comp,t,o.layout):y(t,o.layout)}),this));if(o&&m.call(this,{layout:t},o))return o.comp;if(this.scopeRef&&!o&&!n.default.isEmpty(this.attachCandidates)){const t=n.default.map(this.attachCandidates,"comp"),e=[this.scopeRef];for(;!n.default.isEmpty(e);){const o=e.shift();if(n.default.find(t,t=>this.editorAPI.utils.isSameRef(t,o)))return o;e.push(...this.editorAPI.components.getChildren(o).filter(t=>this.editorAPI.components.is.container(t)))}}return null}function P(t,e,o){let{scopeRef:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t&&(this.editorAPI=t,this.type=o,this.initialCompWithLayout=e,this.comp=e.comp,this.attachCandidates=f(t,e,o,{scopeRef:n}),this.scopeRef=n)}return P.prototype={getCurrentAttachCandidate:function(t,e){const o=t||s[this.type].getCompLayout(this.editorAPI,this.comp),i=h.call(this,o),r=_.call(this,o,i),u=n.default.find(e,n.default.isEqual.bind(n.default,r)),c={candidateRef:null,candidateStatus:a.SAME};return this.editorAPI.utils.isSameRef(s[this.type].getContainer(this.editorAPI,this.comp),r)?(c.candidateRef=r,c.candidateStatus=a.SAME):r&&!u?(c.candidateRef=r,c.candidateStatus=a.VALID):function(t,e,o,n){const i=s[n].getContainer(t,o);return!t.utils.isPage(i)&&(t.isMobileEditor()?e&&!s[n].isShowOnAllPages(t,o):e)}(this.editorAPI,i,this.comp,this.type)&&(c.candidateRef=this.editorAPI.pages.getFocusedPage(),c.candidateStatus=a.VALID),c.candidateRef&&!this.editorAPI.components.is.allowedToContainMoreChildren(c.candidateRef)&&(c.candidateStatus=a.INVALID),c},highlightAttachCandidate:function(t){(t=function(t,e,o){let i;const r=t.dsRead.pages.popupPages.getCurrentPopupId();if(r)if(o){if(o.id===r)return null}else if(i=t.pages.popupPages.getPopupContainer(),n.default.find(e,["comp.id",i.id]))return i;return o}(this.editorAPI,this.attachCandidates,t))&&this.editorAPI.utils.isSiteStructure(t)||this.editorAPI.setAttachCandidate(t,this.type===r.STRUCTURE)},clearHighlightAttachCandidate:function(t){this.editorAPI.setAttachCandidate(null,!!t)}},P.TYPES=r,P.ATTACH_CANDIDATE_STATUSES=a,P}.apply(e,n))||(t.exports=i)},422:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(7)],void 0===(i=function(t,e,o,n,i){"use strict";n=o.__importDefault(n),i=o.__importDefault(i);const{setSessionUserPreferences:r}=i.default.editorPlugins.userPreferences.actions;function a(t){let e=n.default.get(t,"data",n.default.get(t,"design",{}));switch(e.type){case"VectorImage":return e.svgId;case"Image":return e.uri;case"WixVideo":return e=n.default.get(t,"design",{}),e.videoId||"";case"BackgroundMedia":return e=n.default.get(t,"design",{}),a(e.mediaRef)||"";case"MediaPlayerDesignData":return n.default.get(t,"design.background.mediaRef.videoId","");default:return""}}return{getIdByDataType:a,storePath:function(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{path:n,maskPath:i}=o;n&&t.store.dispatch(r("last_media_path_".concat(a(e)),n)),i&&t.store.dispatch(r("last_svg_mask_path_".concat(a(e)),i))}}}.apply(e,n))||(t.exports=i)},423:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(424),o(7),o(2)],void 0===(i=function(t,e,o,n,i,r,a){"use strict";n=o.__importDefault(n),i=o.__importDefault(i),r=o.__importDefault(r),a=o.__importStar(a);const s=["SITE_PAGES","PAGES_CONTAINER"];let u,c;const{getStageRect:l}=r.default.domMeasurements.selectors,{getFocusedContainer:p}=r.default.editorPlugins.selection.selectors,d=n.default.mapKeys(["platform.components.AppController","mobile.core.components.Page","core.components.Page","wysiwyg.viewer.components.FooterContainer","wysiwyg.viewer.components.HeaderContainer","wysiwyg.viewer.components.WSiteStructure"]),f="wysiwyg.viewer.components.WRichText",g=t=>!!d[t];function m(t,e,o,i){return o||n.default.isEqual(i,e)||t.components.isDescendantOfComp(e,i)}function h(t,e,o,i){return e||n.default.isEqual(o,t)||n.default.isEqual(i,t)}function y(t,e,o,n,i,r){const a=h(e,o,n,i);let s=t.components.layout.getRelativeToScreen(e,a).bounding;if(r){const e=t.scroll.get();s={y:s.y+e.scrollTop,x:s.x+e.scrollLeft}}return s}function _(t,e){return e&&t.components.is.page(e)}function P(t,e,o,a){const s=t.dsRead.siteSegments.getHeader(),u=t.dsRead.siteSegments.getFooter();return n.default(e).map((function(e){const o=_(t,e);return{layout:y(t,e,o,s,u,a),isDynamicLayout:m(t,e,o,u),comp:e}})).concat(function(t){const e=t.store.getState(),o=p(e);if(!o||!t.components.is.showMarginsIndicator(o))return[];return n.default(o).thru(i.default.getContainerGridLines.bind(null,t)).map((function(t){return{layout:{x:t.x1,y:t.y1,height:t.y2-t.y1,width:0},isDynamicLayout:!1}})).value()}(t)).filter(t=>o(t.layout)).concat(function(t){if(!r.default.editorPlugins.rulers.selectors.isRulersEnabled(t.store.getState()))return[];let e=function(t){const e=t.store.getState(),o=r.default.editorPlugins.rulers.selectors.getHorizontalGuides(e),i=l(e);return n.default.map(o,(function(t){return{id:t.guideId,x:i.left,y:t.guidePosition,height:0,width:i.right}}))}(t);return e=e.concat(function(t){const e=t.store.getState(),o=r.default.editorPlugins.rulers.selectors.getVerticalGuides(e),i=l(e);return n.default.map(o,(function(e){const o=r.default.editorPlugins.rulers.selectors.getVerticalGuideRealPosition(t.dsRead,e.guidePosition);return{id:e.guideId,x:o,y:i.top,height:i.bottom,width:0}}))}(t)),n.default.map(e,(function(t){return{layout:t,isDynamicLayout:!1}}))}(t)).value()}function S(t,e,o){return!(t.selection.isComponentSelected(o)||!t.components.is.canSnapTo(o)||n.default.includes(s,o.id)||!t.components.isRenderedOnSite(o)||function(t,e,o){return t.components.layout.isRenderedInFixedPosition(o)&&!t.components.isDescendantOfComp(e,o)}(t,e,o)||e&&t.components.isAscendantOfComp(e,o)||t.dsRead.pages.isWidgetPage(o.id)||!function(t,e){const o=p(t.store.getState());return a.spotlightStageUtils.canSelectCompConsideringSpotlightStage(t,o,e)}(t,o))}function x(t,e,o,i){const r=t.dsRead.siteSegments.getHeader(),a=t.dsRead.siteSegments.getFooter(),s=n.default.reduce(o,(function(o,n){const s=n.layout,u=n.comp;return h(u,_(t,u),r,a)||(i.left&&(o.push(s.x-e.x),o.push(s.x+s.width-e.x)),i.right&&(o.push(s.x-(e.x+e.width)),o.push(s.x+s.width-(e.x+e.width)))),i.centerX&&o.push((s.x+(s.x+s.width))/2-(e.x+(e.x+e.width))/2),o}),[]),u=k(t)?[]:function(t,e,o){const n=t.siteSegments.getPagesContainerAbsLayout(),i=[];return o.left&&(i.push(n.x-e.x),i.push(n.x+n.width-e.x)),o.right&&(i.push(n.x-(e.x+e.width)),i.push(n.x+n.width-(e.x+e.width))),i}(t,e,i);return n.default.minBy(s.concat(u),(function(t){return Math.abs(t)}))}function v(t,e,o,i){const r=t.dsRead.siteSegments.getHeader(),a=t.dsRead.siteSegments.getFooter(),s=n.default.reduce(o,(function(o,n){const s=n.layout,u=n.comp;return h(u,_(t,u),r,a)||(i.top&&(o.push(s.y-e.y),o.push(s.y+s.height-e.y)),i.bottom&&(o.push(s.y-(e.y+e.height)),o.push(s.y+s.height-(e.y+e.height)))),i.centerY&&o.push((s.y+(s.y+s.height))/2-(e.y+(e.y+e.height))/2),o}),[]),u=k(t)?[]:function(t,e,o){const n=t.siteSegments.getPagesContainerAbsLayout(),i=[];return o.top&&(i.push(n.y-e.y),i.push(n.y+n.height-e.y)),o.bottom&&(i.push(n.y-(e.y+e.height)),i.push(n.y+n.height-(e.y+e.height))),i}(t,e,i);return n.default.minBy(s.concat(u),(function(t){return Math.abs(t)}))}function D(t,e,o){const i=t.dsRead.siteSegments.getHeader(),r=t.dsRead.siteSegments.getFooter();return n.default.filter(o,(function(o){const n=o.comp,a=_(t,n),s=o.layout;return!h(n,a,i,r)&&(e===s.y||e===s.y+s.height)}))}function w(t,e,o){const i=t.dsRead.siteSegments.getHeader(),r=t.dsRead.siteSegments.getFooter();return n.default.filter(o,(function(o){const n=o.comp,a=_(t,n),s=o.layout;return!h(n,a,i,r)&&(e===s.x||e===s.x+s.width)}))}function C(t,e){return n.default.map(e,(function(e){return n.default(e.layout).pick(["x","y","width","height"]).assign({isOnMasterPage:e.comp&&(t.components.isShowOnAllPages(e.comp)||t.components.isShowOnSomePages(e.comp))}).value()}))}function I(t,e,o,i){const r=(a=i.concat(o),n.default.minBy(a,"x"));var a;const s=function(t){return n.default.maxBy(t,(function(t){return t.x+t.width}))}(i.concat(o));return[{line:[{x:r.x,y:t},{x:s.x+s.width,y:t}],rectanglesDrawData:e}]}function A(t,e,o,i){const r=(a=i.concat(o),n.default.minBy(a,"y"));var a;const s=function(t){return n.default.maxBy(t,(function(t){return t.y+t.height}))}(i.concat(o));return[{line:[{x:t,y:r.y},{x:t,y:s.y+s.height}],rectanglesDrawData:e}]}function T(t,e){t&&(this.editorAPI=t,this.compRefs=e,this.fixedAncestor=t.components.layout.getClosestAncestorRenderedInFixedPosition(e))}function R(t,e,o,i,r){const a=n.default.map(i,"layout"),s=[o].concat(a),c=A(e,C(t,i),r,s);return u&&u.length>0?u.concat(c):c}function b(t,e,o,i,r){const a=n.default.map(i,"layout"),s=[o].concat(a),u=I(e,C(t,i),r,s);return c&&c.length>0?c.concat(u):u}function O(t){return this.fixedAncestor?n.default.assign({},t,{y:t.y+this.editorAPI.scroll.get().scrollTop,x:t.x+this.editorAPI.scroll.get().scrollLeft}):t}function E(){if(this.fixedAncestor)return this.getSnapCandidates();const t=this.editorAPI.store.getState(),e=l(t);return function(t,e){return n.default.filter(t,n.default.partial(a.candidatesUtil.isLayoutVisible,e))}(this.getSnapCandidates(),e)}function L(t,e){const o=function(t){const e=l(t.store.getState()).right;return n.default(t).thru(i.default.getPageGridLines).filter({x2:"100%"}).map((function(t){return{x:t.x1,y:t.y1,width:e}})).value()}(t);return n.default.filter(o,{y:e})}function M(t,e){const o=function(t){const e=l(t.store.getState()).bottom;return n.default(t).thru(i.default.getPageGridLines).filter({y2:"100%"}).map((function(t){return{x:t.x1,y:t.y1,height:e}})).value()}(t);return n.default.filter(o,{x:e})}T.prototype.getSnapCandidates=function(t){if(!n.default.has(this,"snapCandidates")){const e=function(t,e,o){if(o)return n.default([o]).concat(t.components.getChildren(o,!0)).reject(n.default.head(e)).filter(S.bind(null,t,e)).value();const i=t.dsRead.pages.getFocusedPageId();return t.components.getAllComponents(i,S.bind(null,t,e))}(this.editorAPI,this.compRefs,this.fixedAncestor),o=n.default.isFunction(t)?t:()=>!0;this.snapCandidates=P(this.editorAPI,e,o,this.fixedAncestor),n.default.get(this.compRefs,"0")&&a.recommendedMobileHeaderHeightUtils.isMobileHeader(this.compRefs[0])&&this.snapCandidates.push(a.recommendedMobileHeaderHeightUtils.getSnapCandidate(this.editorAPI.ui.stage.getEditingAreaLayout)),this.compRefs=null}return this.snapCandidates},T.prototype.getClosestLayoutDistance=function(t,e,o,i){!function(t,e){n.default.forEach(e,(function(e){e.layout=e.isDynamicLayout?y(t,e.comp):e.layout}))}(t,this.getSnapCandidates(i));const r=O.call(this,e),a=E.call(this);return{x:x(t,r,a,o),y:v(t,r,a,o)}};const N=(t,e)=>({line:[t,e],rectanglesDrawData:[]});function B(t){let{x:e,y:o,height:n,width:i}=t;const r=o+n+5,a=e+i;return[N({x:e,y:r},{x:a,y:r}),N({x:e,y:r-3},{x:e,y:r+3}),N({x:a,y:r-3},{x:a,y:r+3})]}function F(t){let{x:e,y:o,height:n}=t;const i=e-5,r=o+n;return[N({x:i,y:o},{x:i,y:r}),N({x:i-3,y:o},{x:i+3,y:o}),N({x:i-3,y:r},{x:i+3,y:r})]}function k(t){const e=t.store.getState();return t.components.is.spotlightStageContainer(p(e))&&!r.default.spotlightStage.selectors.getConfig(e).shouldShowGridLines}return T.prototype.getSnapData=function(t,e,o,i,r,a){let s=[];const l=O.call(this,t),p=E.call(this),d=o||k(this.editorAPI);let m=[],h=[];i&&(u=i.verticalEqualDistanceLines,c=i.horizontalEqualDistanceLines);const y="RESIZE"===r&&(e.left||e.right),_="RESIZE"===r&&(e.top||e.bottom);let P=!1;if((_||y)&&!a&&n.default.forEach(p,t=>{const e=t.comp&&this.editorAPI.components.getType(t.comp);e&&!g(e)&&(t.layout.width===l.width&&y&&(P=!0,s=s.concat(B(t.layout),B(l))),t.layout.height===l.height&&_&&e!==f&&(P=!0,s=s.concat(F(t.layout),F(l))))}),!P){const t=e.centerY&&(S=l.y+l.height/2,x=p,n.default.filter(x,(function(t){const e=t.layout;return S===(e.y+(e.y+e.height))/2})));if(t&&t.length>0)s=s.concat(b(this.editorAPI,l.y+l.height/2,l,t,m));else{let t=[];if(e.top&&(t=D(this.editorAPI,l.y,p),m=d?[]:L(this.editorAPI,l.y),(t.length>0||m.length>0)&&(s=s.concat(b(this.editorAPI,l.y,l,t,m)))),e.bottom){const e=l.y+l.height;t=D(this.editorAPI,e,p),m=d?[]:L(this.editorAPI,e),(t.length>0||m.length>0)&&(s=s.concat(b(this.editorAPI,e,l,t,m)))}}const o=e.centerX&&function(t,e){return n.default.filter(e,(function(e){const o=e.layout;return t===(o.x+(o.x+o.width))/2}))}(l.x+l.width/2,p);if(o&&o.length>0)s=s.concat(R(this.editorAPI,l.x+l.width/2,l,o,h));else{let t=[];if(e.right){const e=l.x+l.width;t=w(this.editorAPI,e,p),h=d?[]:M(this.editorAPI,e),(t.length>0||h.length>0)&&(s=s.concat(R(this.editorAPI,e,l,t,h)))}e.left&&(t=w(this.editorAPI,l.x,p),h=d?[]:M(this.editorAPI,l.x),(t.length>0||h.length>0)&&(s=s.concat(R(this.editorAPI,l.x,l,t,h))))}}var S,x;return s},T.prototype.getSimilarSizeCandidates=function(t,e,o){const i=o.top||o.bottom,r=o.left||o.right;if(!i&&!r)return{};const a=O.call(this,e),s=E.call(this);let u,c,l=Number.MAX_SAFE_INTEGER,p=Number.MAX_SAFE_INTEGER;return n.default.forEach(s,e=>{const o=e.comp&&t.components.getType(e.comp);if(o&&!g(o)){if(i&&o!==f){const t=Math.abs(e.layout.height-a.height);t<5&&t<l&&(l=t,u=e)}if(r){const t=Math.abs(e.layout.width-a.width);t<5&&t<p&&(p=t,c=e)}}}),{potentialSimilarHeightCandidate:u,potentialSimilarWidthCandidate:c}},T}.apply(e,n))||(t.exports=i)},424:function(t,e,o){var n;void 0===(n=function(t,e){"use strict";return{getPageGridLines:function(t,e){return function(t,e){const o=t.y+t.height,n=t.x+t.width,i={x1:t.x,y1:0,x2:t.x,y2:"100%"},r={x1:n,y1:0,x2:n,y2:"100%"},a={x1:0,y1:t.y,x2:"100%",y2:t.y};return e?[i,r]:[i,r,a,{x1:0,y1:o,x2:"100%",y2:o}]}(function(t){const e=t.siteSegments.getPagesContainerAbsLayout(),o=t.getSiteScale();if(!o||1===o)return e;const n={x:void 0,y:e.y*o,width:e.width*o,height:e.height*o},i=e.width-n.width;return n.x=e.x+i/2,n}(t),e)},getContainerGridLines:function(t,e){"wysiwyg.viewer.components.StripColumnsContainer"===t.components.getType(e)&&(e=t.components.getChildren(e)[0]);const o=t.components.layout.getCompMargin(e),n=t.components.layout.getRelativeToScreen(e),i=n.y+n.height,r=n.x+o.left,a=n.x+n.width-o.right;return[{x1:r,y1:n.y,x2:r,y2:i},{x1:a,y1:n.y,x2:a,y2:i}]}}}.apply(e,[o,e]))||(t.exports=n)},425:function(t,e,o){var n,i;n=[o,e,o(0),o(1)],void 0===(i=function(t,e,o,n){"use strict";return n=o.__importDefault(n),function(t){return t&&"MusicPlayerProperties"===t.type?{properties:n.default(t).keys().filter(e=>n.default.includes(e,"show")&&"showPlaylist"!==e&&t[e]).join(";")}:{}}}.apply(e,n))||(t.exports=i)},426:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(427),o(246),o(6)],void 0===(i=function(t,e,o,n,i,r,a){"use strict";n=o.__importDefault(n),i=o.__importDefault(i),r=o.__importDefault(r),a=o.__importDefault(a);let s,u,c,l,p,d,f,g,m,h;function y(t,e){return t.clientY+s.ui.scroll.getScroll().scrollTop/(e||1)}function _(t){const e={x:0,y:t},o=d.getLayout(e);return o.y=Math.max(o.y,h),o}function P(t){const e=d.getBoundComponentLayouts(t);for(let t=0;t<c.comps.length;t++)s.components.layout.updateRelativeToScreen(c.comps[t],n.default.pick(e[t],"y"),!0)}function S(t,e){const o=function(t){return t>l?1:-1}(t);l=t;const i=n.default.findIndex(u,c)+o;if(i>=u.length||i<0)return!1;const a=u[i];return!(!a||!r.default.isAtSectionsSwitchPoint(e,a,o))&&(r.default.switchSectionsByDrag(s,u,c,a),n.default.defer(v),!0)}function x(t,e){return e.position.top<t.position.bottom}function v(){const t=n.default.findIndex(u,c),e=u[t-1],o=u[t+1];let i=0,a=0;if(o&&x(c,o)&&(a=c.position.bottom-o.position.top),e&&x(e,c)&&(i=e.position.bottom-c.position.top,a+=i),i&&r.default.shiftSection(s,c,i),a)for(let e=t+1;e<u.length;e++)r.default.shiftSection(s,u[e],a)}return{start:function(t,e){if(m=!1,p=!0,s=t,c=e.draggedSection,!c)return;const o={x:0,y:y(e.evt,s.getSiteScale())};l=o.y,u=n.default.sortBy(e.sections,"position.top"),f=e.onDragEnd,g=e.onDragStart,h=e.minY||0;const r={y:c.position.top,height:c.position.bottom-c.position.top},a=n.default.map(c.comps,(function(t){return s.components.layout.getRelativeToScreen(t)}));d=new i.default.Drag(r,o,a)},on:function(t){if(c)if(p)p=!1,function(){const t=n.default.map(c.comps,"id");n.default.isEmpty(t)||(s.dsActions.renderPlugins.setCompsToShowOnTop(t),s.dsActions.renderPlugins.setCompsToShowWithOpacity(t,.5)),n.default.isFunction(g)&&g(),window.setTimeout((function(){v(),m=!0}),0)}();else if(m){const e=y(t,s.getSiteScale()),o=_(e);P(o),S(e,o)}},end:function(t){const e=y(t);c&&!p&&(!function(t){const e=_({y:t,x:0});e.y=c.position.top,P(e)}(e),s.history.add("Dragged Components Section"),s.dsActions.renderPlugins.setCompsToShowOnTop(null),s.dsActions.renderPlugins.setCompsToShowWithOpacity(null)),n.default.isFunction(f)&&f(c)},type:a.default.MOUSE_ACTION_TYPES.SECTION_DRAG}}.apply(e,n))||(t.exports=i)},427:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(1510)],void 0===(i=function(t,e,o,n,i){"use strict";n=o.__importDefault(n),i=o.__importDefault(i);const r=180/Math.PI,a=1/r,s=-1,u=1,c=-1,l=1,p=0;function d(t,e){return Math.atan2(t.y-e.y,t.x-e.x)}function f(t,e,o){return 0===e?t:{x:(t.x-o.x)*Math.cos(e)-(t.y-o.y)*Math.sin(e)+o.x,y:(t.x-o.x)*Math.sin(e)+(t.y-o.y)*Math.cos(e)+o.y}}function g(t){return{x:t.x+t.width/2,y:t.y+t.height/2}}function m(t,e,o){if(!t)return null;const i=n.default.clone(t);let r=o.x-e.x,a=o.y-e.y;return o.isShiftPressed&&(Math.abs(r)>=Math.abs(a)?a=0:r=0),i.x+=r,i.y+=a,i}function h(t,e){return n.default.map(t,(function(t){return{x:e.x+t.x,y:e.y+t.y}}))}function y(t,e,o,n){let i=0;const r=o?Math.floor(e/2):e;return 1===t?i=Math.max(-r,n):-1===t&&(i=Math.min(r,n)),i}function _(t,e,o,r,d){t&&(this.initLayout=t,this.initMouseLocation=e,this.direction=o,this.proportional=r,this.rotationInRad=a*t.rotationInDegrees,this.ratio=d||1,this.initLayoutAspectRatio=t.width/t.height,this.getCorrectXYAfterTransformOriginChange=function(t){let e=n.default.pick(t,["x","y"]);return e=f(e,-this.rotationInRad,g(t)),f(e,this.rotationInRad,g(this.initLayout))},this.getLayoutAfterProportionalHorizontalResize=function(t,e){const o=n.default.clone(t);let i;this.direction.x===c?(i=-Math.min(e.x,t.width),o.x-=i):this.direction.x===l&&(i=Math.max(e.x,-t.width)),o.width+=i,o.height=o.width/this.initLayoutAspectRatio;const r=o.height-this.initLayout.height;return o.y-=r/2,n.default.assign(o,this.getCorrectXYAfterTransformOriginChange(o)),o},this.getLayoutAfterProportionalVerticalResize=function(t,e){const o=n.default.clone(t);let i=0;this.direction.y===s?(i=-Math.min(e.y,t.height),o.y-=i):this.direction.y===u&&(i=Math.max(e.y,-t.height)),o.height+=i,o.width=o.height*this.initLayoutAspectRatio;const r=o.width-this.initLayout.width;return o.x-=r/2,n.default.assign(o,this.getCorrectXYAfterTransformOriginChange(o)),o},this.getLayoutAfterStandardResize=function(t,e){const o=i.default.getLayoutSymmetry(t);return this.direction.x&&(o.horizontal?function(t,e,o){const n=y(o,t.width,!0,e.x);1===o?(t.x-=n,t.width+=2*n):-1===o&&(t.x+=n,t.width-=2*n)}(t,e,this.direction.x):(e.x/=this.ratio,function(t,e,o){const n=y(o,t.width,!1,e.x);1===o?t.width+=n:-1===o&&(t.x+=n,t.width-=n)}(t,e,this.direction.x))),this.direction.y&&(o.vertical?function(t,e,o){const n=y(o,t.height,!0,e.y);1===o?(t.y-=n,t.height+=2*n):-1===o&&(t.y+=n,t.height-=2*n)}(t,e,this.direction.y):(e.y/=this.ratio,function(t,e,o){const n=y(o,t.height,!1,e.y);1===o?t.height+=n:-1===o&&(t.y+=n,t.height-=n)}(t,e,this.direction.y))),n.default.assign(t,this.getCorrectXYAfterTransformOriginChange(t)),this.direction.x||delete t.width,this.direction.y||delete t.height,t},this.getLayout=function(t){const e=n.default.cloneDeep(this.initLayout);let o,i={x:t.x-this.initMouseLocation.x,y:t.y-this.initMouseLocation.y};var r,a;return r=i,a=-this.rotationInRad,i=f(r,a,{x:0,y:0}),this.proportional?(!function(t){return t.y===p&&t.x!==p}(this.direction)?!function(t){return t.x===p&&t.y!==p}(this.direction)?(i=function(t,e,o){const n=o.x>0?e.x:e.x+e.width,i=o.y>0?e.y:e.y+e.height,r=o.x<0?e.x:e.x+e.width,a=o.y<0?e.y:e.y+e.height,s=(a-i)/(r-n),u=s,c=-1,l=i-s*n,p=r+t.x,d=a+t.y;return{x:(c*(c*p-u*d)-u*l)/(u*u+1)-r,y:(u*(u*d-c*p)-c*l)/(u*u+1)-a}}(i,e,this.direction),o=this.getLayoutAfterStandardResize(e,i)):o=this.getLayoutAfterProportionalVerticalResize(e,i):o=this.getLayoutAfterProportionalHorizontalResize(e,i),o=n.default.mapValues(o,Math.round)):o=this.getLayoutAfterStandardResize(e,i),o})}return{Drag:function(t,e,o){t&&(this.initLayout=t,this.boundCompsPositionRelativeToLayout=n.default.map(o,(function(e){return{x:e.x-t.x,y:e.y-t.y}})),this.initMouseLocation=e,this.getLayout=m.bind(null,this.initLayout,this.initMouseLocation),this.getBoundComponentLayouts=h.bind(null,this.boundCompsPositionRelativeToLayout))},Rotate:function(t,e,o){t&&(this.initLayout=t,this.initMouseLocation=e,this.center=g(o),this.initMouseAngle=d(this.initMouseLocation,this.center),this.getLayout=function(t){const e=n.default.clone(this.initLayout),o=d(t,this.center);return e.rotationInDegrees+=(o-this.initMouseAngle)*r,e})},Resize:_,dragLayout:m,resizeLayout:function(t,e,o,n,i){return t?new _(t,e,o,n).getLayout(i):null}}}.apply(e,n))||(t.exports=i)},428:function(t,e,o){var n,i;function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function a(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}n=[o,e,o(0),o(1),o(2),o(13)],void 0===(i=function(t,e,o,n,i,s){"use strict";n=o.__importDefault(n),i=o.__importStar(i),s=o.__importDefault(s);function u(t,e){return n.default(e).reject(e=>t.components.layout.isPinned(e)).map((function(e){let o=t.components.layout.get(e);return o.bounding&&(o=o.bounding),o=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){a(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},o,{bottomY:o.y+o.height}),{layout:o,comp:e}})).sortBy("layout.y").value()}function c(t,e,o){return n.default.forEach(t,(function(t){const i=function(t){return{y:t.position.top,bottomY:t.position.bottom,height:p(t)}}(t),r=n.default.filter(e,t=>function(t,e,o){o=o||1;const n=e.y>=t.y&&e.y<=t.bottomY,i=e.bottomY>=t.y&&e.bottomY<=t.bottomY,r=e.y<=t.y&&e.bottomY>=t.bottomY;return n&&t.bottomY-e.y>=e.height*o||i&&e.bottomY-t.y>=e.height*o||r&&t.height>=e.height*o}(i,t.layout,o));e=n.default.difference(e,r),t.comps=n.default.union(t.comps,n.default.map(r,"comp"))})),t}function l(t,e){const o=[];for(let n=0;n<t.length;n++){const i=t[n],r={position:{top:i.layout.y,bottom:i.layout.bottomY},comps:[]};r.position.top=i.layout.y,r.comps.push(i.comp);let a=!1;for(;!a;){const o=t[n+1];!o||o.layout.y>r.position.bottom+e?a=!0:(r.comps.push(o.comp),r.position.bottom=Math.max(r.position.bottom,o.layout.bottomY),n++)}o.push(r)}return o}function p(t){return t.position.bottom-t.position.top}function d(t,e,o){const n=t[e],i=t[o];i.comps=i.comps.concat(n.comps),i.position.top=Math.min(i.position.top,n.position.top),i.position.bottom=Math.max(i.position.bottom,n.position.bottom),t.splice(e,1)}function f(t){let e,o,n,i;for(let r=0;r<t.length;r++)if(i=!1,e=t[r],p(e)<30){n=t[r-1],o=t[r+1];const a=n?e.position.top-n.position.bottom:Number.POSITIVE_INFINITY,s=o?o.position.top-e.position.bottom:Number.POSITIVE_INFINITY;a<s&&a<=30?(d(t,r,r-1),i=!0):s<a&&s<=30&&(d(t,r,r+1),i=!0),i&&r--}return t}function g(t){let e=0;for(;e<t.length;){t[e+1]&&t[e+1].position.top<=t[e].position.bottom+-3?d(t,e+1,e):e++}return t}function m(t){return t.position.bottom<0}function h(t,e){const o=i.appStudioUtils.isAppStudio()&&t.isMobileEditor();return n.default.map(e,(function(e){const i=o||n.default.some(e.comps,e=>!t.components.is.removable(e));return e.isRemovable=!!s.default.isOpen("se_hiddenElementsInBuilder")||!i,e}))}return{analyzeContainer:function(t,e){const o=t.components.getChildren(e),i=u(t,o),r=(a=i,s=t.isMobileEditor(),n.default.filter(a,t=>function(t,e){const o=e?300:700;return t.layout.width>=o}(t,s)));var a,s;let p=n.default.difference(i,r),d=l(r,-3);d=c(d,p,.5),p=function(t,e){const o=n.default(e).flatMap("comps").keyBy("id").value();return n.default.reject(t,t=>!!o[t.comp.id])}(p,d);const y=l(p,30);return n.default(d).union(y).sortBy("position.top").thru(f).thru(g).reject(m).thru(n.default.partial(h,t)).value()},getSortedComponentsWithLayout:u}}.apply(e,n))||(t.exports=i)},429:function(t,e,o){var n,i;n=[o,e,o(0),o(430),o(1513)],void 0===(i=function(t,e,o,n,i){"use strict";function r(t,e){n.default.call(this,t,e,i.default)}return n=o.__importDefault(n),i=o.__importDefault(i),r.prototype=n.default.prototype,r}.apply(e,n))||(t.exports=i)},430:function(t,e,o){var n,i;n=[o,e,o(0),o(1),o(1512)],void 0===(i=function(t,e,o,n,i){"use strict";function r(t,e,o){return n.default(o).filter((function(o){return i=o,(n.default.isFunction(i.applyConstraint)||n.default.isFunction(i.getBoundaries))&&(!n.default.isFunction(o.shouldConstrain)||o.shouldConstrain(t,e));var i})).map((function(o){const r=n.default.clone(o);return r.applyConstraint||(r.applyConstraint=i.default.applyBoundariesConstraintOnLayout.bind(null,r.getBoundaries(t,e))),r})).value()}function a(t,e,o){this.constraintsToApply=r(t,e,o)}return n=o.__importDefault(n),i=o.__importDefault(i),a.prototype.applyConstraints=function(t,e,o,i){const r=n.default.assign({},i,o);n.default.forEach(this.constraintsToApply,(function(o){o.applyConstraint(t,e,r,i)})),n.default.assign(o,n.default.pick(r,n.default.keys(o)))},a.prototype.getConstraintArea=function(t,e){const o=n.default(this.constraintsToApply).filter((function(t){return n.default.isFunction(t.getConstraintArea)})).invokeMap("getConstraintArea",t,e).compact().flatten().value();return n.default.isEmpty(o)?null:o},a.prototype.hasConstraints=function(){return!n.default.isEmpty(this.constraintsToApply)},a}.apply(e,n))||(t.exports=i)},431:function(t,e,o){var n,i;n=[o,e,o(0),o(1)],void 0===(i=function(t,e,o,n){"use strict";return n=o.__importDefault(n),{isShownOnAllPagesComponent(t,e){const o=n.default.isArray(e)?e:[e];return n.default.some(o,(function(e){return t.components.isShowOnAllPages(e)&&!t.utils.isSameRef(e,t.dsRead.siteSegments.getFooter())}))}}}.apply(e,n))||(t.exports=i)},432:function(t,e,o){var n,i;n=[o,e,o(0),o(1)],void 0===(i=function(t,e,o,n){"use strict";return n=o.__importDefault(n),{isDynamicPage:function(t,e){return n.default.isObject(function(t,e){const o=n.default.get(e,"id")&&t.dsRead.pages.getReference(e.id);return o&&t.dsRead.routers.getRouterRef.byPage(o)}(t,e))}}}.apply(e,n))||(t.exports=i)},5:function(t,e){t.exports=r},6:function(t,e){t.exports=a},7:function(t,e){t.exports=s}})}));
//# sourceMappingURL=core.min.js.map