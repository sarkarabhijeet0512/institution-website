define("menu",["tslib","lodash","util","react","constants","stateManagement","wix-base-ui","santa-editor-symbols","helpIds","compPanelInfra","panels","react-dnd","pages-wip","react-dnd-html5-backend"],(function(e,t,n,a,o,i,r,l,s,u,c,m,d,p){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1828)}({0:function(t,n){t.exports=e},1:function(e,n){e.exports=t},10:function(e,t){e.exports=l},100:function(e,t,n){var a,o;a=[n,t,n(136)],void 0===(o=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanId=e=>e.replace("#",""),t.isMainMenu=e=>e.id===n.MAIN_MENU_ID,t.isDropdown=e=>!e.link,t.getNextMenuName=(e,t)=>{const n=new RegExp("^".concat(t," ?(\\d+)?$")),a=e.map(e=>{const t=n.exec(e);if(t){const e=t[1];return Number(e)||1}return 0}),o=Math.max(...a,0);return 0===o?t:"".concat(t," ").concat(o+1)},t.getAttachableMenus=e=>e.filter(e=>!n.NON_ATTACHABLE_MENUS_IDS.includes(e.id)),t.getCustomMenus=e=>e.filter(e=>!n.NON_CUSTOM_MENUS_IDS.includes(e.id))}.apply(t,a))||(e.exports=o)},135:function(e,t,n){var a,o;function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n,t,n(0),n(1),n(459),n(2),n(100),n(136),n(264)],void 0===(o=function(e,t,n,a,o,i,l,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a),o=n.__importStar(o);const{LinkTypes:c,linkTypeValidators:{isPageLink:m}}=i.link,{api:{createPagesApi:d}}=o,p=e=>e.pageId.replace(/^#/,"");t.createMenuApi=e=>{const{dsActions:t,dsRead:n,components:o}=e,i=d(e),_=n.menu.getAll,f=e=>n.menu.getById(e,!1),g=e=>t.menu.create(r({type:s.MENU_TYPE},e)),I=(e,n)=>{const a=f(e);t.menu.update(e,r({},a,{items:n}))},E=e.dsRead.menu.hasConnectedComps,M=(e,t)=>{const n=f(e);return u.findItem(n.items,t)},T=(e,n)=>t.menu.addItem(e,n),A=(e,n,a)=>{t.menu.updateItem(e,n,a)},N=()=>a.default.flatMap(Object.values(s.menuComponentTypes),e=>o.get.byType(e));return{getAll:_,getMenu:f,createMenu:g,createMenuWithHomePage:e=>{const t=i.getHomePageId(),{title:n}=i.getPageById(t),a={type:c.PAGE_LINK,target:"_self",pageId:"#".concat(t)},o={isVisible:!0,isVisibleMobile:!0,type:s.MENU_ITEM_TYPE,items:[],label:n,link:a};return g({name:e,items:[o]})},duplicateMenu:(e,n)=>{const a=f(e),o=_().map(e=>e.name),i=l.getNextMenuName(o,n);return t.menu.create(r({},a,{name:i}))},renameMenu:(e,n)=>{const a=f(e);t.menu.update(e,r({},a,{name:n}))},removeMenu:e=>t.menu.remove(e),replaceMenuItems:I,getItem:M,updateItem:A,renameItem:(e,t,n)=>{A(e,t,{label:n})},addItem:T,addDropdown:(e,t)=>T(e,{label:t}),removeItem:function(e,n){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.menu.removeItem(e,n,a)},unlinkItem:(e,t)=>{A(e,t,{link:void 0})},linkItem:(e,t,n)=>{let a=M(e,t).label;if(m(n)){a=i.getPageById(l.cleanId(n.pageId)).title}A(e,t,{link:n,label:a})},moveToDropdown:(e,t,n)=>{const a=f(e),o=M(e,t),i=u.moveToParent(a.items,n,o);I(e,i)},moveFromDropdown:(e,t)=>{const n=f(e),{items:a}=n,o=u.findItem(a,t),i=u.findParent(a,t),r=u.insertAfter(u.removeFromTree(a,t),i.id,o);I(e,r)},connect:(e,n)=>t.menu.connect(n,e),getNewLinkLabel:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(m(e)){const t=p(e);return i.getPageById(t).title}return t},hasConnectedComponents:E,getMenuComponents:N,getMenuComponentsByMenuId:e=>N().filter(t=>{const n=o.data.get(t);return l.cleanId(n.menuRef)===e}),getMenuPagesInfo:e=>{const t=i.getAllPages(),n=f(e),o=u.configureTree(n.items).filter(e=>m(e.item.link)).map(e=>{var t;return l.cleanId((null===(t=e.item)||void 0===t?void 0:t.link).pageId)}),r=t.filter(e=>a.default.includes(o,e.id));return a.default.keyBy(r,"id")}}}}.apply(t,a))||(e.exports=o)},136:function(e,t,n){var a,o;a=[n,t,n(2)],void 0===(o=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const{LinkTypes:a}=n.link;var o;t.MAIN_MENU_ID="CUSTOM_MAIN_MENU",t.MENU_SETS_MANAGE_PANEL_NAME="menu.panels.MenuSetsPanel",t.MENU_TYPE="CustomMenu",t.MENU_ITEM_TYPE="BasicMenuItem",t.menuComponentTypes={dropDown:"wysiwyg.viewer.components.menus.DropDownMenu",vertical:"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu",tiny:"wysiwyg.viewer.components.mobile.TinyMenu",expandable:"wysiwyg.viewer.components.ExpandableMenu"},function(e){e.STORES_ID="1380b703-ce81-ff05-f115-39571d94dfcd",e.BOOKING_ID="13d21c63-b5ec-5912-8397-c3a5ddb27a97",e.FORUM_ID="14724f35-6794-cd1a-0244-25fd138f9242",e.BLOG_ID="14bcded7-0066-7c35-14d7-466cb3f09103",e.HOTELS_ID="135aad86-9125-6074-7346-29dc6a3c9bcf",e.RESTAURANTS_MENUS_IDS="13c1402c-27f2-d4ab-7463-ee7c89e07578",e.RESTAURANTS_ORDERS_IDS="13e8d036-5516-6104-b456-c8466db39542",e.SEARCH_RESULTS_ID="1484cb44-49cd-5b39-9681-75188ab429de"}(o=t.TPA_APP_ID||(t.TPA_APP_ID={})),t.TPA_SYMBOLS_MAP={[o.STORES_ID]:"storesPageType",[o.BOOKING_ID]:"bookingPageType",[o.FORUM_ID]:"forumPageType",[o.BLOG_ID]:"blogPageType",[o.HOTELS_ID]:"hotelsPageType",[o.RESTAURANTS_MENUS_IDS]:"restaurantsPageType",[o.RESTAURANTS_ORDERS_IDS]:"restaurantsPageType",[o.SEARCH_RESULTS_ID]:"searchPageType"},t.LINK_SYMBOLS_MAP={[a.ANCHOR_LINK]:"anchorPageType",[a.EXTERNAL_LINK]:"urlPageType",[a.EMAIL_LINK]:"emailPageType",[a.PHONE_LINK]:"phonePageType",[a.DOCUMENT_LINK]:"documentPageType"};t.MEMBER_MENUS_IDS=["MEMBERS_SUB_MENU","MEMBERS_LOGIN_MENU","MEMBERS_LOGIN_ICONS_MENU"],t.NON_ATTACHABLE_MENUS_IDS=[...t.MEMBER_MENUS_IDS],t.NON_CUSTOM_MENUS_IDS=[...t.MEMBER_MENUS_IDS,t.MAIN_MENU_ID]}.apply(t,a))||(e.exports=o)},14:function(e,t){e.exports=s},15:function(e,t){e.exports=u},154:function(e,t,n){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TRANSLATIONS_MAP={panelTitle:"custom_menu_manage_menu_header_label",HEADER:{LABEL:"custom_menu_manage_menu_choose_menu_label",TOOLTIP:{description:"custom_menu_manage_menu_choose_menu_tooltip",linkTitle:"custom_menu_manage_menu_choose_menu_tooltip_link"},DROPDOWN:{mainMenuOption:"custom_menu_manage_menu_choose_menu_option_main",manageMenusOption:"custom_menu_manage_menu_choose_menu_option_manage_menus",createMenuOption:"custom_menu_manage_menu_choose_menu_option_create_menu"}},FOOTER:{ADD_PAGE:{title:"custom_menu_manage_menu_add_page_button"},ADD_LINK:{TOOLTIP:{title:"custom_menu_manage_menu_add_link_title",description:"custom_menu_manage_menu_add_link_text",linkTitle:"custom_menu_manage_menu_add_link_link"}},ADD_FOLDER:{NAMES:{default:"custom_menu_manage_menu_new_dropdown_default_text"},TOOLTIP:{title:"custom_menu_manage_menu_add_dropdown_tooltip_title",description:"custom_menu_manage_menu_add_dropdown_tooltip_text",linkTitle:"custom_menu_manage_menu_add_dropdown_tooltip_link"}},mobileDescription:"custom_menu_mobile_manage_menu_go_to_desktop_text",mobileLinkTitle:"custom_menu_mobile_manage_menu_go_to_desktop_link"},ITEM:{LINK:{newLinkText:"custom_menu_manage_menu_new_link_default_text",placeholder:"custom_menu_manage_menu_new_link_placeholder_text",renameButton:"custom_menu_manage_menu_link_rename_done",validationError:"custom_menu_manage_menu_dropdown_rename_empty_error"},ACTIONS:{delete:"custom_menu_manage_all_menus_menu_options_delete",removePage:"custom_menu_manage_menu_page_options_remove_from_menu",duplicate:"custom_menu_manage_all_menus_menu_options_duplicate",renamePage:"custom_menu_manage_menu_page_options_rename",renameItem:"custom_menu_manage_all_menus_menu_options_rename",renameLink:"custom_menu_manage_menu_link_options_rename_link",renameDropdown:"custom_menu_manage_menu_dropdown_item_options_rename",moveDown:"custom_menu_manage_menu_page_options_move_dropdown",moveUp:"custom_menu_manage_menu_page_options_move_up",seoSettingsAction:"custom_menu_manage_menu_page_options_settings",link:"custom_menu_manage_menu_dropdown_item_options_link",unlink:"custom_menu_manage_menu_page_options_unlink",changeLink:"custom_menu_manage_menu_link_options_change_link",renameDone:"custom_menu_manage_all_menus_custom_rename_done"},ERRORS:{tooShort:"custom_menu_manage_menu_page_rename_empty_error"}},NOTIFICATIONS:{EDIT_MENU:{description:"Notifications_Custom_Menu_Changed_Menu_Name_Text",linkTitle:"Notifications_Custom_Menu_Changed_Menu_Name_Link"},RENAME_PAGE:{description:"Notifications_Custom_Menu_Changed_Page_Name_Text",linkTitle:"Notifications_Custom_Menu_Changed_Page_Name_Link"}}}}.apply(t,[n,t]))||(e.exports=a)},1828:function(e,t,n){var a,o;a=[n,t,n(0),n(135),n(1829),n(265),n(136)],void 0===(o=function(e,t,n,a,o,i,r){"use strict";return r=n.__importStar(r),{api:{createMenuApi:a.createMenuApi},panels:{MenuSetsPanel:o.MenuSetsPanel,MenuManagePanel:i.MenuManagePanel},constants:r}}.apply(t,a))||(e.exports=o)},1829:function(e,t,n){var a,o;a=[n,t,n(0),n(3),n(1),n(8),n(7),n(19),n(2),n(14),n(1830),n(1832),n(190),n(135),n(100),n(136)],void 0===(o=function(e,t,n,a,o,i,r,l,s,u,c,m,d,p,_,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importStar(a),o=n.__importDefault(o),r=n.__importDefault(r),l=n.__importStar(l),u=n.__importStar(u);const{frames:{toolPanelFrame:g}}=l,{STORES:{EDITOR_API:I},connect:E}=s.hoc,{openHelpCenter:M}=r.default.editorPlugins.panels.actions,{getData:T}=r.default.components.selectors,A=(e,t)=>_.isMainMenu(e)?-1:1;class N extends a.Component{constructor(e){super(e),this.setEdit=e=>{this.setState({editingItemId:e})},this.handleItemSelect=e=>{const{attachMenuToSelectedComponent:t}=this.props;t(e)},this.handleItemRename=(e,t)=>{const{renameMenu:n}=this.props;n(e,t)},this.handleItemDuplicate=(e,t)=>{const{duplicateMenu:n,attachMenuToSelectedComponent:a}=this.props,o=n(e,t);a(o),this.setEdit(o)},this.handleItemEdit=e=>{const{editingItemId:t}=this.state,n=t!==e;this.setEdit(n?e:null)},this.handleItemDelete=e=>{const{attachMenu:t,removeMenu:n,getMenuComponentsByMenuId:a}=this.props;a(e).forEach(e=>{t(f.MAIN_MENU_ID,e)}),n(e)},this.handleCreateButtonClick=()=>{const{createMenuWithHomePage:e,attachMenuToSelectedComponent:t}=this.props,n=e();t(n),this.setEdit(n)},this.handleFirstExperienceLinkClick=()=>{const{createMenuWithHomePage:e,attachMenuToSelectedComponent:t}=this.props,n=e();t(n),this.setEdit(n)},this.state={editingItemId:null}}render(){const{top:e,left:t,panelName:n,menus:o,selectedMenuId:r,isFirstExperienceFlow:l,openMainMenuArticle:p}=this.props,{editingItemId:_}=this.state,f=l?d.TRANSLATIONS_MAP.FIRST_EXPERIENCE.panelHeader:d.TRANSLATIONS_MAP.panelHeader,I=l?u.MENU_PANEL.CUSTOM_MENUS:u.MENU_PANEL.MANAGE_ALL_MENUS;return a.default.createElement(g,{panelName:n,contentStyle:{top:e,left:t},lightHeader:!0,isBlockingLayerFullScreen:!1,shouldBlockOuterScroll:!1,helpId:I,headerTitle:s.translate(f),contentWrapperClass:"menu-sets-panel"},a.default.createElement(i.Divider,{long:!0}),l?a.default.createElement(m.FirstExperience,{onLinkClick:this.handleFirstExperienceLinkClick}):a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"menu-sets-panel__content","data-aid":"menu-sets-panel-content"},a.default.createElement(i.CustomScroll,{heightRelativeToParent:"100%"},o.map(e=>a.default.createElement(c.MenuItem,{key:e.id,menu:e,onRename:this.handleItemRename,onDuplicate:this.handleItemDuplicate,onEdit:this.handleItemEdit,onDelete:this.handleItemDelete,onSelect:this.handleItemSelect,isSelected:r===e.id,isEditing:_===e.id,onMainMenuHelpClick:p})))),a.default.createElement(i.Composites.ButtonLargeFixedBottom,null,a.default.createElement(i.Button,{onClick:this.handleCreateButtonClick},d.TRANSLATIONS_MAP.addMenuButtonText))))}}const O=(e,t,n)=>{let{editorAPI:a}=n;return a};t.MenuSetsPanel=o.default.flow(E(I,(e,t)=>{let{editorAPI:n}=e;const a=p.createMenuApi(n),{selectedComponents:o}=t,i=a.getAll(),r=_.getAttachableMenus(i).sort(A),l=T(o,n.dsRead);return{menus:r,selectedMenuId:_.cleanId(l.menuRef),isFirstExperienceFlow:!(_.getCustomMenus(i).length>0)}},(e,t)=>{const n=e(O),{selectedComponents:a}=t,o=p.createMenuApi(n),{createMenuWithHomePage:i,renameMenu:r,duplicateMenu:l,connect:c,removeMenu:m,getMenuComponentsByMenuId:_}=o,f=a[0];return{createMenuWithHomePage:()=>i(s.translate(d.TRANSLATIONS_MAP.ITEM.initialTitle)),renameMenu:r,duplicateMenu:l,attachMenu:c,attachMenuToSelectedComponent:e=>c(e,f),openMainMenuArticle:()=>e(M(u.MENU_PANEL.MAIN_MENU)),removeMenu:m,getMenuComponentsByMenuId:_}}))(N)}.apply(t,a))||(e.exports=o)},1830:function(e,t,n){var a,o;a=[n,t,n(0),n(3),n(8),n(10),n(2),n(1831),n(190),n(100)],void 0===(o=function(e,t,n,a,o,i,r,l,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a);const c={draggable:!1,withDragHandle:!1,labelValidators:[{validator:e=>e.trim().length>0,invalidMessage:s.TRANSLATIONS_MAP.ITEM.tooShort}],submitEditLabelButtonText:r.translate(s.TRANSLATIONS_MAP.ITEM.renameButton),labelPlaceholder:r.translate(s.TRANSLATIONS_MAP.ITEM.inputPlaceholder),shouldTranslate:!1,automationId:"menu-sets-item"};var m;!function(e){e.NONE="NONE",e.EDIT_LABEL="EDIT_LABEL"}(m||(m={}));const d=e=>{let{onLinkClick:t}=e;return a.default.createElement(o.InfoIcon,{text:s.TRANSLATIONS_MAP.MAIN_MENU.TOOLTIP.text,linkText:s.TRANSLATIONS_MAP.MAIN_MENU.TOOLTIP.linkTitle,onLinkClick:t,customSymbol:a.default.createElement(i.symbol,{name:"mainMenuFlag"})})};t.MenuItem=e=>{const{menu:t,isEditing:n,isSelected:i,onDuplicate:p,onEdit:_,onDelete:f,onSelect:g,onRename:I,onMainMenuHelpClick:E}=e,M=u.isMainMenu(t),T=M?r.translate(s.TRANSLATIONS_MAP.MAIN_MENU.title):t.name,A=M?a.default.createElement(d,{onLinkClick:E}):void 0,N=r.cx("menu-sets-panel__item",{"menu-sets-panel__item_main-menu":M}),O=n?m.EDIT_LABEL:m.NONE,P=l.getMenuActions({menu:t,onDuplicate:p,onEdit:_,onDelete:f});return a.default.createElement(o.SortByDragListItemRow,Object.assign({value:{label:T},menuActions:P,select:()=>g(t.id),isSelected:i,contentAfter:A,className:N,editMode:O,onChange:e=>{let{label:n}=e;return I(t.id,n)}},c))}}.apply(t,a))||(e.exports=o)},1831:function(e,t,n){var a,o;a=[n,t,n(2),n(100),n(190)],void 0===(o=function(e,t,n,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const{translateTemplate:i}=n.translationUtil;t.getMenuActions=e=>{let{menu:t,onEdit:r,onDuplicate:l,onDelete:s}=e;const u=a.isMainMenu(t),c={action:()=>r(t.id),label:n.translate(o.TRANSLATIONS_MAP.ITEM.ACTIONS.rename),priority:2},m={action:()=>{const e=i(o.TRANSLATIONS_MAP.ITEM.duplicatedTitle,{menu_name:t.name});return l(t.id,e)},label:n.translate(o.TRANSLATIONS_MAP.ITEM.ACTIONS.duplicate),priority:1},d={action:()=>s(t.id),label:n.translate(o.TRANSLATIONS_MAP.ITEM.ACTIONS.delete),priority:0},p={duplicate:m};return u||(p.toggleEditLabel=c,p.delete=d),p}}.apply(t,a))||(e.exports=o)},1832:function(e,t,n){var a,o;a=[n,t,n(0),n(3),n(8),n(10),n(2),n(190)],void 0===(o=function(e,t,n,a,o,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a),t.FirstExperience=e=>{let{onLinkClick:t}=e;return a.default.createElement(o.Composites.RichTextWithIllustrationVertical,{className:"menu-sets-panel-first-time-experience",automationId:"menu-sets-panel-first-time-experience-panel"},a.default.createElement(o.Illustration,null,a.default.createElement(i.symbol,{name:"customMenuFirstExperience"})),a.default.createElement(o.Composites.RichTextLabeled,{className:"menu-sets-panel-first-time-experience__text-container"},a.default.createElement(o.TextLabel,{value:l.TRANSLATIONS_MAP.FIRST_EXPERIENCE.title,type:"T06"}),a.default.createElement(o.RichText,{type:"T01"},a.default.createElement("p",null,r.translate(l.TRANSLATIONS_MAP.FIRST_EXPERIENCE.description)),a.default.createElement("a",{className:"menu-sets-panel-first-time-experience__link",onClick:t,"data-aid":"menu-sets-panel-first-time-experience-link"},r.translate(l.TRANSLATIONS_MAP.FIRST_EXPERIENCE.linkTitle)))))}}.apply(t,a))||(e.exports=o)},1833:function(e,t,n){var a,o;a=[n,t,n(0),n(3),n(8),n(2),n(10),n(154),n(1834)],void 0===(o=function(e,t,n,a,o,i,r,l,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a),t.Footer=e=>{let{onAddPageClick:t,onAddLinkClick:n,onAddDropdownClick:u,onCreateLinkHelpLinkClick:c,onCreateDropdownHelpLinkClick:m,withLinkButton:d}=e;return a.default.createElement("footer",{className:"menu-manage-panel__footer"},a.default.createElement(o.Button,{className:"add-page-button",automationId:"add-menu-page-button",onClick:t},a.default.createElement("div",{className:"add-page-button-content"},a.default.createElement("span",{className:"add-page-button-title"},i.translate(l.TRANSLATIONS_MAP.FOOTER.ADD_PAGE.title)),a.default.createElement(r.symbol,{name:"addPage"}))),d&&a.default.createElement("div",{className:"menu-manage-panel__footer__buttons-wrapper"},a.default.createElement(o.Tooltip,{interactive:!0,arrowAlignment:"top",content:a.default.createElement(s.TooltipContent,{title:i.translate(l.TRANSLATIONS_MAP.FOOTER.ADD_LINK.TOOLTIP.title),description:i.translate(l.TRANSLATIONS_MAP.FOOTER.ADD_LINK.TOOLTIP.description),linkText:i.translate(l.TRANSLATIONS_MAP.FOOTER.ADD_LINK.TOOLTIP.linkTitle),onLinkClick:c})},a.default.createElement(o.Button,{className:"add-link-button",automationId:"add-menu-link-button",onClick:n},a.default.createElement(r.symbol,{name:"addLink"})))),a.default.createElement("div",{className:"menu-manage-panel__footer__buttons-wrapper"},a.default.createElement(o.Tooltip,{interactive:!0,arrowAlignment:"top",content:a.default.createElement(s.TooltipContent,{title:i.translate(l.TRANSLATIONS_MAP.FOOTER.ADD_FOLDER.TOOLTIP.title),description:i.translate(l.TRANSLATIONS_MAP.FOOTER.ADD_FOLDER.TOOLTIP.description),linkText:i.translate(l.TRANSLATIONS_MAP.FOOTER.ADD_FOLDER.TOOLTIP.linkTitle),onLinkClick:m})},a.default.createElement(o.Button,{className:"add-menu-button",automationId:"add-menu-folder-button",onClick:u},a.default.createElement(r.symbol,{name:"addMenuFolder"})))))}}.apply(t,a))||(e.exports=o)},1834:function(e,t,n){var a,o;a=[n,t,n(0),n(3),n(8)],void 0===(o=function(e,t,n,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a),t.TooltipContent=e=>{let{title:t,description:n,onLinkClick:i,linkText:r}=e;return a.default.createElement("div",{className:"menu-manage-tooltip-content"},a.default.createElement(o.Composites.RichTextLabeled,null,a.default.createElement(o.TextLabel,{type:"T06",value:t,shouldTranslate:!1}),a.default.createElement(o.RichText,null,a.default.createElement("p",{className:"menu-manage-tooltip-content__link"},n),r&&a.default.createElement("a",{onClick:i},r))))}}.apply(t,a))||(e.exports=o)},1835:function(e,t,n){var a,o;a=[n,t,n(0),n(3),n(266),n(1836),n(8),n(100),n(1837),n(2),n(265)],void 0===(o=function(e,t,n,a,o,i,r,l,s,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importStar(a),i=n.__importDefault(i);const{LinkTypes:m,linkTypeValidators:{isPageLink:d}}=u.link,p=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.DropMode.on;if(!t)return!1;switch(n){case c.DropMode.on:return!(e.nestingLevel>0)&&(!(l.isDropdown(t)||t.items.length>0)&&t.id!==e.item.id);case c.DropMode.after:case c.DropMode.before:return!(l.isDropdown(t)&&e.nestingLevel>0)&&!(t.items.length>0&&e.nestingLevel>0)}},_=e=>{const{items:t,menuId:n,setEdit:i,editingId:l,onDrop:u}=e,[c,_]=a.useState(!1),[,f]=o.useDrop({accept:"BasicMenuItem",drop(e,t){t.didDrop()||u(e)}}),g=t=>{const{openLinkPanel:n,linkItem:a,setEdit:o}=e;n({initialTab:m.PAGE_LINK,onSubmit:e=>{a(t,e),d(e)||o(t)}})},I=(t,n)=>{const{openLinkPanel:a,linkItem:o,setEdit:i}=e;a({initialTab:m.EXTERNAL_LINK,link:n,onSubmit:e=>{o(t,e),d(e)||i(t)}})};return a.default.createElement("div",{ref:f,className:"menu-manage-panel__items-container"},a.default.createElement(r.CustomScroll,{heightRelativeToParent:"100%"},a.default.createElement("div",{className:"menu-manage-panel__items-list"},t.map(e=>a.default.createElement(s.MenuItem,{setEdit:i,editingId:l,key:e.id,menuId:n,item:e,onLinkItem:g,onUnlinkItem:i,onChangeLink:I,onDrop:u,isDraggingAnyItem:c,setDragging:_,checkCanDrop:p})))))};t.MenuItemsList=e=>a.default.createElement(o.DndProvider,{backend:i.default},a.default.createElement(_,Object.assign({},e)))}.apply(t,a))||(e.exports=o)},1836:function(e,t){e.exports=p},1837:function(e,t,n){var a,o;a=[n,t,n(0),n(3),n(2),n(10),n(266),n(1838),n(1839),n(1840),n(135),n(1841),n(100),n(268),n(267),n(1842),n(265)],void 0===(o=function(e,t,n,a,o,i,r,l,s,u,c,m,d,p,_,f,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importStar(a);const{linkTypeValidators:{isPageLink:I}}=o.link,E=e=>{let{showChildren:t,toggleCollapse:n,symbol:r,drag:l,label:u,actions:c,isContextMenuOpen:m,setContextMenuOpen:d}=e;return a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"menu-manage-panel-item__drag-indicator"},a.default.createElement(i.symbol,{name:"dragPage"})),a.default.createElement("div",{className:o.cx("menu-manage-panel-item__arrow",{"menu-manage-panel-item__arrow_closed":t}),onClick:n}),a.default.createElement("div",{className:"menu-manage-panel-item__nesting-line"}),a.default.createElement("div",{ref:l,className:"menu-manage-panel-item__text-and-prefix"},a.default.createElement("div",{className:"menu-manage-panel-item__prefix"},a.default.createElement(i.symbol,{name:r})),a.default.createElement("div",{className:"menu-manage-panel-item_text"},u)),a.default.createElement(s.MenuItemContextMenu,{actions:c,isContextMenuOpen:m,onContextMenuToggle:d}))},{connect:M,STORES:{EDITOR_API:T}}=o.hoc;t.MenuItem=M(T,(e,t)=>{let{editorAPI:n}=e,{menuId:a,item:o,setEdit:i,isChild:r,onLinkItem:s,onUnlinkItem:u,onChangeLink:f}=t;const{renameItem:g}=c.createMenuApi(n),E=p.createPagesApi(n),M=l.getMenuItemActions({editorAPI:n,menuId:a,item:o,isChild:r,onRename:()=>i(o.id),onLinkItem:()=>s(o.id),onUnlinkItem:()=>u(o.id),onChangeLink:()=>f(o.id,o.link)}),T=m.isItemCollapsed(n,a,o.id);return{actions:M,handleRename:e=>{const{link:t}=o;if(I(t)){const n=d.cleanId(t.pageId);E.rename(n,e)}else g(a,o.id,e);n.store.dispatch(_.showRenameMenuItemNotification(a,o)),i(null)},cancelRename:()=>{i(null)},toggleCollapse:()=>{const e={menuId:a,itemId:o.id,isCollapsed:!T};m.setItemCollapsed(n,e)},showChildren:!T}})(e=>{const[n,i]=a.useState(!1),{item:l,actions:s,editingId:c,handleRename:m,cancelRename:d,menuId:p,setEdit:_,onLinkItem:I,onUnlinkItem:M,onChangeLink:T,toggleCollapse:A,showChildren:N,onDrop:O,isDraggingAnyItem:P,setDragging:h,checkCanDrop:S,nestingLevel:b=0,isLast:k=!1}=e,{label:y,items:D}=l,[{isOverCurrent:v,canDrop:L},C]=r.useDrop({accept:"BasicMenuItem",drop(t,n){const a=n.didDrop(),o=S(e,t);!a&&o&&O(t,l.id)},collect:t=>{const n=t.getItem();if(!n)return{isOverCurrent:!1,canDrop:!1};const a=S(e,n);return{isOverCurrent:t.isOver({shallow:!0}),canDrop:a}}}),[{dropOnZone:R,canDropOnZone:w},x]=f.useDropZone({checkCanDrop:S,props:e,onDrop:O,dropMode:g.DropMode.before}),[{dropOnZone:j,canDropOnZone:U},F]=f.useDropZone({checkCanDrop:S,props:e,onDrop:O,dropMode:g.DropMode.after}),[{isCurrentDragging:B},H]=r.useDrag({item:l,collect:e=>({isCurrentDragging:e.isDragging()}),begin:()=>{h(!0)},end:()=>{h(!1)}}),K={editingId:c,setEdit:_,menuId:p,onLinkItem:I,onUnlinkItem:M,onChangeLink:T,onDrop:O,isDraggingAnyItem:P,setDragging:h,checkCanDrop:S,isChild:!0},G={isContextMenuOpen:n,setContextMenuOpen:i,showChildren:N,toggleCollapse:A,actions:s,label:y,drag:H,symbol:l.symbol},Z=c===l.id;return a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{ref:C,className:o.cx("menu-manage-panel-item",{"menu-manage-panel-item_active":n,"menu-manage-panel-item_nested":b>0,"menu-manage-panel-item_last":b>0&&k,"menu-manage-panel-item_with-arrow":D.length>0,"menu-manage-panel-item_dragging":B,"menu-manage-panel-item_drop-on":v&&L,"menu-manage-panel-item_edit-state":Z}),style:{"--nestingLevel":b,"--dropZoneSize":"12"},"data-aid":"manage-menu-item"},a.default.createElement("div",{ref:x,className:o.cx("menu-manage-panel-item__dropzone","menu-manage-panel-item__dropzone_before",{"menu-manage-panel-item__dropzone_drop":R&&w})}),Z?a.default.createElement(u.MenuItemComponentEditState,{label:y,onRename:m,onRenameCancel:d}):a.default.createElement(E,Object.assign({},G)),a.default.createElement("div",{ref:F,className:o.cx("menu-manage-panel-item__dropzone","menu-manage-panel-item__dropzone_after",{"menu-manage-panel-item__dropzone_drop":j&&U})})),N&&D.map((e,n,o)=>a.default.createElement(t.MenuItem,Object.assign({},K,{item:e,key:e.id,nestingLevel:b+1,isLast:n===o.length-1}))))})}.apply(t,a))||(e.exports=o)},1838:function(e,t,n){var a,o;a=[n,t,n(0),n(1),n(2),n(135),n(154),n(267)],void 0===(o=function(e,t,n,a,o,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a);const{linkTypeValidators:{isPageLink:s,isExternalLink:u}}=o.link,c=r.TRANSLATIONS_MAP.ITEM.ACTIONS,m={type:"divider"};t.getMenuItemActions=e=>a.default.flowRight(I(e),d(e),g(e),_(e),f(),p(e))([]);const d=e=>t=>{const{onRename:n,item:a}=e;let i=c.renamePage;return u(a.link)&&(i=c.renameLink),a.link||(i=c.renameDropdown),[{title:o.translate(i),type:"action",symbolName:"renameAction",onClick:n},...t]},p=e=>t=>{const{menuId:n,editorAPI:a,item:r}=e,u=i.createMenuApi(a),{history:m}=a;return[{title:o.translate(s(r.link)?c.removePage:c.delete),type:"action",symbolName:"deleteAction",onClick:()=>{a.store.dispatch(l.showEditMenuNotification(n)),u.removeItem(n,r.id),m.add("Remove item from menu")}},...t]},_=e=>t=>{const{menuId:n,editorAPI:a,item:r,onLinkItem:s,onUnlinkItem:u,isChild:m}=e,d=i.createMenuApi(a),p={title:o.translate(c.link),type:"action",symbolName:"linkAction",onClick:s},_={title:o.translate(c.unlink),type:"action",symbolName:"unlinkAction",onClick:()=>{a.store.dispatch(l.showEditMenuNotification(n)),d.unlinkItem(n,r.id),u()}};return r.link?r.link&&!m&&r.items.length>0?[_,...t]:t:[p,...t]},f=()=>e=>e.length<0?e:[m,...e],g=e=>t=>{const{menuId:n,editorAPI:a,item:r,isChild:s}=e,u=i.createMenuApi(a),m={title:o.translate(c.moveDown),type:"action",symbolName:"subpageAction",onClick:()=>{a.store.dispatch(l.showEditMenuNotification(n)),u.moveToDropdown(n,r.id)}},d={title:o.translate(c.moveUp),type:"action",symbolName:"unsubpageAction",onClick:()=>{a.store.dispatch(l.showEditMenuNotification(n)),u.moveFromDropdown(n,r.id)}};return s?[d,...t]:(u.getMenu(n).items[0].id===r.id||r.items||!r.link||(t=[m,...t]),t)},I=e=>t=>{const{item:n,onChangeLink:a}=e,i={title:o.translate(c.changeLink),type:"action",symbolName:"linkAction",onClick:()=>a()};return n.link&&!s(n.link)?[i,...t]:t}}.apply(t,a))||(e.exports=o)},1839:function(e,t,n){var a,o;a=[n,t,n(0),n(3),n(8),n(2),n(10)],void 0===(o=function(e,t,n,a,o,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a),t.MenuItemContextMenu=e=>{let{actions:t,onContextMenuToggle:n,isContextMenuOpen:l}=e;return a.default.createElement(o.ContextMenu,{className:i.cx("flat","menu-manage-panel-item__context-menu"),isOpen:l,onToggle:n,automationId:"manage-menu-item-context-menu"},a.default.createElement(o.ContextMenuContent,{key:t.length},t.map((e,t)=>function(e){return"divider"===e.type}(e)?a.default.createElement(o.Divider,{key:t}):a.default.createElement(o.ContextMenuAction,{key:e.title,onClick:e.onClick},a.default.createElement(r.symbol,{name:e.symbolName}),e.title))))}}.apply(t,a))||(e.exports=o)},1840:function(e,t,n){var a,o;a=[n,t,n(0),n(3),n(2),n(8),n(154)],void 0===(o=function(e,t,n,a,o,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a);const{ERRORS:l,ACTIONS:s}=r.TRANSLATIONS_MAP.ITEM,u=e=>e.trim().length>=1;class c extends a.default.Component{constructor(e){super(e),this.changeName=e=>{this.setState({value:e})},this.onKeyDown=e=>{"Escape"===e.key&&(this.cancelRename(),e.nativeEvent.preventDefault())},this.cancelRename=()=>{const{onRenameCancel:e}=this.props;e()},this.onEditCompleted=()=>{const{onRename:e,onRenameCancel:t}=this.props,{value:n}=this.state;u(n)?e(n):t()},this.state={value:e.label}}render(){const{value:e}=this.state;return a.default.createElement(a.default.Fragment,null,a.default.createElement(i.TextInput,{className:"menu-manage-panel-item_edit-state__input",value:e,isValid:u(e),onChange:this.changeName,selectOnFocus:!0,autoSelect:!0,onBlur:this.onEditCompleted,blurOnEscKey:!1,invalidMessage:l.tooShort,onKeyDown:this.onKeyDown}),a.default.createElement(i.Button,{className:o.cx("btn-sm","menu-manage-panel-item_edit-state__button"),disabled:!u(e)},o.translate(s.renameDone)))}}t.MenuItemComponentEditState=c}.apply(t,a))||(e.exports=o)},1841:function(e,t,n){var a,o;function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n,t,n(0),n(7)],void 0===(o=function(e,t,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a);t.getMenusPreferences=e=>a.default.editorPlugins.userPreferences.selectors.getSessionUserPreferences("menus")(e.store.getState())||{},t.setItemCollapsed=(e,n)=>{let{menuId:o,itemId:i,isCollapsed:l}=n;const s=t.getMenusPreferences(e),u=s[o]||{};!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.store.dispatch(a.default.editorPlugins.userPreferences.actions.setSessionUserPreferences("menus",t))}(e,r({},s,{[o]:r({},u,{items:r({},(null==u?void 0:u.items)||{},{[i]:{isCollapsed:l}})})}))},t.getCollapsedItems=(e,n)=>{var a;const o=t.getMenusPreferences(e);return(null===(a=null==o?void 0:o[n])||void 0===a?void 0:a.items)||{}},t.isItemCollapsed=(e,n,a)=>{var o;const i=t.getCollapsedItems(e,n);return(null===(o=null==i?void 0:i[a])||void 0===o?void 0:o.isCollapsed)||!1}}.apply(t,a))||(e.exports=o)},1842:function(e,t,n){var a,o;a=[n,t,n(266)],void 0===(o=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDropZone=e=>{let{dropMode:t,checkCanDrop:a,props:o,onDrop:i}=e;const[{dropOnZone:r,canDropOnZone:l},s]=n.useDrop({accept:"BasicMenuItem",drop(e,n){const r=n.didDrop(),l=e&&a(o,e,t);!r&&l&&i(e,o.item.id,t)},collect:e=>{const n=e.getItem(),i=n&&a(o,n,t);return{dropOnZone:e.isOver()&&n.id!==o.item.id&&i,canDropOnZone:i}}});return[{dropOnZone:r,canDropOnZone:l},s]}}.apply(t,a))||(e.exports=o)},1843:function(e,t,n){var a,o;a=[n,t,n(100),n(136)],void 0===(o=function(e,t,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSymbolName=(e,t,a)=>n.isDropdown(e)?"folderPageType":t?n.cleanId(t.id)===n.cleanId(a)?"homePageType":t.isPopup?"popupPageType":"members"===(null==t?void 0:t.tpaPageId)?"membersAction":t.tpaApplicationId>0?i(t.managingAppDefId):"regularPageType":e.link?o(e.link):"regularPageType";const o=e=>a.LINK_SYMBOLS_MAP[e.type]||"linkPageType",i=e=>a.TPA_SYMBOLS_MAP[e]||"tpaPageType"}.apply(t,a))||(e.exports=o)},19:function(e,t){e.exports=c},190:function(e,t,n){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TRANSLATIONS_MAP={panelHeader:"custom_menu_manage_all_menus_header_label",MAIN_MENU:{TOOLTIP:{text:"custom_menu_manage_all_menus_main_tooltip",linkTitle:"custom_menu_manage_all_menus_main_tooltip_link"},title:"custom_menu_manage_menu_choose_menu_option_main"},ITEM:{initialTitle:"custom_menu_manage_all_menus_custom_default_text",inputPlaceholder:"custom_menu_manage_all_menus_custom_placeholder_text",tooShort:"custom_menu_manage_all_menus_custom_rename_empty_error",renameButton:"custom_menu_manage_all_menus_custom_rename_done",duplicatedTitle:"custom_menu_manage_all_menus_copied_menu_default_label",ACTIONS:{rename:"custom_menu_manage_all_menus_menu_options_rename",duplicate:"custom_menu_manage_all_menus_menu_options_duplicate",delete:"custom_menu_manage_all_menus_menu_options_delete"}},addMenuButtonText:"Create Custom Menu",FIRST_EXPERIENCE:{panelHeader:"custom_menu_create_custom_menu_header_label",title:"custom_menu_create_custom_menu_title",description:"custom_menu_create_custom_menu_text",linkTitle:"custom_menu_create_custom_menu_button"}}}.apply(t,[n,t]))||(e.exports=a)},2:function(e,t){e.exports=n},264:function(e,t,n){var a;function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findItem=(e,n)=>{const a=t.configureTree(e),o="string"==typeof n?e=>e.id===n:n,i=a.find(o);return(null==i?void 0:i.item)||null},t.updateTree=(e,n)=>e.map(e=>e.id===n.id?n:i({},e,{items:t.updateTree(e.items,n)})),t.removeFromTree=(e,n)=>{const a=e.filter(e=>e.id!==n);return a.length<e.length?a:a.map(e=>i({},e,{items:t.removeFromTree(e.items,n)}))},t.configureTree=(e,n)=>e.reduce((e,a)=>[...e,{id:a.id,item:a,parentId:n||null},...t.configureTree(a.items||[],a.id)],[]),t.findParent=(e,n)=>{const a=t.configureTree(e).find(e=>e.id===n);return a&&a.parentId?t.findItem(e,a.parentId):null},t.moveToParent=(e,n,a)=>{if(n===a.id)return e;const o=t.removeFromTree(e,a.id),r=t.findItem(o,n);return r?t.updateTree(o,i({},r,{items:[...r.items,a]})):e},t.insertBefore=(e,n,a)=>{if(n===a.id)return e;const o=t.findParent(e,n);if(!o){const t=e.findIndex(e=>e.id===n);return[...e.slice(0,t),a,...e.slice(t)]}const{items:r}=o,l=r.findIndex(e=>e.id===n);return t.updateTree(e,i({},o,{items:[...r.slice(0,l),a,...r.slice(l)]}))},t.insertAfter=(e,n,a)=>{if(n===a.id)return e;const o=t.findParent(e,n);if(!o){const t=e.findIndex(e=>e.id===n);return[...e.slice(0,t+1),a,...e.slice(t+1)]}const{items:r}=o,l=r.findIndex(e=>e.id===n);return t.updateTree(e,i({},o,{items:[...r.slice(0,l+1),a,...r.slice(l+1)]}))}}.apply(t,[n,t]))||(e.exports=a)},265:function(e,t,n){var a,o;function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n,t,n(0),n(3),n(1),n(8),n(7),n(2),n(15),n(14),n(459),n(1833),n(1835),n(135),n(154),n(100),n(136),n(264),n(267),n(1843)],void 0===(o=function(e,t,n,a,o,l,s,u,c,m,d,p,_,f,g,I,E,M,T,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a),o=n.__importDefault(o),s=n.__importDefault(s),c=n.__importStar(c),m=n.__importStar(m),d=n.__importStar(d);const{components:{hoc:{compPanel:N}},panels:{actions:{updateOrOpenPanel:O,openHelpCenter:P}},leftBar:{selectors:{isMobileEditor:h}}}=s.default.editorPlugins,{LinkTypes:S,getPagesForLinkPanel:b,linkTypeValidators:{isPageLink:k}}=u.link,{connect:y,STORES:{EDITOR_API:D}}=u.hoc,{api:{createPagesApi:v}}=d;var L;!function(e){e.on="dropOn",e.before="dropBefore",e.after="dropAfter"}(L=t.DropMode||(t.DropMode={}));class C extends a.default.Component{constructor(){super(...arguments),this.state={editingId:null},this.setEdit=e=>{this.setState({editingId:e||null})},this.handleAddPageButtonClick=()=>{const{openLinkPanel:e,addLink:t}=this.props;e({initialTab:S.PAGE_LINK,onSubmit:e=>{const n=t(e);k(e)||this.setEdit(n)}})},this.handleAddLinkButtonClick=()=>{const{openLinkPanel:e,addLink:t}=this.props;e({initialTab:S.EXTERNAL_LINK,defaultLinkType:S.EXTERNAL_LINK,onSubmit:e=>{const n=t(e);k(e)||this.setEdit(n)}})},this.handleAddDropdownButtonClick=()=>{const{createDropdown:e}=this.props,t=e();this.setEdit(t)}}render(){const{frameProps:e,attachableMenus:t,menuItems:n,attach:o,attachedMenuId:i,openMenuSetsPanel:r,hasCustomMenus:s,openShowMenuItemsArticle:d,openDropdownArticle:f,openLinkArticle:I,isMobile:E,openCreateMenuFromMobileArticle:M,linkItem:T,openLinkPanel:A,onDrop:N,isMembersMenu:O}=this.props,{editingId:P}=this.state,h=s?g.TRANSLATIONS_MAP.HEADER.DROPDOWN.manageMenusOption:g.TRANSLATIONS_MAP.HEADER.DROPDOWN.createMenuOption,S=E?m.MENU_PANEL.MANAGE_MENU_MOBILE:m.MENU_PANEL.MANAGE_MENU;return a.default.createElement(c.compPanelFrame,Object.assign({className:"manage-panel drop-down-menu-layout-panel",title:g.TRANSLATIONS_MAP.panelTitle,helpId:S},e,{useNativeScroll:!0}),a.default.createElement("div",{className:"menu-manage-panel"},!O&&a.default.createElement("header",{className:"menu-manage-panel__header"},a.default.createElement(l.Composites.DropDownLabeled,null,!E&&a.default.createElement(l.InfoIcon,{shouldTranslate:!1,text:u.translate(g.TRANSLATIONS_MAP.HEADER.TOOLTIP.description),linkText:u.translate(g.TRANSLATIONS_MAP.HEADER.TOOLTIP.linkTitle),onLinkClick:d}),a.default.createElement(l.TextLabel,{shouldTranslate:!1,value:u.translate(g.TRANSLATIONS_MAP.HEADER.LABEL)}),a.default.createElement(l.DropDown,{shouldTranslate:!1,value:i,onChange:o},t.map(e=>{let{name:t,id:n}=e;return a.default.createElement(l.DropDownOption,{shouldTranslate:!1,label:t,key:n,value:n})}),!E&&a.default.createElement(l.DropDownStickyFooter,{closeOnClick:!0},a.default.createElement(l.Button,{className:"btn-text",onClick:r},u.translate(h)))))),!E&&a.default.createElement(_.MenuItemsList,{setEdit:this.setEdit,editingId:P,menuId:i,items:n,linkItem:T,openLinkPanel:A,onDrop:N}),a.default.createElement(l.Divider,{long:!E}),E?a.default.createElement(l.Composites.RichText,null,a.default.createElement(l.RichText,null,"".concat(u.translate(g.TRANSLATIONS_MAP.FOOTER.mobileDescription)," "),a.default.createElement("a",{onClick:M},u.translate(g.TRANSLATIONS_MAP.FOOTER.mobileLinkTitle)))):a.default.createElement(p.Footer,{onAddPageClick:this.handleAddPageButtonClick,onAddLinkClick:this.handleAddLinkButtonClick,onAddDropdownClick:this.handleAddDropdownButtonClick,onCreateDropdownHelpLinkClick:f,onCreateLinkHelpLinkClick:I,withLinkButton:!O})))}}const R=(e,t,n)=>{let{editorAPI:a}=n;return a},w=(e,t,n)=>{const a=o=>o.map(o=>{const l=k(o.link)?e[I.cleanId(o.link.pageId)]:void 0;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o,{symbol:n||A.getSymbolName(o,l,t),items:a(o.items)})});return a},x=u.translate(g.TRANSLATIONS_MAP.ITEM.LINK.newLinkText);t.MenuManagePanel=o.default.flow(y(D,(e,t)=>{let{editorAPI:n,state:a}=e;const{compData:o}=t,i=f.createMenuApi(n),r=v(n),l=i.getAll(),s=I.cleanId(o.menuRef||t.menuId),u=l.find(e=>{let{id:t}=e;return t===s}),c=(null==u?void 0:u.items)||[],m=r.getHomePageId(),d=E.MEMBER_MENUS_IDS.includes(s),p=I.getAttachableMenus(l),_=I.getCustomMenus(l).length>0,g=h(a),M=i.getMenuPagesInfo(s);return{attachableMenus:p,menuItems:w(M,m,d?"membersAction":void 0)(c),attachedMenuId:s,hasCustomMenus:_,isMobile:g,isMembersMenu:d}},(e,t)=>{const n=e(R),a=f.createMenuApi(n),o=v(n),{selectedComponent:i,compData:r,style:l}=t,{connect:s,addDropdown:c,replaceMenuItems:d,moveToDropdown:p}=a,_=I.cleanId(r.menuRef||t.menuId),A=i[0],N=t=>e(P(t));return{attach:e=>s(e,A),openLinkPanel:e=>{let{initialTab:t,link:a,defaultLinkType:i,onSubmit:r}=e;const l=b(n).filter(e=>!e.hidePage||o.isDynamicPage(e.id));n.openLinkPanel({visibleSections:{[S.NO_LINK]:!1},defaultLinkType:i,initialTabToDisplay:t,link:a,showAllPopups:!0,pages:l,callback:r})},createDropdown:()=>(e(T.showEditMenuNotification(_)),c(_,u.translate(g.TRANSLATIONS_MAP.FOOTER.ADD_FOLDER.NAMES.default))),openMenuSetsPanel:()=>{e(O(E.MENU_SETS_MANAGE_PANEL_NAME,{top:l.top+72,left:l.left+-12},!0))},addLink:t=>{const n=a.getNewLinkLabel(t,x);return e(T.showEditMenuNotification(_)),a.addItem(_,{link:t,label:n})},linkItem:(t,n)=>(e(T.showEditMenuNotification(_)),a.linkItem(_,t,n)),openDropdownArticle:()=>N(m.MENU_PANEL.CREATE_DROPDOWN),openLinkArticle:()=>N(m.MENU_PANEL.CREATE_LINK),openShowMenuItemsArticle:()=>N(m.MENU_PANEL.SHOW_MENU_ITEMS_FROM),openCreateMenuFromMobileArticle:()=>N(m.MENU_PANEL.MOBILE_CREATE_MENU),onDrop:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L.on;const{items:o}=a.getMenu(_),i=t&&M.findItem(o,t);if(!i)return void d(_,[...M.removeFromTree(o,e.id),e]);let r;switch(n){case L.on:p(_,e.id,t);break;case L.after:r=M.removeFromTree(o,e.id),r=M.insertAfter(r,t,e),d(_,r);break;case L.before:r=M.removeFromTree(o,e.id),r=M.insertBefore(r,t,e),d(_,r)}}}}),N)(C)}.apply(t,a))||(e.exports=o)},266:function(e,t){e.exports=m},267:function(e,t,n){var a,o;a=[n,t,n(0),n(6),n(7),n(14),n(2),n(135),n(154),n(264)],void 0===(o=function(e,t,n,a,o,i,r,l,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a),o=n.__importDefault(o),i=n.__importStar(i);const{linkTypeValidators:{isPageLink:c}}=r.link;t.showEditMenuNotification=e=>(t,n,r)=>{let{editorAPI:u}=r;if(!o.default.editorPlugins.userPreferences.selectors.getSiteUserPreferences("menu.editMenuSetNotificationShown")(n())){if(l.createMenuApi(u).getMenuComponentsByMenuId(e).length>1){t(o.default.editorPlugins.userPreferences.actions.setSiteUserPreferences("menu.editMenuSetNotificationShown",!0));const e=()=>t(o.default.editorPlugins.panels.actions.openHelpCenter(i.MENU_PANEL.EDIT_MENU_SET_NOTIFICATION));t(o.default.editorPlugins.notifications.actions.showUserActionNotification({message:s.TRANSLATIONS_MAP.NOTIFICATIONS.EDIT_MENU.description,title:s.TRANSLATIONS_MAP.NOTIFICATIONS.EDIT_MENU.description,type:a.default.NOTIFICATIONS.TYPES.INFO,link:{caption:s.TRANSLATIONS_MAP.NOTIFICATIONS.EDIT_MENU.linkTitle,onNotificationLinkClick:e}}))}}};t.showRenameMenuItemNotification=(e,n)=>(r,m,d)=>{let{editorAPI:p}=d;if(((e,t)=>{const{link:n}=t;if(o.default.editorPlugins.userPreferences.selectors.getSiteUserPreferences("menu.renamePageFromMenuNotificationShown")(e.store.getState())||!c(n))return!1;const a=l.createMenuApi(e);return a.getAll().filter(e=>a.hasConnectedComponents(e.id)).filter(e=>u.findItem(e.items,e=>{const{item:t}=e;return c(t.link)&&t.link.pageId===n.pageId})).length>1})(p,n)){r(o.default.editorPlugins.userPreferences.actions.setSiteUserPreferences("menu.renamePageFromMenuNotificationShown",!0));const e=()=>r(o.default.editorPlugins.panels.actions.openHelpCenter(i.MENU_PANEL.RENAME_PAGE_IN_MENU_NOTIFICATION));r(o.default.editorPlugins.notifications.actions.showUserActionNotification({message:s.TRANSLATIONS_MAP.NOTIFICATIONS.RENAME_PAGE.description,title:s.TRANSLATIONS_MAP.NOTIFICATIONS.RENAME_PAGE.description,type:a.default.NOTIFICATIONS.TYPES.INFO,link:{caption:s.TRANSLATIONS_MAP.NOTIFICATIONS.RENAME_PAGE.linkTitle,onNotificationLinkClick:e}}))}else r(t.showEditMenuNotification(e))}}.apply(t,a))||(e.exports=o)},268:function(e,t,n){var a,o;function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a=[n,t,n(2),n(269)],void 0===(o=function(e,t,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const{linkTypeValidators:{isPageLink:o}}=n.link;t.createPagesApi=e=>{const{dsRead:t,dsActions:n}=e;return{getPageById:t=>e.dsRead.pages.data.get(t),getAllPages:()=>t.pages.getPagesData(),isDynamicPage:e=>Boolean(t.routers.getRouterDataForPageIfExist(e)),getHomePageId:()=>t.homePage.get(),rename(a,r){const l=this.getPageById(a);return r&&l.title!==r?i(e,{pageData:l,newLabel:r}).then(i=>{e.pages.data.update(l.id,i),((e,a)=>{const i="#".concat(e),r=(e,t)=>{t.forEach(t=>{o(t.link)&&t.link.pageId===i&&n.menu.updateItem(e,t.id,{label:a}),r(e,t.items)})};t.menu.getAll().forEach(e=>r(e.id,e.items))})(a,r)}):Promise.resolve()}}};const i=(e,t)=>{let{newLabel:o,pageData:i}=t;const l={title:o},s=((e,t)=>{const{urlFormat:{isSlash:a},isSitePublished:o}=e.dsRead.generalInfo;return!a()||!o()||t===n.translate("Pages_Menu_Add_New_Page")})(e,i.title);if(i.isPopup||!s)return Promise.resolve(l);const u=e.dsRead.generalInfo.urlFormat.isSlash()?e.pages.data.pageUriSEO.convertPageNameToUrl:a.convertPageNameToUrl,c=u(o);return c?Promise.resolve(r({},l,{pageUriSEO:c})):new Promise(e=>{n.googleTranslate(o,(function(t){e(t)}))}).then(e=>{const t=u(e);return t?r({},l,{pageUriSEO:t,translationData:r({},i.translationData,{uriSEOTranslated:!0})}):l})}}.apply(t,a))||(e.exports=o)},269:function(e,t,n){var a,o;a=[n,t,n(0),n(2)],void 0===(o=function(e,t,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importStar(a),t.convertPageNameToUrl=e=>{const t=e.replace(/\s/g,"-");return a.validate.byInvalidCharacters(a.validationExpressions.invalidUrlCharacters)(t)?t.toLowerCase():"blank"}}.apply(t,a))||(e.exports=o)},3:function(e,t){e.exports=a},459:function(e,t){e.exports=d},6:function(e,t){e.exports=o},7:function(e,t){e.exports=i},8:function(e,t){e.exports=r}})}));
//# sourceMappingURL=menu.min.js.map