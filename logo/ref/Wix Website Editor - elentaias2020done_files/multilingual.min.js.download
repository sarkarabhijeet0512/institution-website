define("multilingual",["tslib","lodash","util","react","prop-types","constants","stateManagement","wix-base-ui","baseUI","helpIds","panels","addPanel","requirejs","higherOrderComponents"],(function(e,a,t,n,l,u,i,o,s,r,d,g,p,c){return function(e){var a={};function t(n){if(a[n])return a[n].exports;var l=a[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,t),l.l=!0,l.exports}return t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var l in e)t.d(n,l,function(a){return e[a]}.bind(null,l));return n},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p="",t(t.s=1869)}({0:function(a,t){a.exports=e},1:function(e,t){e.exports=a},14:function(e,a){e.exports=r},1869:function(e,a,t){var n,l;n=[t,a,t(0),t(1870)],void 0===(l=function(e,a,t,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),n=t.__importDefault(n);const l="multilingual.panels.multilingualManagePanel";a.panelName=l;const u={title:"ML_MANAGER_TITLE",subtitle:"ML_MANAGER_SUBTITLE"};a.panelOptions=u,a.openMultilingualManagePanel=function(e){e.panelManager.openPanel(l,u)};const i={multilingualManagePanel:n.default};a.panels=i}.apply(a,n))||(e.exports=l)},1870:function(e,a,t){var n,l;n=[t,a,t(0),t(38),t(6),t(20),t(4),t(1),t(1871),t(41),t(2),t(7),t(3),t(19),t(9),t(8),t(14)],void 0===(l=function(e,a,t,n,l,u,i,o,s,r,d,g,p,c,f,m,h){"use strict";n=t.__importDefault(n),l=t.__importDefault(l),u=t.__importDefault(u),i=t.__importDefault(i),o=t.__importDefault(o),s=t.__importDefault(s),r=t.__importDefault(r),d=t.__importStar(d),g=t.__importDefault(g),p=t.__importDefault(p),c=t.__importStar(c),f=t.__importStar(f),m=t.__importDefault(m),h=t.__importStar(h);const{MULTILINGUAL_LOAD_STOP:L}=g.default.multilingual.actionTypes,{LANGUAGE_STATUSES:E,linguistDefId:_}=l.default.MULTILINGUAL,{mapStateToProps:S,mapDispatchToProps:b}=s.default;class T extends p.default.Component{constructor(e,a){super(e,a),this.addComponentToHeader=()=>{const e=u.default.sections.getSections().menu.languageSelectorSection.props.items[0];this.props.addLanguageSelectorToSiteHeader(e)},this.getKeyboardShortcuts=()=>({enter(){this.onNext()},esc(){this.onClose()}}),this.isPublic=e=>e.status===E.ACTIVE,this.togglePublic=e=>{const a=e.status===E.ACTIVE?E.INACTIVE:E.ACTIVE;this.props.updateLanguageStatus(e.languageCode,a)},this.getLangLabel=e=>o.default.isUndefined(e)||e&&!e.languageCode?"NO_LANGUAGE":"".concat(e.name," (").concat(e.languageCode.toUpperCase(),")"),this.onOriginalLanguageEdit=()=>{this.setState({isEditingOriginalLanguage:!0})},this.areSupportedLanguagesLoaded=()=>!!this.props.supportedLanguages.length,this.onInitialOriginalLanguageChange=e=>{this.setState({originalLanguage:e})},this.addNewLanguage=()=>{this.setState({isAddingNewLanguage:!0})},this.onAddLanguage=e=>this.props.addLanguage(o.default.assign({},e,{locale:e.defaultLocale})).then(()=>{this.setState({isAddingNewLanguage:!1})}),this.removeLanguage=e=>this.props.updateLanguageStatus(e.languageCode,E.DELETED),this.enableMultilingual=()=>{const e=this.state.originalLanguage;return this.props.initializeLanguages(o.default.assign({},e,{locale:e.defaultLocale})).then(e=>{e.type!==L||e.error||this.setState({shouldAddElement:!0,isMultilingual:!0})})},this.onClose=()=>{this.props.closePanelByName(this.props.panelName)},this.onConfirm=()=>{this.onClose()},this.onNext=()=>{this.state.isMultilingual?this.onClose():this.state.originalLanguage&&this.enableMultilingual()},!e.loading.isLoading&&o.default.isEmpty(e.supportedLanguages)&&e.initMultilingualPlatformApp().then(a=>{let[t]=a;t&&(e.originalLanguage&&e.originalLanguage.languageCode?n.default(["tpa"],a=>{a.superApps.openDashboardUrl(_,{state:"",widgetless:!0,title:null,origin:"gfpp_languageSelector",onClose:()=>{e.updateMultilingual(),this.onClose()},shouldNotCloseOnBlur:!1,isBareMode:!1},{type:"constants.BI.type.GFPP_MANAGE"}),d.fedopsLogger.interactionStarted(d.fedopsLogger.INTERACTIONS.BM_MULTILINGUAL)}):e.sendOpenOnboardingEvent())}).catch(()=>{e.resetSupportedLanguages(),this.onClose()}),this.state={originalLanguage:e.originalLanguage,isAddingNewLanguage:!1,shouldAddElement:!1,isMultilingual:e.isEnabled}}componentDidUpdate(e){e.tpaMlState!==this.props.tpaMlState&&(this.addComponentToHeader(),d.fedopsLogger.interactionEnded(d.fedopsLogger.INTERACTIONS.ONBOARDING_MULTILINGUAL),this.props.updateMultilingual().then(()=>{this.props.openLanguageSelector()}))}componentWillUnmount(){this.state.shouldAddElement&&this.addComponentToHeader()}render(){return this.areSupportedLanguagesLoaded()?(()=>{const e=d.translate;return p.default.createElement("div",{key:"multilingual-manager-panel"},this.props.isEnabled?p.default.createElement(c.frames.focusPanelFrame,{key:"multilingual-manage-panel",title:e("Manage_Languages_Title"),helpId:h.LAYOUT.LANGUAGE_SELECTOR_MANAGE,panelName:this.props.panelName,className:"multilingual-manage-panel"},p.default.createElement("div",{className:"content"},p.default.createElement("div",{className:"original-language-container"},p.default.createElement(m.default.TextLabel,{shouldTranslate:!1,value:"Main Language"}),p.default.createElement(m.default.RichText,null,p.default.createElement(m.default.TextLabel,{value:this.getLangLabel(this.props.originalLanguage),type:"T03",shouldTranslate:!1}))),p.default.createElement(f.sectionDividerLabeled,{label:"Additional Languages",shouldTranslate:!1}),p.default.createElement(m.default.CustomScroll,{flex:"1"},o.default.map(this.props.nonDeletedTranslationLanguages,(e,a)=>p.default.createElement("div",{key:a},p.default.createElement("div",{className:"composite-action-set-horizontal"},p.default.createElement(m.default.RichText,null,p.default.createElement(m.default.TextLabel,{value:this.getLangLabel(e),type:"T03",shouldTranslate:!1})),p.default.createElement(m.default.Tooltip,{content:"Manage_Languages_Site_Delete_Tooltip"},p.default.createElement(m.default.Button,{onClick:()=>{this.removeLanguage(e)},className:"btn-delete btn-sm"},p.default.createElement(f.symbol,{name:"delete"}))),p.default.createElement(m.default.Tooltip,{content:"Manage_Languages_Site_Show_Language_Tooltip"},p.default.createElement(m.default.ToggleSwitch,{value:this.isPublic(e),onChange:()=>this.togglePublic(e),className:"lang-toggle"}))),p.default.createElement("hr",{className:"divider-short"}))),this.state.isAddingNewLanguage?p.default.createElement("div",{key:"new-language-add-section"},p.default.createElement(m.default.Composites.DropDownLabeled,null,p.default.createElement(m.default.TextLabel,{value:"Language",shouldTranslate:!1}),p.default.createElement(m.default.DropDown,{shouldTranslate:!1,placeholder:e("Manage_Languages_Site_Languages_Choose_Language"),openOnSelected:!0,onChange:this.onAddLanguage},o.default.map(this.props.availableLanguages,(e,a)=>p.default.createElement(m.default.DropDownOption,{shouldTranslate:!1,key:a,value:e,label:this.getLangLabel(e)})))),p.default.createElement("hr",{className:"divider-long"})):null,this.state.isAddingNewLanguage?null:p.default.createElement(m.default.Composites.ButtonLeft,{key:"new-language-button"},p.default.createElement(m.default.Button,{onClick:this.addNewLanguage,className:"btn-text"},e("Manage_Languages_New_Language"))))),p.default.createElement(m.default.Composites.ActionSetHorizontal,null,p.default.createElement(m.default.Button,{onClick:this.onConfirm,className:"btn-md"},e("Notification_Box_Save_Button")))):null,this.props.isEnabled?null:p.default.createElement(c.frames.focusPanelFrame,{key:"multilingual-init-panel",shouldHideHeader:!0,isSingleInstance:this.props.isSingleInstance,panelName:this.props.panelName,shouldNotCloseOnBlur:this.props.shouldNotCloseOnBlur,className:"multilingual-init-panel"},p.default.createElement("div",{className:"popup-template-panel"},p.default.createElement("div",{className:"panel-header dark"},p.default.createElement(m.default.HelpButton,null),p.default.createElement(m.default.CloseButton,{onClick:this.onClose}),p.default.createElement("h1",null,"Welcome to Multilingual"),p.default.createElement("h3",null,"Start adding languages to your site."),p.default.createElement("div",{className:"image"},p.default.createElement(f.symbol,{key:"symbol",name:"onlineStoreManager",className:"popup-symbol"}))),p.default.createElement("div",{className:"content"},p.default.createElement("div",{className:"panel-text"},p.default.createElement(m.default.Composites.DropDownLabeled,null,p.default.createElement(m.default.TextLabel,{shouldTranslate:!1,value:"What's the main language of your site?"}),p.default.createElement(m.default.DropDown,{value:this.state.originalLanguage,shouldTranslate:!1,placeholder:e("ML_MANAGER_CHOOSE_LANGUAGE"),openOnSelected:!0,onChange:this.onInitialOriginalLanguageChange},o.default.map(this.props.availableLanguages,(e,a)=>p.default.createElement(m.default.DropDownOption,{shouldTranslate:!1,key:a,value:e,label:this.getLangLabel(e)})))))),p.default.createElement(m.default.Composites.ActionSetHorizontalSpaced,null,p.default.createElement(m.default.Button,{onClick:this.onClose,className:"secondary btn-md"},p.default.createElement("span",null,e("Notification_Box_Cancel_Button"))),p.default.createElement(m.default.Button,{disabled:!this.state.originalLanguage,onClick:this.enableMultilingual,className:"btn-md"},p.default.createElement("span",null,e("Notification_Box_Next_Button")))))))})():null}}T.displayName="multilingualManagePanel",T.propTypes={title:i.default.string,subtitle:i.default.string,panelName:i.default.string,supportedLanguages:i.default.arrayOf(i.default.object),translationLanguages:i.default.arrayOf(i.default.object),nonDeletedTranslationLanguages:i.default.arrayOf(i.default.object),activeTranslationLanguages:i.default.arrayOf(i.default.object),originalLanguage:i.default.object,isEnabled:i.default.bool,availableLanguages:i.default.arrayOf(i.default.object),choicesForOriginalLanguages:i.default.arrayOf(i.default.object),loading:i.default.shape({isLoading:i.default.bool,trigger:i.default.string}),addLanguage:i.default.func,loadSupportedLanguages:i.default.func.isRequired,updateMultilingual:i.default.func.isRequired,initMultilingualPlatformApp:i.default.func.isRequired,initializeLanguages:i.default.func.isRequired,addLanguageSelectorToSiteHeader:i.default.func.isRequired,closePanelByName:i.default.func.isRequired,updateLanguageStatus:i.default.func.isRequired,resetSupportedLanguages:i.default.func.isRequired,tpaMlState:i.default.object,sendOpenOnboardingEvent:i.default.func.isRequired,openLanguageSelector:i.default.func.isRequired};const N=o.default.flow(d.hoc.renderWhenMutated,d.hoc.connect(d.hoc.STORES.STATE_AND_DS,S,b),r.default.noUpdateOnMouseMove)(T);return N.pure=T,N}.apply(a,n))||(e.exports=l)},1871:function(e,a,t){var n,l;n=[t,a,t(0),t(6),t(1),t(7)],void 0===(l=function(e,a,t,n,l,u){"use strict";n=t.__importDefault(n),l=t.__importDefault(l),u=t.__importDefault(u);const{actions:i,selectors:o}=u.default.multilingual,{closePanelByName:s}=u.default.panels.actions,{addLanguageThunk:r,loadSupportedLanguagesThunk:d,initializeLanguagesThunk:g,updateLanguageStatusThunk:p,addLanguageSelectorToSiteHeaderThunk:c,openLanguageSelectorThunk:f,loadLanguagesThunk:m,initializeAppThunk:h,sendOpenOnboardingEventThunk:L,loadSupportedLanguagesSuccess:E}=i,{linguistDefId:_}=n.default.MULTILINGUAL;return{mapStateToProps:e=>{let{state:a,dsRead:t}=e;const{language:n}=t,i=o.supportedLanguages(a),s=o.loading(a),r=n.original.get(),d=n.get(),g=l.default.differenceBy(i,d,"languageCode"),p=u.default.editorPlugins.appsStore.selectors.getAppStore(a,_);let c;return c=r.languageCode?l.default.differenceBy(g,[r],"languageCode"):g,{isEnabled:n.multilingual.isEnabled(),nonDeletedTranslationLanguages:d,choicesForOriginalLanguages:g,supportedLanguages:i,availableLanguages:c,originalLanguage:r,loading:s,tpaMlState:p}},mapDispatchToProps:e=>({addLanguage:a=>e(r(a)),updateMultilingual:()=>e(m()),initMultilingualPlatformApp:()=>e(h()),loadSupportedLanguages:()=>e(d()),resetSupportedLanguages:()=>e(E([])),updateLanguageStatus:(a,t)=>e(p(a,t)),initializeLanguages:(a,t)=>e(g(a,t)),closePanelByName:(a,t)=>e(s(a,t)),addLanguageSelectorToSiteHeader:a=>e(c(a)),sendOpenOnboardingEvent:a=>e(L(a)),openLanguageSelector:()=>e(f())})}}.apply(a,n))||(e.exports=l)},19:function(e,a){e.exports=d},2:function(e,a){e.exports=t},20:function(e,a){e.exports=g},3:function(e,a){e.exports=n},38:function(e,a){e.exports=p},4:function(e,a){e.exports=l},41:function(e,a){e.exports=c},6:function(e,a){e.exports=u},7:function(e,a){e.exports=i},8:function(e,a){e.exports=o},9:function(e,a){e.exports=s}})}));
//# sourceMappingURL=multilingual.min.js.map