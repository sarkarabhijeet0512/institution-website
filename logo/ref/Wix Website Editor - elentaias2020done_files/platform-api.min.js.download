!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("lodash"));else if("function"==typeof define&&define.amd)define(["lodash"],t);else{var n="object"==typeof exports?t(require("lodash")):t(e._);for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(window,function(e){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=27)}([function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.promiseApplied=function(e,t){return new Promise(function(n){e.waitForChangesApplied(function(){return n(t)})})}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.navigateTo=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),r=n(1);t.navigateTo=function(e,t,n,i,a){var p=i.pageRef,u=i.pageLink,s=o.default.get(p,"id")||u;if(s)return e.pages.navigateTo(s),(0,r.promiseApplied)(e,a)}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={getVisualFocus:function(e){return e.accessibility.visualFocus.get()},setVisualFocus:function(e,t,n,o){return e.accessibility.visualFocus.set(o)},getAutoDomReorder:function(e){return e.accessibility.autoDomReorder.get()},setAutoDomReorder:function(e,t,n,o){return e.accessibility.autoDomReorder.set(o)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={get:function(e,t,n,{componentRef:o}){return e.responsiveLayout.get(o)},update:function(e,t,n,{componentRef:o,responsiveLayout:r}){e.responsiveLayout.update(o,r)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={hiddenComponents:{show:function(e,t,n,o){var r=o.componentRef,i=e.pages.getFocusedPageId();e.mobile.hiddenComponents.show(r.id,i)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(0));function r(e){return{name:e.name,fullPath:e.location,isDirectory:e.directory}}t.default={listChildren:function(e,t,n,i){var a=e.wixCode.fileSystem,p=a.getVirtualDescriptor(i.path,!0);return a.getChildren(p).then(function(e){return o.default.map(e,r)})},readFile:function(e,t,n,o){var r=e.wixCode.fileSystem,i=r.getVirtualDescriptor(o.path,!1);return r.readFile(i)},writeFile:function(e,t,n,o){var r=e.wixCode.fileSystem,i=r.getVirtualDescriptor(o.path,!1);return r.writeFile(i,o.content)},deleteFile:function(e,t,n,o){var r=e.wixCode.fileSystem,i=r.getVirtualDescriptor(o.path,!1);return r.deleteItem(i)},flush:function(e){return e.wixCode.fileSystem.flush()},getViewerInfo:function(e){return e.wixCode.fileSystem.getViewerInfo()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(0));function r(e,t,n,r){return new Promise(function(n,i){var a=o.default.clone(r);o.default.get(r,"appDefinitionId")?e.tpa.app.isInstalled(r.appDefinitionId)?i(new Error("Application already installed.")):e.tpa.appMarket.getDataAsync(r.appDefinitionId).then(function(p){p&&!p.error?"Wix"===p.by?(a.callback=function(a){if(a.onError)i(new Error(a.onError));else if(t=e.tpa.app.getDataByAppDefId(r.appDefinitionId),a.page){var p=e.pages.data.get(a.page.id);n({instanceId:o.default.get(t,"instanceId"),pageRef:a.page,pageUriSEO:o.default.get(p,"pageUriSEO"),title:o.default.get(p,"title")})}else n({instanceId:o.default.get(t,"instanceId")})},e.tpa.app.add(r.appDefinitionId,a)):i(new Error("Can't add a non Wix application")):i(new Error("Application with "+r.appDefinitionId+" appDefinitionId do not exist."))}):i(new Error("options must contain appDefinitionId"))})}t.default={isAppSectionInstalled:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.sectionId,a=r.appDefinitionId;return new Promise(function(n,r){if(i){var p=t.applicationId;if(a){var u=e.tpa.app.getDataByAppDefId(a);p=o.default.get(u,"applicationId")}n(e.tpa.section.isSectionInstalledByTpaPageId(p,i))}else r(new Error("options must contain sectionId"))})},isApplicationInstalled:function(e,t,n){var o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).appDefinitionId;return new Promise(function(t,n){o?t(e.tpa.app.isInstalled(o)):n(new Error("options must contain appDefinitionId"))})},setStyleParams:function(e,t,n,r){return new Promise(function(n,i){if(r&&r.compRef)if(r&&r.styleParams&&o.default.isArray(r.styleParams)){var a=(e.components.data.get(r.compRef)||{}).appDefinitionId;a?a===t.appDefinitionId?e.tpa.style.setStyleParam(r.compRef.id,r.styleParams,function(){return n()}):i("It is not allowed to set style params for other applications, application "+t.appDefinitionId+" cannot set applications "+a+" components style params"):i("could not find component data for the given component ref")}else i("options must include styleParams property and styleParams must be an array");else i("options must include compRef property")})},getStyleParams:function(e,t,n,o){return new Promise(function(n,r){if(o&&o.compRef){var i=(e.components.data.get(o.compRef)||{}).appDefinitionId;i?i===t.appDefinitionId?n((e.tpa.style.get(o.compRef.id)||{}).style):r("It is not allowed to get the style params from other applications, application "+t.appDefinitionId+" cannot get applications "+i+" components style params"):r("could not find component data for the given component ref")}else r("options must include compRef property")})},add:{application:r,component:function(e,t,n,r){return new Promise(function(n,i){var a=o.default.clone(r);if(o.default.get(r,"componentType")){if(r.appDefinitionId||(a.appDefinitionId=t.appDefinitionId),"WIDGET"===r.componentType){if(!o.default.isObject(r.widget))return void i(new Error("options must contain a widget object"));a.widget.tpaWidgetId=r.widget.widgetId}else if("PAGE"===r.componentType){if(!o.default.isObject(r.page))return void i(new Error("options must contain a page object"));if(r.page.isHidden&&!o.default.isBoolean(r.page.isHidden))return void i(new Error("isHidden param should be of type boolean"))}a.callback=function(t){if(t.onError)i(new Error(t.onError));else if("WIDGET"===r.componentType)n({compId:t.comp.id});else{var a=e.pages.data.get(t.page.id);n({compId:t.sectionId,pageRef:t.page,pageUriSEO:o.default.get(a,"pageUriSEO"),title:o.default.get(a,"title")})}},e.tpa.comp.add(a)}else i(new Error("options must contain componentType"))})}},app:{getDataByAppDefId:function(e,t,n,o){return e.tpa.app.getDataByAppDefId(o)},getAllCompsByApplicationId:function(e,t,n,o){return e.tpa.app.getAllCompsByApplicationId(o)},refreshApp:function(e,t){var n=e.tpa.app.getAllCompsByApplicationId(t.applicationId);return e.tpa.app.refreshApp(n)},delete:function(e,t){return new Promise(function(n){e.tpa.app.delete(t.applicationId),e.waitForChangesApplied(n)})},add:r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={colors:{getAll:function(e){return e.theme.colors.getAll()}},fonts:{getMap:function(e){return e.theme.fonts.getMap()}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={getCustomNoPermissionsPageId:function(e){return e.siteMembers.getCustomNoPermissionsPageId()},setCustomNoPermissionsPageId:function(e,t,n,o){return e.siteMembers.setCustomNoPermissionsPageId(o)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={getFooter:function(e){return e.siteSegments.getFooter()},getHeader:function(e){return e.siteSegments.getHeader()},getPagesContainer:function(e){return e.siteSegments.getPagesContainer()},getSiteStructure:function(e){return e.siteSegments.getSiteStructure()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(0));function r(e,t,n,r){var i=r.routerRef,a=e.routers.get.byRef(i);if(a&&t.appDefinitionId===a.appDefinitionId)return{id:a.id,prefix:a.prefix,config:a.config,pages:(0,o.default)(a.pages).invertBy().map(function(t,n){return{pageRef:e.pages.getReference(n),pageRoles:t}}).value()}}function i(e,t,n,o){var r=o.prefix,i=t.appDefinitionId,a=e.routers.getRouterRef.byPrefix(r);if(!a)return a;var p=e.routers.get.byRef(a);return p&&p.appDefinitionId===i?a:void 0}t.default={add:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.prefix,i=o.config,a=o.group;return new Promise(function(n){var o={appDefinitionId:t.appDefinitionId,prefix:r,config:i};a&&(o.group=a),n(e.routers.add(o))})},remove:function(e,t,n,o){var r=o.routerRef,i=e.routers.get.byRef(r);i&&i.appDefinitionId===t.appDefinitionId&&e.routers.remove(r)},get:r,getAll:function(e,t,n){var a=t.appDefinitionId;return o.default.map(e.routers.get.byApp(a),function(n){var o=n.prefix,a=i(e,t,0,{prefix:o});return r(e,t,0,{routerRef:a})})},update:function(e,t,n,o){var r=o.routerRef,i=o.prefix,a=o.config,p=e.routers.get.byRef(r);p&&p.appDefinitionId===t.appDefinitionId&&e.routers.update(r,{prefix:i,config:a})},getByPage:function(e,t,n,o){var r=o.pageRef,i=t.appDefinitionId,a=e.routers.getRouterRef.byPage(r);if(!a)return a;var p=e.routers.get.byRef(a);return p&&p.appDefinitionId===i?a:void 0},getByPrefix:i,isValidPrefix:function(e,t,n,o){var r=o.prefix;return e.routers.isValidPrefix(t.applicationId,r)},pages:{add:function(e,t,n,o){var r=o.routerRef,i=o.pageTitle,a=o.pageRoles;return new Promise(function(n){var o=e.routers.get.byRef(r);o&&o.appDefinitionId===t.appDefinitionId||n(),n(e.routers.pages.add(r,i,a))})},delete:function(e,t,n,o){var r=o.routerRef,i=o.pageRef;return new Promise(function(n,o){var a=e.routers.get.byRef(r);a&&a.appDefinitionId===t.appDefinitionId?(e.pages.remove(i.id),n()):o()})},connect:function(e,t,n,o){var r=o.routerRef,i=o.pageRef,a=o.pageRoles,p=e.routers.get.byRef(r);p&&p.appDefinitionId===t.appDefinitionId&&e.routers.pages.connect(r,i,a)},disconnect:function(e,t,n,o){var r=o.routerRef,i=o.pageRef,a=t.appDefinitionId,p=e.routers.get.byRef(r);p&&p.appDefinitionId===a&&e.routers.pages.disconnect(r,i)},move:function(e,t,n,o){var r=o.fromRouterRef,i=o.toRouterRef,a=o.pageRef,p=t.appDefinitionId,u=e.routers.get.byRef(r),s=e.routers.get.byRef(i);u&&s&&s.appDefinitionId===p&&u.appDefinitionId===p&&e.routers.pages.move(a,r,i)},listConnectablePages:function(e){return e.routers.pages.listConnectablePages()}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={create:function(e,t,n,o){var r=o.groupName,i=e.pagesGroup.create({groupName:r,appId:t.applicationId});return Promise.resolve(i)},addPageToPagesGroup:function(e,t,n,o){var r=o.pagesGroupPointer,i=o.pageId;e.pagesGroup.addPageToPagesGroup(r,i)},getById:function(e,t,n,o){var r=o.pagesGroupId;return e.pagesGroup.getById(r)},getByGroupName:function(e,t,n,o){var r=o.groupName;return e.pagesGroup.getByGroupName(r)},getAll:function(e,t){return e.pagesGroup.getAll(t.applicationId)},remove:function(e,t,n,o){var r=o.pagesGroupPointer;e.pagesGroup.remove(r)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getApplicationPopups=t.isPopupOpened=t.close=t.open=t.addPopup=void 0;var o=n(3),r=function(e){return e&&e.__esModule?e:{default:e}}(n(0));t.addPopup=function(e,t,n,r){var i=r.title,a=r.definition,p=e.pages.popupPages.add(i,a);return(0,o.navigateTo)(e,t,n,{pageRef:p},p)},t.open=function(e,t,n,o){var i=o.popupRef,a=r.default.get(i,"id");a&&e.pages.popupPages.open(a)},t.close=function(e){e.pages.popupPages.close()},t.isPopupOpened=function(e){return e.pages.popupPages.isPopupOpened()},t.getApplicationPopups=function(e,t){var n=t.appDefinitionId;return n?e.pages.popupPages.getDataList().filter(function(e){return e.managingAppDefId===n}):[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=n(16);function i(e,t,n,o){var r=o.pageRef;return e.pages.data.get(r.id)}t.default={navigateTo:o.navigateTo,setState:function(e,t,n,o){var r=o.state;e.platform.pages.setState(r)},getCurrent:function(e){return e.pages.getReference(e.pages.getFocusedPageId())},getPrimary:function(e){return e.pages.getReference(e.pages.getPrimaryPageId())},getHomePage:function(e){var t=e.homePage.get();return e.components.get.byId(t)},add:function(e,t,n,r){var i=r.title,a=r.definition,p=r.shouldAddMenuItem,u=e.pages.add(i,a,p);return(0,o.navigateTo)(e,t,n,{pageRef:u},u)},getPageData:i,rename:function(e,t,n,o){var r=o.pageRef,i=o.title;return e.pages.data.update(r.id,{title:i})},data:{get:i,getAll:function(e){return e.pages.getPagesData()},update:function(e,t,n,o){var r=o.pageRef,i=o.data;e.pages.data.update(r.id,i)}},pageUriSEO:{convertPageNameToUrl:function(e,t,n,o){var r=o.title;return e.pages.data.pageUriSEO.convertPageNameToUrl(r)}},serialize:function(e,t,n,o){var r=o.pageRef,i=o.maintainIdentifiers,a=void 0!==i&&i;return e.pages.serialize(r.id,a)},permissions:{hasPassword:function(e,t,n,o){var r=o.pageRef;return e.pages.permissions.hasPassword(r.id)},updatePagePassword:function(e,t,n,o){var r=o.pageRef,i=o.plainPassword;e.pages.permissions.updatePassword(r.id,i)},removePagePassword:function(e,t,n,o){var r=o.pageRef;e.pages.permissions.removePassword(r.id)},duplicatePagePassword:function(e,t,n,o){var r=o.destinationPageRef,i=o.sourcePageRef;return new Promise(function(t,n){e.pages.permissions.duplicatePagePassword(r.id,i.id,t,n)})},duplicateGroupsPermissions:function(){return new Promise(function(e){e()})}},remove:function(e,t,n,o){var r=o.pageRef;return new Promise(function(n,o){var i=e.pages.data.get(r.id);i||o("page with id '"+r.id+"' doesn't exist"),t.appDefinitionId!==i.managingAppDefId&&o("page with id '"+r.id+"' can not be deleted. page is not managed by this application"),e.pages.getCurrentPage().id===r.id&&o("It is not allowed to delete current page ("+r.id+"), please navigate to another page");var a=e.homePage.get();r.id===a&&o("It is not allowed to delete homePage ("+r.id+"), please set a new page as homePage and try again"),i.tpaApplicationId&&o("It is not allowed to delete a section page '("+r.id+")'");try{e.pages.remove(r.id)}catch(e){o(e)}n()})},getApplicationPages:function(e,t){var n=t.appDefinitionId;return n?e.pages.getPagesData().filter(function(e){return e.managingAppDefId===n}):[]},popupPages:{add:r.addPopup,open:r.open,close:r.close,isPopupOpened:r.isPopupOpened,getApplicationPopups:r.getApplicationPopups}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(0));t.default={create:function(e,t,n,r){var i=r.menuData,a=r.customId,p=o.default.assign({appId:t.applicationId},i);return e.menu.create(p,a)},connect:function(e,t,n,o){var r=o.menuCompPointer,i=o.menuId;e.menu.connect(r,i)},update:function(e,t,n,o){var r=o.menuId,i=o.menuData;e.menu.update(r,i)},remove:function(e,t,n,o){var r=o.menuId;e.menu.remove(r)},addItem:function(e,t,n,o){var r=o.menuId,i=o.menuItem;e.menu.addItem(r,i)},getById:function(e,t,n,o){var r=o.menuId;return e.menu.getById(r)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1);t.default={add:function(e,t,n,r){var i=r.languageCode;return e.language.add(i),(0,o.promiseApplied)(e)},current:{set:function(e,t,n,r){var i=r.languageCode;return e.language.current.set(i),(0,o.promiseApplied)(e)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(0));t.default={getSiteId:function(e){return e.generalInfo.getSiteId()},getMetaSiteId:function(e){return e.generalInfo.getMetaSiteId()},getPublicUrl:function(e){return e.generalInfo.getPublicUrl()},isSitePublished:function(e){return e.generalInfo.isSitePublished()},getLanguage:function(e){return e.generalInfo.getLanguage()},getRegionalLanguage:function(e){return e.generalInfo.getRegionalLanguage()},isSiteSaved:function(e){return!e.generalInfo.isFirstSave()},isHttpsEnabled:function(e){return e.generalInfo.isHttpsEnabled()},getAppInstance:function(e,t){var n="wix-code"===t.appDefinitionId?e.wixCode.getClientSpec().applicationId:t.applicationId;return e.tpa.app.getData(n).instance},getCurrency:function(e){return e.generalInfo.getCurrency()},getUserId:function(e){return e.generalInfo.getUserInfo().userId},getUserInfo:function(e){return e.generalInfo.getUserInfo()},getVendorProductId:function(e,t,n,r){var i=o.default.get(r,"appDefinitionId"),a=i?e.platform.getAppDataByAppDefId(i):e.platform.getAppDataByApplicationId(t.applicationId);return o.default.get(a,"vendorProductId")},getRegion:function(e){return e.generalInfo.getLocale()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={add:function(e,t,n,o){var r=o.label;return new Promise(function(t){return e.waitForChangesApplied(function(){e.history.add(r),t()})})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={getFontsOptions:function(e){return e.fonts.getFontsOptions()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(0));var r="platform.components.AppController",i="platform.components.AppWidget",a="masterPage",p={SITE_HEADER:!0,SITE_FOOTER:!0};var u=function(e,t){return(0,o.default)(t).thru(e.components.getAncestors).reverse().tail().map("id").head()};function s(e,t,n){var o=n?n.id:null;return e.components.getAllComponents(o,function(n){return function(e){return e===r||e===i}(e.components.getType(n))&&e.components.data.get(n).applicationId===t.appDefinitionId})}function f(e,t,n){var r=s(e,t,n),i=(0,o.default)(r).map(e.components.refComponents.getTemplateCompPointer).compact().keyBy("id").value();return(0,o.default)(r).reject(function(e){var t=e.id;return i[t]}).map(function(e){return{controllerRef:e}}).value()}function c(e,t,n,o){var r=o.controllerRef;return e.platform.controllers.connections.getControllerConnections(r)}t.default={listControllers:function(e,t,n){var o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).pageRef;return f(e,t,void 0===o?e.pages.getFocusedPage():o)},listAllControllers:function(e,t){return f(e,t)},listConnectableControllers:function(e,t,n,r){var f=r.componentRef,c=e.components.getPage(f),d=s(e,t,c),l=u(e,f);return(0,o.default)(d).filter(function(t){return function(e,t,n,o){var r=e.components.getPage(o);if(r.id===a){var i=u(e,o);return!(i&&!p[i])||n===i}return t===r.id}(e,c.id,l,t)}).filter(function(t){return function(e,t,n){return e.components.getType(n)!==i||e.components.isDescendantOfComp(t,n)}(e,f,t)}).map(function(e){return{controllerRef:e}}).value()},getControllerConnections:c,listControllerConnections:c,listConnections:function(e,t,n,r){var i=r.componentRef,a=e.platform.controllers.connections.get(i);return o.default.reject(a,{type:"WixCodeConnectionItem"})},listConnectedComponents:function(e,t,n,o){var r=o.controllerRef;return e.platform.controllers.connections.getConnectedComponents(r)},connect:function(e,t,n,o){var r=o.connectToRef,i=o.controllerRef,a=o.role,p=o.connectionConfig,u=o.isPrimary;return e.platform.controllers.connections.connect(r,i,a,p,u),{connectToRef:r,controllerRef:i,role:a}},disconnect:function(e,t,n,o){var r=o.connectToRef,i=o.controllerRef,a=o.role;return e.platform.controllers.connections.disconnect(r,i,a)},getData:function(e,t,n,r){var i=r.controllerRef,a=e.platform.controllers.settings.get(i);return{type:o.default.get(e.components.data.get(i),"controllerType"),config:a,displayName:e.platform.controllers.getName(i)}},saveConfiguration:function(e,t,n,o){var r=o.controllerRef,i=o.config;return e.platform.controllers.settings.set(r,i)},setDisplayName:function(e,t,n,o){var r=o.controllerRef,i=o.name;return e.platform.controllers.setName(r,i)},setState:function(e,t,n,o){var r=o.state;return e.platform.controllers.setState(r)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(0));t.default={removeAllOverrides:function(e,t,n,o){var r=o.componentRef;return new Promise(function(n,o){"wysiwyg.viewer.components.RefComponent"!==e.components.getType(r)&&o("This method remove overrides only for a refComponent."),e.components.data.get(r).appDefinitionId!==t.appDefinitionId&&o("The component with id '"+r.id+"' doesn't belong to this app.");try{e.components.refComponents.removeAllOverrides(r)}catch(e){o(e)}n()})},openReferredComponent:function(e,t,n,o){var r=o.componentRef;return new Promise(function(n,o){"wysiwyg.viewer.components.RefComponent"!==e.components.getType(r)&&o("This method only opens a refComponent."),e.components.data.get(r).appDefinitionId!==t.appDefinitionId&&o("The component with id '"+r.id+"' doesn't belong to this app.");try{e.components.refComponents.openReferredComponent(r)}catch(e){o(e)}n()})},closeWidgetToReferredComponent:function(e,t,n,o){var r=o.componentRef;return new Promise(function(n,o){"platform.components.AppWidget"!==e.components.getType(r)&&o("This method closes only appWidget"),e.components.data.get(r).appDefinitionId!==t.appDefinitionId&&o("The component with id '"+r.id+"' doesn't belong to this app.");try{n(e.components.refComponents.closeWidgetToReferredComponent(r))}catch(e){o(e)}})},getAllAppRefComponents:function(e,t){return e.components.getAllComponentsFromFull().filter(function(n){var o=e.components.data.get(n)||{};return"WidgetRef"===o.type&&o.appDefinitionId===t.appDefinitionId})},isRefComponentCollapsed:function(e,t,n,r){var i=r.componentRef;return"COLLAPSED"===o.default.get(e.components.properties.get(i),"ghost")},getCollapsedRefComponents:function(e,t,n,r){var i=r.componentRef;return new Promise(function(n,r){"wysiwyg.viewer.components.RefComponent"!==e.components.getType(i)&&r("This method get collapsed components only for a refComponent."),e.components.data.get(i).appDefinitionId!==t.appDefinitionId&&r("The component with id '"+i.id+"' doesn't belong to this app.");try{var a=e.components.refComponents.getAllGhostRefComponentsPrimaryConnection(i);n(o.default.map(a,function(t,n){return{componentRef:e.components.get.byId(n),role:t.role}}))}catch(e){r(e)}})},collapseRefComponent:function(e,t,n,o){var r=o.componentRef;return new Promise(function(n,o){if(!e.components.refComponents.isReferredComponent(r))return o("The component with id '"+r.id+"' isn't a referred component.");var i=e.components.refComponents.getRefHostCompPointer(r);if(e.components.data.get(i).appDefinitionId!==t.appDefinitionId)return o("The component with id '"+r.id+"' doesn't belong to this app.");try{e.components.remove(r)}catch(e){return o(e)}n()})},getTemplateComponent:function(e,t,n,o){var r=o.componentRef;return e.components.refComponents.getTemplateCompPointer(r)},expandRefComponent:function(e,t,n,o){var r=o.componentRef;return new Promise(function(n,o){if(!e.components.refComponents.isReferredComponent(r))return o("The component with id '"+r.id+"' isn't a referred component.");var i=e.components.refComponents.getRefHostCompPointer(r);if(e.components.data.get(i).appDefinitionId!==t.appDefinitionId)return o("The component with id '"+r.id+"' doesn't belong to this app.");try{e.components.refComponents.unGhostifyComponent(r)}catch(e){return o(e)}n()})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(0)),r=n(1),i=a(n(24));function a(e){return e&&e.__esModule?e:{default:e}}t.default={add:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.componentDefinition,a=r.pageRef,p=r.customId;return new Promise(function(t,n){o.default.has(i,"componentType")||n(new Error("componentDefinition must contain componentType"));var r=e.components.buildDefaultComponentStructure(i.componentType);o.default.merge(r,i),t(e.components.add(a,r,p))})},remove:function(e,t,n,o){var r=o.componentRef;e.viewMode.get()===e.viewMode.VIEW_MODES.MOBILE?e.mobile.hiddenComponents.hide(r):e.components.remove(r)},get:function(e,t,n,r){var i=r.componentRefs,a=r.properties,p=void 0===a?[]:a,u=o.default.compact(o.default.isArray(i)?i:[i]);return o.default.transform(u,function(t,n){var r={componentRef:n},i=!p.includes("components"),a=e.components.serialize(n,null,i);o.default.assign(r,o.default.pick(a,p)),o.default.includes(p,"sdkType")&&(r.sdkType=e.wixCode.getCompSdkType(n)),o.default.includes(p,"connections")&&(r.connections=e.platform.controllers.connections.get(n)),o.default.includes(p,"style")&&(r.style=e.components.style.get(n)),t.push(r)},[])},serialize:function(e,t,n,o){var r=o.componentRef,i=o.maintainIdentifiers,a=void 0!==i&&i;return e.components.serialize(r,null,!1,a)},getAllComponents:function(e){return e.components.getAllComponents()},getPage:function(e,t,n,o){var r=o.componentRef;return e.components.getPage(r)},getById:function(e,t,n,o){var r=o.id;return e.components.get.byId(r)},getChildren:function(e,t,n,o){var r=o.componentRef,i=o.recursive,a=void 0!==i&&i;return e.components.getChildren(r,a)},getAncestors:function(e,t,n,o){var r=o.componentRef;return e.components.getAncestors(r)},getType:function(e,t,n,o){var r=o.componentRef;return e.components.getType(r)},behaviors:{getRuntimeState:function(e,t,n,o){var r=o.componentRef;return e.components.behaviors.getRuntimeState(r)},execute:function(e,t,n,o){var i=o.componentRef,a=o.behaviorName,p=o.behaviorParams;return e.components.behaviors.execute(i,a,p),(0,r.promiseApplied)(e)}},properties:{get:function(e,t,n,o){var r=o.componentRef;return e.components.properties.get(r)},update:function(e,t,n,o){var r=o.componentRef,i=o.props;e.components.properties.update(r,i)}},data:{get:function(e,t,n,o){var r=o.componentRef;return e.components.data.get(r)},update:function(e,t,n,o){var r=o.componentRef,i=o.data;e.components.data.update(r,i)}},layout:{get:function(e,t,n,o){var r=o.componentRef;return e.components.layout.get(r)},update:function(e,t,n,o){var r=o.componentRef,i=o.layout;e.components.layout.update(r,i)}},style:{get:function(e,t,n,o){var r=o.componentRef;return e.components.style.get(r)},update:function(e,t,n,o){var r=o.componentRef,i=o.style;e.components.style.setCustom(r,null,i)},updateFull:function(e,t,n,o){var r=o.componentRef,i=o.style;e.components.style.update(r,i)}},design:{get:function(e,t,n,o){var r=o.componentRef;return e.components.design.get(r)},update:function(e,t,n,o){var r=o.componentRef,i=o.designItem,a=o.retainCharas;e.components.design.update(r,i,a)}},modes:{showComponentOnlyOnPagesGroup:function(e,t,n,o){var r=o.componentPointer,i=o.componentRef,a=void 0===i?r:i,p=o.pagesGroupPointer;e.components.modes.showComponentOnlyOnPagesGroup(a,p)},activateComponentMode:function(e,t,n,o){var r=o.componentRef,i=o.modeId;e.components.modes.activateComponentMode(r,i)},applyCurrentToAllModes:function(e,t,n,o){var r=o.componentRef;e.components.modes.applyCurrentToAllModes(r)},getModes:function(e,t,n,o){var r=o.componentRef;return e.components.modes.getModes(r)}},arrangement:{moveToIndex:function(e,t,n,o){var r=o.componentRef,i=o.index;return e.components.arrangement.moveToIndex(r,i)}},refComponents:i.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),r=n(1);t.default={install:function(e,t,n,r){var i=r.appDefinitionId,a=r.originInfo,p=r.editorType;return new Promise(function(n,r){if(i){var u={appDefinitionId:o.default.get(t,"appDefinitionId")},s=a?o.default.assign({},a,u):u;e.platform.provision(i,{origin:{initiator:"APP",type:p,info:s}}).then(n,r)}else r(new Error("options must contain appDefinitionId"))})},registerToCustomEvents:function(e,t,n,o){var r=o.eventTypes;return e.platform.registerAppToCustomEvents(t.applicationId,r)},appStudioWidgets:{changeVariation:function(e,t,n,o){var r=o.componentRef,i=o.variationId;return new Promise(function(t){e.appStudioWidgets.changeVariation(r,i,t)})},addWidget:function(e,t,n,o){var r=o.containerRef,i=o.widgetId,a=o.variationId,p=o.layout,u=o.installationType;return new Promise(function(n,o){e.appStudioWidgets.addWidget(t.appDefinitionId,i,{containerRef:r,variationId:a,layout:p,installationType:u,onSuccess:n,onError:o})})}},sessionState:{update:function(e,t,n,o){var i=o.stateMap;return e.platform.sessionState.update(i),(0,r.promiseApplied)(e)}},livePreview:{refresh:function(e,t,n,o){var r=o.source,i=o.shouldFetchData;return e.platform.livePreview.refresh({apps:[t.appDefinitionId],source:r||"EditorSDK",shouldFetchData:i})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.accessibility=t.responsiveLayout=t.mobile=t.vfs=t.tpa=t.theme=t.fonts=t.siteMembers=t.siteSegments=t.routers=t.pagesGroup=t.pages=t.menu=t.language=t.info=t.history=t.controllers=t.components=t.application=t.save=t.waitForChangesApplied=void 0;var o=C(n(26)),r=C(n(25)),i=C(n(23)),a=C(n(22)),p=C(n(21)),u=C(n(20)),s=C(n(19)),f=C(n(18)),c=C(n(17)),d=C(n(15)),l=C(n(14)),g=C(n(13)),m=C(n(12)),v=C(n(11)),y=C(n(10)),I=C(n(9)),P=C(n(8)),R=C(n(7)),h=C(n(6));function C(e){return e&&e.__esModule?e:{default:e}}t.waitForChangesApplied=function(e,t){return e.waitForChangesApplied(t)},t.save=function(e){return new Promise(function(t,n){e.save(function(){return t()},function(e){return n(e)})})},t.application=o.default,t.components=r.default,t.controllers=i.default,t.history=p.default,t.info=u.default,t.language=s.default,t.menu=f.default,t.pages=c.default,t.pagesGroup=d.default,t.routers=l.default,t.siteSegments=g.default,t.siteMembers=m.default,t.fonts=a.default,t.theme=v.default,t.tpa=y.default,t.vfs=I.default,t.mobile=P.default,t.responsiveLayout=R.default,t.accessibility=h.default}])});
//# sourceMappingURL=platform-api.min.js.map