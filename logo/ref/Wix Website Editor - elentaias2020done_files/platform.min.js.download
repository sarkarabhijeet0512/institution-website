define("platform",["tslib","lodash","util","react","prop-types","create-react-class","constants","stateManagement","wix-base-ui","baseUI","core","coreBi","experiment","addPanelDataConsts","santa-core-utils","panels","zepto","platformEvents","requirejs","gfppData","notifications","pmrpc","host-worker-init"],(function(e,t,n,o,a,i,r,l,s,p,d,c,u,f,m,g,_,P,A,D,I,T,S){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2065)}({0:function(t,n){t.exports=e},1:function(e,n){e.exports=t},11:function(e,t){e.exports=d},119:function(e,t,n){var o,a;o=[n,t,n(0),n(6)],void 0===(a=function(e,t,n,o){"use strict";return{EDITOR_API_NS:"editorAPI",PLATFORM_PANEL:"PLATFORM_PANEL",PLATFORM_ON_EVENT:"PLATFORM_ON_EVENT",PLATFORM_SDK_ALIVE:"PLATFORM_SDK_ALIVE",PLATFORM_SDK_READY:"PLATFORM_SDK_READY",CONTROLLER_COMPONENT_TYPES:["platform.components.AppController","platform.components.AppWidget"],TPA_WIDGET_TYPE_TEMPLATE:{qname:{prefix:"$w",shortName:"IFrame"},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",tagName:"",members:null,events:null,baseTypes:{},inheritanceChain:null},EVENTS:{controllerSettingsButtonClicked:"controllerSettingsButtonClicked",componentConnectButtonClicked:"componentConnectButtonClicked",createCollectionButtonClicked:"openCreateNewCollection",addExternalDbDriverClicked:"addExternalDbDriverClicked",editExternalDbDriverClicked:"editExternalDbDriverClicked",removeExternalDbDriverClicked:"removeExternalDbDriverClicked",formBuilderAppClicked:"formBuilderAppClicked",enableDataModeClicked:"enableDataModeClicked",addDynamicPageClicked:"addDynamicPageClicked",openAddPreset:"openAddPreset"},panelTypes:{CHANGE_VARIATIONS:"platformPanels.changeVariationsPanel",COMPONENT_PANEL:"platformPanels.componentPanel",FULL_STAGE:"platformPanels.fullStagePanel",MODAL:"platformPanels.modalPanel",TOOL:"platformPanels.toolPanel",DOCKED:"platformPanels.sidePanel",DASHBOARD:"platformPanels.dashboardPanel"},NATIVE_PANELS:{settings:"settingsPanel"},pages:{page_settings:{layout:{type:(o=n.__importDefault(o)).default.PAGE_SETTINGS_TABS.LAYOUT,fallbackType:"Pages_Layouts_Tab_Title"},permissions:{type:o.default.PAGE_SETTINGS_TABS.PERMISSIONS,fallbackType:"Pages_Permissions_Tab_Title"},pageInfo:{type:o.default.PAGE_SETTINGS_TABS.PAGE_INFO},seo:{type:o.default.PAGE_SETTINGS_TABS.SEO}},page_actions:{rename:{title:"Pages_Actions_Page_Rename",type:"Pages_Actions_Page_Rename",icon:"quickActionsRename"},delete:{title:"Pages_Actions_Page_Delete",type:"page_delete",icon:"deleteAction"}}},members:{router_actions:{view_site_members:{title:"Pages_Panel_MemberMenu_SiteMembers_Link",type:"view_site_members",icon:"goToURLAction"},open_signup_settings:{title:"Pages_Panel_MemberMenu_SignupSettings_Link",type:"open_signup_settings",icon:"membersAction"}}},controller:{DEFAULT_STATE:"default"},ORIGIN:{CLASSIC_EDITOR_TYPE:"CLASSIC",INITIATOR:{EDITOR:"EDITOR",APP:"APP"},INFO_TYPE:{ADD_PANEL:"ADD_PANEL",APP_MARKET:"APP_MARKET",APP_PANEL:"APP_PANEL",DEV_MODE_ON:"DEV_MODE_ON",IMPORT_PANEL:"IMPORT_PANEL"}},GFPP:{mainActionNames:{MAIN_ACTION1:"mainAction1",MAIN_ACTION2:"mainAction2",DEPRECATED_MAIN_ACTION:"mainAction"}},PLATFORM_EXTRA_NAMESPACES:{APP_BUILDER:["appBuilder"]}}}.apply(t,o))||(e.exports=a)},12:function(e,t){e.exports=c},13:function(e,t){e.exports=u},16:function(e,t){e.exports=f},17:function(e,t){e.exports=m},19:function(e,t){e.exports=g},2:function(e,t){e.exports=n},2065:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(29),n(13),n(2),n(12),n(2066),n(2069),n(2070),n(2091),n(2092),n(506),n(2094),n(509),n(119),n(276),n(2095),n(2096),n(2097),n(2098),n(2099),n(2100),n(2101),n(507),n(2102),n(7)],void 0===(a=function(e,t,n,o,a,i,r,l,s,p,d,c,u,f,m,g,_,P,A,D,I,T,S,E,h,y,C,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),a=n.__importStar(a),i=n.__importDefault(i),r=n.__importStar(r),l=n.__importStar(l),s=n.__importDefault(s),p=n.__importDefault(p),d=n.__importDefault(d),c=n.__importDefault(c),u=n.__importDefault(u),f=n.__importDefault(f),m=n.__importDefault(m),g=n.__importDefault(g),_=n.__importDefault(_),P=n.__importDefault(P),A=n.__importDefault(A),D=n.__importDefault(D),I=n.__importDefault(I),T=n.__importDefault(T),S=n.__importDefault(S),E=n.__importDefault(E),h=n.__importDefault(h),y=n.__importDefault(y),C=n.__importDefault(C),v=n.__importDefault(v),t.appController=s.default,t.connection=p.default,t.api=d.default,t.platformPostMessageService=c.default,t.platformConnectedGfpp=f.default,t.tokenService=g.default,t.constants=_.default,t.utils=P.default,t.platformNotification=S.default,t.upgradeUtils=y.default;const{notifyApplicationAfterComponentPasted:R,notifyApplicationAfterComponentDuplicated:N}=E.default;function O(e){const t=e.platform.getInstalledEditorApps();o.default.forEach(t,(function(t){e.dsActions.platform.notifyApplication(t.applicationId,a.factory.siteWasPublished())}))}t.init=function(e,t,n){const a=function e(t,n){if(o.default.isFunction(t))return o.default.partial(t,n);if(o.default.isObject(t))return o.default.mapValues(t,(function(t){return e(t,n)}));return t}(d.default,e),f=e.dsRead.platform.getAPIForSDK(a);s.default.init(e,n),p.default.init(t),c.default.init(e,f);const g=P.default.getExtraNamespaces(),D={origin:{type:_.default.ORIGIN.CLASSIC_EDITOR_TYPE}};return e.dsActions.platform.init(a,{extraNamespaces:g},D),m.default.runFlowPlatformApps(e),function(e){const t=()=>v.default.platform.selectors.doesHaveAppsToMeasureLoadTime(e.store.getState()),n=()=>JSON.stringify(e.dsRead.platform.getInstalledEditorApps().reduce((e,t)=>o.default.assign({},e,{[t.appDefinitionId]:!0}),{})),a=()=>{v.default.platform.selectors.hasStartLoadingEditorScriptsBeenReported(e.store.getState())||(e.bi.event(l.events.platform.INIT_START,{app_name:n(),uuid:o.default.get(e.dsRead.generalInfo.getUserInfo(),"userId"),phaseName:"platform",subPhase:"editor-scripts",isTemplate:e.dsRead.generalInfo.isFirstSave()}),e.store.dispatch(v.default.platform.actions.setStartLoadingEditorScriptsReported()))},s=()=>{t()&&!v.default.platform.selectors.hasEditorScriptsLoadedReported(e.store.getState())&&(r.performance.mark("platform init end"),r.performance.measure("platform init measurement","platform init start","platform init end"),e.bi.event(l.events.platform.INIT_END,{app_name:n(),uuid:o.default.get(e.dsRead.generalInfo.getUserInfo(),"userId"),phaseName:"platform",subPhase:"editor-scripts",is_template:e.dsRead.generalInfo.isFirstSave(),intervalLoadTime:Math.round(r.performance.getMeasure("platform init measurement").duration)}),e.store.dispatch(v.default.platform.actions.setEditorScriptsLoadedReported()))},p=a=>{t()&&(e.store.dispatch(v.default.platform.actions.setAppManifestHasBeenLoaded(a)),!v.default.platform.selectors.hasAllAppManifestsLoadedReported(e.store.getState())&&v.default.platform.selectors.haveAllAppManifestsBeenLoaded(e.store.getState())&&(e.store.dispatch(v.default.platform.actions.setAllAppManifestsLoadedReported()),r.performance.mark("platform app manifests loaded"),r.performance.measure("platform app manifests loaded","platform init start","platform app manifests loaded"),e.bi.event(l.events.platform.INIT_END,{app_name:n(),uuid:o.default.get(e.dsRead.generalInfo.getUserInfo(),"userId"),phaseName:"platform",subPhase:"all",is_template:e.dsRead.generalInfo.isFirstSave(),intervalLoadTime:Math.round(r.performance.getMeasure("platform app manifests loaded").duration)})))};(()=>{const i=e.dsRead.platform.getInstalledEditorApps();e.store.dispatch(v.default.platform.actions.setAppsToMeasureLoadingTime(i)),t()&&!v.default.platform.selectors.hasStartLoadingPlatformBeenReported(e.store.getState())&&(r.performance.mark("platform init start"),e.bi.event(l.events.platform.INIT_START,{app_name:n(),uuid:o.default.get(e.dsRead.generalInfo.getUserInfo(),"userId"),phaseName:"platform",subPhase:"all",isTemplate:e.dsRead.generalInfo.isFirstSave()}),e.store.dispatch(v.default.platform.actions.setStartLoadingPlatformReported()),a())})(),e.dsActions.platform.registerToManifestAdded(()=>e.store.dispatch(v.default.editorPlugins.services.actions.onViewerChanged())),e.dsActions.platform.registerToManifestAdded(()=>e.store.dispatch(v.default.editorPlugins.components.actions.onAppManifestLoaded())),e.dsActions.platform.registerToManifestAdded((t,n)=>(t=>{const n="manifest set for app ".concat(t);r.performance.mark(n);const o="time for manifest app ".concat(t);r.performance.measure(o,"editor ready",n);const a=r.performance.getMeasure(o).duration;e.bi.event(l.events.editor.APP_MANIFEST_LOADED,{ts:Math.round(a),app_id:t})})(n.appDefinitionId)),e.registerSitePublishedCallbacks(o.default.partial(O,e)),e.dsActions.platform.registerToManifestAdded((e,t)=>{p(t)}),e.dsActions.platform.registerToAppsCompleted(()=>{s()}),e.registerAfterPasteComponentCallback(R),e.registerAfterDuplicateComponentCallback(N),e.registerComponentsRemoveHandlerPlugin(A.default.confirmOnOrphanConnections),e.registerComponentsRemoveHandlerPlugin(A.default.resetClipboardIfCopiedComponentDescendsFromDeletedWidget),e.registerComponentsRemoveHandlerPlugin(A.default.openAddElementsPanelIfNeeded);const d=o.default.partial(c.default.onSetAppPublicAPI,e);return e.dsActions.platform.registerToPublicApiSet(d),e.registerCompNamePlugin("platform.components.AppWidget",h.default.create(e)),e.registerCompNamePlugin("platform.components.AppController",h.default.create(e,{considerControllerTypeDisplayName:!0})),new Promise(t=>{i.default.isOpen("se_platform_modal_native_panel")?u.default.createWorkerMessagesAPI().then(n=>{e.store.dispatch(v.default.editorPlugins.rendererPanelsWorkerService.actions.setWorkerMessagesAPI(n)),t()}):t()})}(e)},t.onAddPanelLoaded=function(e){C.default.register(e)},t.onAddPanelUnloaded=function(e){C.default.unregister(e)};const b={appControllerDeleteConfirmationPanel:D.default,warnForDisconnectedComponentsPanel:I.default,appBuilderUpdateTypePanel:T.default};t.panels=b}.apply(t,o))||(e.exports=a)},2066:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(2067),n(2068),n(505)],void 0===(a=function(e,t,n,o,a,i,r){"use strict";function l(e,t){const n=o.default.reduce(t,(function(t,n){return e.components.is.container(n)?t.concat(n,e.components.get.byAncestor(n)):t.concat(n)}),[]);let a;return o.default.some(n,(function(t){const i=e.dsRead.platform.controllers.connections.get(t);return!o.default.isEmpty(i)&&function(t){return a=a||o.default.keyBy(n,"id"),o.default(t).map("controllerRef").some((function(t){const n=t.id;return!a[n]&&e.components.getPage(t).id!==e.pages.getMasterPageId()}))}(i)}))}function s(e,t,n){t=o.default.isArray(t)?t:[t];const a=e.components.isShowOnAllPages(t),i=e.components.isShowOnAllPages(n);function r(t){e.panelManager.openPanel("platform.panels.warnForDisconnectedComponentsPanel",o.default.assign({undo:e.history.undo},t))}a&&!i&&function(e,t){return o.default(t).reduce((function(t,n){return e.components.is.container(n)?t.concat(n,e.components.get.byAncestor(n)):t.concat(n)}),[]).some(t=>"platform.components.AppController"===e.components.getType(t))}(e,t)&&r({controllerComp:!0}),!a&&i&&l(e,t)&&r({connectedComps:!0})}function p(e,t){const n=e.components.data.get(t);e.bi.event(r.default.page_delete_dataset,{app_name:n.applicationId,controller_type:n.controllerType,controller_id:t.id,pageId:e.dsRead.pages.getPrimaryPageId()})}return o=n.__importDefault(o),a=n.__importDefault(a),i=n.__importDefault(i),r=n.__importDefault(r),{init:function(e,t){return a.default.init(t),i.default.init(t),e.registerCannotRemovePlugin("platform.components.AppController",p.bind(null,e)),e.editorEventRegistry.register(e.editorEventRegistry.constants.events.SET_CONTAINER_BEFORE,s),this}}}.apply(t,o))||(e.exports=a)},2067:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(29),n(6),n(505),n(119)],void 0===(a=function(e,t,n,o,a,i,r,l){"use strict";o=n.__importDefault(o),a=n.__importStar(a),i=n.__importDefault(i),r=n.__importDefault(r),l=n.__importDefault(l);const s={dataset:"7f921134-acd3-4771-ac24-33bbeafefb90",router_dataset:"7f921134-acd3-4771-ac24-33bbeafefb90"},p=l.default.GFPP.mainActionNames,d={untranslatable:!0,mainActions:function(e,t){const n=[],a=e.platform.controllers.getStageData(o.default.head(t)),i=o.default.get(a,["gfpp",p.MAIN_ACTION1])?p.MAIN_ACTION1:p.DEPRECATED_MAIN_ACTION,r=o.default.get(a,["gfpp",i]),l=o.default.get(a,["gfpp",p.MAIN_ACTION2]);r&&n.push(c(i,a));l&&n.push(c(p.MAIN_ACTION2,a));return n},presetActions:{help:{helpId(e,t){const n=e.components.data.get(t).controllerType;return s[n]||"3c9b0528-699b-475f-818c-2123885cb11f"}}},enabledActions:[i.default.ROOT_COMPS.GFPP.ACTIONS.HELP]};function c(e,t){const n=function(e,t){const n=o.default.get(t,"gfpp.".concat(e,".label"));return o.default.isNil(n)?"gfpp_mainaction_dataset":n}(e,t);return{label:n,shouldTranslate:"gfpp_mainaction_dataset"===n,onClick:o.default.partial(f,e)}}function u(e,t){const n=o.default.get(t,"gfpp.".concat(e,".actionId"));return o.default.isNil(n)?"gfpp_mainaction_dataset":n}function f(e,t,n){const i=o.default.head(n),l=t.components.data.get(i),s=t.dsRead.platform.controllers.settings.get(i),d=t.dsRead.platform.controllers.getName(i),c=t.platform.controllers.getStageData(o.default.head(n));t.bi.event(r.default.CONTROLLER_GFPP_CLICK,{action_name:u(e,c),app_name:l.applicationId,controller_type:l.controllerType,component_id:i.id,pageId:t.pages.getCurrentPageId()});const f=t.dsRead.platform.getAppDataByAppDefId(l.applicationId),m={controllerRef:i,controllerConfig:s,controllerType:l.controllerType,controllerDisplayName:d,origin:"gfpp"};let g;if(e===p.DEPRECATED_MAIN_ACTION)g=a.factory.controllerSettingsButtonClicked(m);else{const t=o.default.get(c,"gfpp.".concat(e,".actionId"));g=a.factory.controllerGfppClicked(o.default.assign(m,{id:t}))}t.dsActions.platform.notifyApplication(f.applicationId,g)}return{init:function(e){e("AppController",d)}}}.apply(t,o))||(e.exports=a)},2068:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(29),n(7),n(54),n(506),n(507),n(2),n(6)],void 0===(a=function(e,t,n,o,a,i,r,l,s,p,d){"use strict";o=n.__importDefault(o),a=n.__importStar(a),i=n.__importDefault(i),r=n.__importStar(r),l=n.__importDefault(l),s=n.__importDefault(s),p=n.__importStar(p),d=n.__importDefault(d);const{isRefComponent:c}=i.default.editorPlugins.components.selectors,{shouldWidgetHaveAddElements:u}=i.default.editorPlugins.platform.selectors,{isWidgetController:f,getWidgetSchema:m}=p.appStudioUtils,{ACTIONS:g}=d.default.ROOT_COMPS.GFPP;function _(e,t,n){let{presetActions:o}=t;return!!o[n]}function P(e,t){let n;const d=o.default.head(t),[P]=e.components.getChildren(d),A=r.utils.getGfppDataResolver(e,t),D={mainActions:[],enabledActions:[g.ANIMATION],presetActions:{},mobileEnabledActions:[g.ANIMATION,g.HIDE]},I=e.components.data.get(d).applicationId;if(!e.dsRead.platform.hasAppManifest(I))return function(e){o.default.assign(e,{mainActions:[],presetActions:[],enabledActions:[],mobileMainActions:[],mobileEnabledActions:[]})}(D),D;const T=i.default.editorPlugins.mobile.selectors.getDeviceType(e.store.getState());if("desktop"===T){if(u(e,d)){D.enabledActions.push(g.ADD);const t=c(d)?"compPanels.panels.Widget.closeAddElementsPanel":"compPanels.panels.Widget.openAddElementsPanel";D.presetActions[g.ADD]={onClick:()=>{e.store.dispatch(i.default.editorPlugins.panels.actions.openComponentPanel(t,{widgetRef:d}))},isSelected:r.utils.getPanelStateFn(t)}}}const S=o.default.get(e.platform.controllers.getStageData(d),"gfpp");if(S){const t=e.platform.getAppDataByAppDefId(I).applicationId;n=n=>{let{actionId:o}=n;e.platform.notifyApplication(t,a.factory.widgetGfppClicked({id:o,componentRef:d}))};const o=n=>{e.platform.notifyApplication(t,a.factory.globalDesignPresetChanged({preset:n,componentRef:d}))};D.presetActions=D.presetActions||{},D.presetActions.upgrade=s.default.getPremiumGfpp(I),"desktop"===T?(D.enabledActions=D.enabledActions||[],D.enabledActions.push(g.UPGRADE,g.HELP),D.mainActions=l.default.getMainActionsFromApp(T,S,D,n),D.enabledActions=l.default.generateEnabledActions(T,S,A(D.enabledActions))):(D.mobileMainActions=l.default.getMainActionsFromApp(T,S,D,n),D.mobileEnabledActions.push(g.HELP),D.mobileEnabledActions=l.default.generateEnabledActions(T,S,A(D.mobileEnabledActions))),D.presetActionsData=l.default.generateIconButtonsOverride(T,S,D,n,o,d)}return D.additionalCompForGfpp=P,D.mergeGfpp=(a,r)=>{var s,d,c;if(a.presetActions=o.default.assign({},r.presetActions,(s=a.presetActions,o.default.mapValues(s,e=>{const t=e.onClick;if(t){const n=(e,n)=>{const o=e.components.getContainer(n);t(e,[o])};return o.default.defaults({onClick:n},e)}return e}))),S){const s=((e,t)=>{if(p.appStudioUtils.isAppStudio()&&(n=t[0],e.utils.isSameRef(n,p.appStudioUtils.getRootAppWidget(e))))return;var n;const a=m(e,t[0]);return o.default.isEmpty(a.propertiesSchemas)?void 0:{onClick(){e.closeCompPanelIfExists(),e.store.dispatch(i.default.editorPlugins.panels.actions.openComponentPanel("compPanels.panels.Widget.schemaSettingsPanel"))},label:"gfpp_tooltip_settings",automationId:"gfpp-button-settings",shouldTranslate:!0,className:"widget-settings"}})(e,t);let u=[];!s&&f(e,t)&&(u=[g.CONNECT]);const P=o.default(a.enabledActions).concat(o.default.keys(r.presetActions)).filter(e=>!o.default.includes(u,e)).uniq().value();a.enabledActions=l.default.filterEnabledActions(P,T,S),a.presetActions=(d=a.presetActions,c=a.enabledActions,o.default.pick(d,c));const A=l.default.mergeMainActions(r,a.mainActions,T,_,n);a.mainActions=s?o.default.concat([s],A):A}else a.mainActions=o.default(a.mainActions).concat(r.mainActions).compact().slice(0,2).value();return o.default.assign({},a,r)},D}return{init:function(e){e("AppWidget",P)}}}.apply(t,o))||(e.exports=a)},2069:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(17),n(119),n(7)],void 0===(a=function(e,t,n,o,a,i,r){"use strict";o=n.__importDefault(o),a=n.__importDefault(a),i=n.__importDefault(i),r=n.__importDefault(r);const{isConnectedToDataBindingController:l}=r.default.editorPlugins.platform.selectors;function s(e,t){return l(o.default.head(t),e.dsRead)}const p={connect:{isSelected:e=>e.panelManager.findPlatformPanelByType("connect"),isApplied:s,tooltip:"gfpp_component_connect",tooltip_active:"gfpp_component_connected_to_controllers",icon:"connect",rightClickMenuLabel:"PLATFORM_RightClick_Menu_Connect",className:(e,t)=>["gfpp_component_connect",s(e,t)?"connected":""].join(" "),automationId:"gfpp-button-connect",onClick:d,isSupported:(e,t)=>function(e){const{appDefId:t}=e.dsRead.platform.editorApps.DATA_BINDING,n=e.store.getState();return o.default.get(r.default.editorPlugins.appsStore.selectors.getAppStore(n,t),"dataMode",!1)}(e)&&!e.isMobileEditor()&&e.components.is.allowConnectToDB(t)}};function d(e,t){const n=e.dsRead.platform.getInstalledAppsData(),r=1===n.length?o.default.head(n):"multiple application ids provided - TODO",l=o.default.head(t),s=i.default.EVENTS.componentConnectButtonClicked,p={componentRef:l,componentType:e.components.getType(l),componentSdkType:e.wixCode.getCompSdkType(l),origin:"gfpp"};e.dsActions.platform.notifyApplication(r.applicationId,{eventType:s,eventPayload:a.default.objectUtils.cloneDeep(p)})}return{init:function(e){return e(p),this},notifyConnectButtonClicked:d}}.apply(t,o))||(e.exports=a)},2070:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(2071),n(510),n(2073),n(2074),n(2075),n(2076),n(2077),n(2078),n(2079),n(2080),n(2082),n(2083),n(2084),n(2085),n(2086),n(2087),n(2088),n(2089),n(2090)],void 0===(a=function(e,t,n,o,a,i,r,l,s,p,d,c,u,f,m,g,_,P,A,D,I,T,S){"use strict";o=n.__importDefault(o),a=n.__importDefault(a),i=n.__importDefault(i),r=n.__importDefault(r),l=n.__importDefault(l),s=n.__importDefault(s),p=n.__importDefault(p),d=n.__importDefault(d),c=n.__importDefault(c),u=n.__importDefault(u),f=n.__importDefault(f),m=n.__importDefault(m),g=n.__importDefault(g),_=n.__importDefault(_),P=n.__importDefault(P),A=n.__importDefault(A),D=n.__importDefault(D),I=n.__importDefault(I),T=n.__importDefault(T),S=n.__importDefault(S);const E={document:o.default.assign(i.default,{application:A.default,components:p.default,history:c.default,pages:s.default,routers:d.default,tpa:P.default,vfs:l.default}),editor:o.default.assign(a.default,{environment:g.default,ide:u.default,info:m.default,__internal__:D.default,preview:r.default,selection:I.default,userPreferences:_.default,developerMode:T.default,routers:S.default})};return o.default.merge(E,E.document,E.editor,f.default)}.apply(t,o))||(e.exports=a)},2071:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(22),n(508),n(6),n(119),n(276),n(509),n(2072),n(510),n(7),n(13),n(2)],void 0===(a=function(e,t,n,o,a,i,r,l,s,p,d,c,u,f,m){"use strict";o=n.__importDefault(o),a=n.__importDefault(a),i=n.__importStar(i),r=n.__importDefault(r),l=n.__importDefault(l),s=n.__importDefault(s),p=n.__importDefault(p),d=n.__importDefault(d),c=n.__importDefault(c),u=n.__importDefault(u),f=n.__importDefault(f),m=n.__importStar(m);const{openPlatformPanel:g,updateOrOpenPanel:_}=u.default.editorPlugins.panels.actions,P={IMAGE:e=>({uri:e.uri,title:e.title,width:e.width,height:e.height}),DOCUMENT:e=>({uri:e.uri,title:e.title,fileUrl:e.fileUrl}),DEFAULT:e=>e};function A(e,t){t=t||{};const n=e.panelManager.getOpenPanels(),i=o.default.find(n,{type:"platform"});if(i){const e=a.default('[name="'.concat(i.token,'"]'));if(e){const n=e.offset();if(n&&o.default.isNumber(n.top)&&o.default.isNumber(n.left)){if(o.default.isNumber(t.x)&&o.default.isNumber(t.y))return{top:n.top+t.y,left:n.left+t.x};if(o.default.isNumber(t.height)&&o.default.get(i,"props.height")&&o.default.get(i,"props.width"))return{top:n.top+i.props.height/2-t.height/2,left:n.left+i.props.width/2}}}}return{top:"25%",left:"45%"}}function D(e,t,n){const a=e.dsRead.platform.getAppDataByApplicationId(t.applicationId),i=o.default.assign({token:p.default.generatePanelToken(a.appDefinitionId)},n);return n.url&&o.default.assign(i,{url:s.default.getFullApplicationUrl(a,n.url,a.appDefinitionId,a.applicationId)}),f.default.isOpen("se_multilingualHideOnboardingPanel")&&o.default.assign(i,{appDefinitionId:a.appDefinitionId,instanceId:a.instanceId}),i}function I(e,t,n,o,a){e.panelManager.openPanel(n,o,a)}const T=e=>{const t=e.panelManager.getOpenPanels();return!!o.default.find(t,{name:"panels.focusPanels.fakeProgressBarPanel"})};return{openPanel:I,_OpenSiteMembersSettingsPanel:function(e,t,n){e.store.dispatch(_("panels.focusPanels.siteMembersSettingsPanel",n,!0))},openChangeVariationsPanel:function(e,t,n,a){return new Promise((function(n,i){if(!a.presets)return void i(new Error("options must contain presets"));if(o.default.some(a.presets,e=>!e.variationId||!(e.mainImageUrl||e.displayName)))return void i(new Error("Each preset must contain variationId and mainImageUrl or displayName properties"));const s=D(e,t,a);s.applicationId=t.applicationId,e.store.dispatch(g({panelName:l.default.panelTypes.CHANGE_VARIATIONS,panelProps:s,panelMetaData:{resolve:n,frameType:r.default.PANEL_TYPES.COMP,closeAllOtherPanels:!0}}))}))},openComponentPanel:function(e,t,n,o){const a=D(e,t,o);return e.selection.selectComponentByCompRef(o.componentRef),new Promise((function(t){e.store.dispatch(g({panelName:l.default.panelTypes.COMPONENT_PANEL,panelProps:a,panelMetaData:{resolve:t,frameType:r.default.PANEL_TYPES.COMP,closeAllOtherPanels:!0}}))}))},openNativeComponentPanel:function(e,t,n,a){let{componentRef:i,panelSectionsDefinition:r,helpId:s}=a;return new Promise((a,p)=>{const d=l.default.NATIVE_PANELS[n];if(!d)return p(new Error("panelType ".concat(n," unknown")));if(!i)return p(new Error("No componentRef provided"));const c=e.dsRead.platform.controllers.connections.getPrimaryConnection(i),u=c?e.dsRead.components.data.get(c.controllerRef):null;if(!u||u.applicationId!==t.appDefinitionId)return p(new Error("Component ".concat(i.id," is not connected to app ").concat(t.appDefinitionId," by primary connection")));const m=r?{panelSectionsDefinition:r}:{},g=o.default.assign({},{experimentIsOpen:f.default.isOpen,helpId:s},m);e.selection.selectComponentByCompRef(i),e.openComponentPanel(d,g,{panelMetaData:{resolve:a}})})},openModalPanel:function(e,t,n,o){const a=D(e,t,o);return new Promise((function(t){e.store.dispatch(g({panelName:l.default.panelTypes.MODAL,panelProps:a,panelMetaData:{resolve:t}}))}))},openToolPanel:function(e,t,n,a){const i=D(e,t,a),r=l.default.panelTypes.TOOL,s=A(e,a);return o.default.merge(i,s),new Promise((function(t){e.store.dispatch(g({panelName:r,panelProps:i,panelMetaData:{resolve:t}}))}))},openPagePanel:function(e,t,n,a){const i=a.pageRef.id,l=o.default.get(a,"renameEnabled")||!1,s=e.pages.dynamicPages.getDynamicPageActions(i,"pageSettings"),p=o.default.isEmpty(s)?{initialSettingsTabType:r.default.PAGE_SETTINGS_TABS.PAGE_INFO,renameEnabled:l}:{initialSettingsTabType:o.default.head(s).type,renameEnabled:l};e.navigateAndOpenPagesPanel(i,p)},openPagesPanel:function(e,t,n,a){return new Promise((t,n)=>{const i=a.pageRef.id;if(!e.pages.doesPageExist(i))return void n("PageRef does not exist");const r={renameEnabled:o.default.get(a,"renameEnabled"),initialSettingsTabType:o.default.get(a,"initialSettingsTabType")};e.navigateAndOpenPagesPanel(i,r,t)})},canAddStaticPage:function(e){return e.pages.canAddStaticPage()},openFullStagePanel:function(e,t,n,o){const a=D(e,t,o);e.store.dispatch(g({panelName:l.default.panelTypes.FULL_STAGE,panelProps:a,panelMetaData:{frameType:r.default.PANEL_TYPES.FULL_STAGE,closeAllOtherPanels:!0}}))},openLinkPanel:function(e,t,n,a){return new Promise((function(t){const n={link:o.default.get(a,"value",null),visibleSections:o.default.get(a,"visibleSections",null),callback:t,hideLinkTarget:!0,onCancelCallback:t};e.openLinkPanel(n)}))},openSidePanel:function(e,t,n,o){const a=D(e,t,o);return new Promise((function(t){e.store.dispatch(g({panelName:l.default.panelTypes.DOCKED,panelProps:a,panelMetaData:{resolve:t,closeWithUserIntent:!0,frameType:r.default.PANEL_TYPES.DOCKED_PANEL}}))}))},openColorPicker:function(e,t,n,a,i){const r=Object.assign({},{position:{x:-12,y:72},color:"#FFFFFF"},a);let l;const s=new Promise(e=>{l=e});return e.panelManager.openPanel("panels.toolPanels.colorPicker.colorPickerPanel",o.default.merge({value:r.color,onChange:t=>{let n=null,o=null;const a=e.theme.colors.getAll();t.includes("color_")?(n=a[t],o=t):(n=t,o=Object.keys(a).find(e=>a[e]===n)),i({color:n,theme:o,isHover:!1})},onClose:l,enableHistory:!1,palettePresets:e.theme.colors.getColorPresets(),updateSitePalette:t=>e.theme.colors.update(t),previewOnHover:!1},A(e,r.position)),!0),s},openMediaPanel:function(e,t,n,a){return a=o.default.defaults(a||{},{callOnCancel:!0,isMultiSelect:!0,mediaType:"IMAGE"}),new Promise((function(t){e.mediaServices.mediaManager.open(a.mediaType,{multiSelect:a.isMultiSelect,callback:function(n){let i;if(o.default.isEmpty(n))a.callOnCancel&&(i=null);else{o.default.isArray(n)||(n=[n]);const e=o.default.get(P,a.mediaType,P.DEFAULT);i=n.map(e)}t(i),e.mediaServices.setFocusToEditor()}})}))},openHelpPanel:function(e,t,n,o){const a={component:e.selection.getSelectedComponentType(),learn_more:!1,panel_name:"platform"};e.panelManager.openHelpCenter(o.helpId,{origin:"platform"},a)},updatePanelOptions:function(e,t,n,a){const i=function(e,t){return o.default.find(e.panelManager.getOpenPanels(),{token:t})}(e,n);if(!i)return;const r=D(e,t,a);r.token=n,e.panelManager.updatePanelProps(i.name,r)},closePanel:function(e,t,n,o){e.store.dispatch(u.default.editorPlugins.panels.actions.closePlatformPanel(n,o,"apiMethodCall"))},setAppAPI:function(e,t){return e.dsRead.platform.requestAPIFromWorker(t.applicationId).then(e=>{i.api.set(t.applicationId,e)})},save:c.default.save,utils:d.default,showNotification:function(e,t,n,a){let{title:i,message:r,type:l,link:s}=a;if(!o.default.findKey(e.store.getState().notifications,["message",r]))return new Promise(t=>{const n={name:"notifications.editorNotification",onClose:()=>t(),title:i,message:r,type:l,id:o.default.uniqueId("notification-"),shouldTranslate:!1};s&&s.caption&&(n.linkAction={caption:s.caption,onClick:()=>t(!0)}),e.store.dispatch(u.default.editorPlugins.notifications.actions.showTPAUserActionNotification(n))})},showUserActionNotification:function(e,t,n,a){let{title:i,message:r,type:l,link:s}=a;if(!o.default.findKey(e.store.getState().notifications,["message",r]))return new Promise(t=>{const n={name:"notifications.editorNotification",onClose:()=>t(),title:i,message:r,type:l,id:o.default.uniqueId("notification-"),shouldTranslate:!1};s&&s.caption&&(n.linkAction={caption:s.caption,onClick:()=>t(!0)}),e.store.dispatch(u.default.editorPlugins.notifications.actions.showTPAUserActionNotification(n))})},openBillingPage:function(e,t,n){let{premiumIntent:o,referrer:a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=!0;return new Promise(n=>{requirejs(["tpa"],r=>{r.packagePicker.startUpgradeFlow(e,t.appDefinitionId,i,{premiumIntent:o,origin:a,shouldNavigate:!1}),n()})})},updateAppState:(e,t,n)=>{e.store.dispatch(u.default.editorPlugins.appsStore.actions.updateAppsStore(t.appDefinitionId,n))},openDashboardPanel:function(e,t,n){let{closeOtherPanels:a,url:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=m.serviceTopology.businessManagerUrl,s=e.dsRead.generalInfo.getMetaSiteId(),p=m.url.joinURL(r,s,i);return new Promise((function(n){const i=o.default.merge({},{url:m.url.setUrlParam(p,"viewMode","editor"),onClose:()=>n(),isBareMode:!0,width:"100%",height:"100%"},D(e,t,{}));e.store.dispatch(g({panelName:l.default.panelTypes.DASHBOARD,panelProps:i,panelMetaData:{resolve:n,closeAllOtherPanels:a}}))}))},openProgressBar:function(e,t,n,o){if(T(e))return;I(e,0,"panels.focusPanels.progressBarPanel",{title:o.title,progressMax:o.totalSteps,step:o.currentStep,taskDisplayName:o.stepTitle,illustration:o.image,isDone:!1})},updateProgressBar:function(e,t,n,o){if(T(e))return;const a={step:o.currentStep,taskDisplayName:o.stepTitle};e.panelManager.updatePanelProps("panels.focusPanels.progressBarPanel",a)},closeProgressBar:function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(T(e))return;const a=o.isError?{isError:!0}:{isDone:!0};e.panelManager.updatePanelProps("panels.focusPanels.progressBarPanel",a)},openErrorPanel:function(e,t,n,o){return new Promise((function(t){const n={helpId:o.helpId,headerText:o.headerText,shouldShowIllustration:o.shouldShowIllustration,illustration:o.illustration,topDescriptionText:o.topDescriptionText,bottomDescriptionText:o.bottomDescriptionText,secondaryActionText:o.secondaryActionText,mainActionText:o.mainActionText,onPanelClose:t};e.store.dispatch(g({panelName:"platformPanels.platformErrorPanel",panelProps:n}))}))},openConfirmationPanel:function(e,t,n,o){return new Promise((function(t){const n={helpId:o.helpId,headerText:o.headerText,shouldShowIllustration:o.shouldShowIllustration,illustration:o.illustration,descriptionText:o.descriptionText,secondaryActionText:o.secondaryActionText,mainActionText:o.mainActionText,onPanelClose:t};e.store.dispatch(g({panelName:"platformPanels.platformConfirmationPanel",panelProps:n}))}))},openPromotionalPanel:function(e,t,n,o){return new Promise((function(t){const n={helpId:o.helpId,titleText:o.titleText,shouldShowIllustration:o.shouldShowIllustration,illustration:o.illustration,subtitleText:o.subtitleText,contentArray:o.contentArray,KBLinkText:o.KBLinkText,mainActionText:o.mainActionText,onPanelClose:t};e.store.dispatch(g({panelName:"platformPanels.platformPromotionalPanel",panelProps:n}))}))}}}.apply(t,o))||(e.exports=a)},2072:function(e,t,n){var o,a;o=[n,t,n(0),n(2)],void 0===(a=function(e,t,n,o){"use strict";return o=n.__importStar(o),{getLinkAsString:function(e,t,n,a){return o.link.getLinkValueAsString(e,a.link)}}}.apply(t,o))||(e.exports=a)},2073:function(e,t,n){var o;void 0===(o=function(e,t){"use strict";return{navigateTo:function(e,t,n,o){return new Promise((function(t){e.dsActions.platform.pages.navigateTo(o.pageUrl,(function(){e.preview.isInPreviewMode()?t():e.preview.togglePreview(t)}))}))}}}.apply(t,[n,t]))||(e.exports=o)},2074:function(e,t,n){var o,a;o=[n,t,n(0),n(1)],void 0===(a=function(e,t,n,o){"use strict";function a(e){return{name:e.name,fullPath:e.location,isDirectory:e.directory}}return o=n.__importDefault(o),{listChildren:function(e,t,n,i){const r=e.wixCode.fileSystem,l=r.getVirtualDescriptor(i.path,!0);return r.getChildren(l).then((function(e){return o.default.map(e,a)}))},readFile:function(e,t,n,o){const a=e.wixCode.fileSystem,i=a.getVirtualDescriptor(o.path,!1);return a.readFile(i)},writeFile:function(e,t,n,o){const a=e.wixCode.fileSystem,i=a.getVirtualDescriptor(o.path,!1);return a.writeFile(i,o.content)},deleteFile:function(e,t,n,o){const a=e.wixCode.fileSystem,i=a.getVirtualDescriptor(o.path,!1);return a.deleteItem(i)},flush:function(e){return e.wixCode.fileSystem.flush()}}}.apply(t,o))||(e.exports=a)},2075:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(2)],void 0===(a=function(e,t,n,o,a){"use strict";return o=n.__importDefault(o),a=n.__importStar(a),{navigateTo:function(e,t,n,a){const i=o.default.get(a,"pageRef.id"),r=o.default.get(a,"pageLink"),l=i||r;if(l)return new Promise((function(t){e.pages.navigateTo(l,(function(){t()}))}))},rename:function(e,t,n,o){const i=o.pageRef.id,r=a.validate.pageNameValidator(o.title);return r||e.pages.data.update(i,{title:o.title}),r},add:function(e,t,n,o){return new Promise((function(t){const n=e.pages.add(o.title,o.definition,o.shouldAddMenuItem,!0);n?e.pages.navigateTo(n.id,(function(){t(n)})):t(null)}))},remove:function(e,t,n,o){return new Promise((n,a)=>{const{appDefinitionId:i}=t,{pageRef:r,pageToNavigateAfterRemove:l,shouldShowEditorRemovePanel:s}=o,p=e.dsRead.pages.data.get(r.id);return p?i!==p.managingAppDefId?a("page with id '".concat(r.id,"' can not be deleted. page is not managed by this application")):e.dsRead.viewMode.get()===e.dsRead.viewMode.VIEW_MODES.MOBILE?a("page with id '".concat(r.id,"' can not be deleted. deletion is not allowed in mobile view")):void e.pages.remove(r.id,n,()=>a("removed canceled"),{pageToNavigateAfterRemove:l,shouldShowEditorRemovePanel:s}):a("page with id '".concat(r.id,"' doesn't exist"))})},data:{update:function(e,t,n,o){const a=o.pageRef.id;e.pages.data.update(a,o.data)}},permissions:{duplicateGroupsPermissions:function(e,t,n,o){let{sourcePageRef:a,destinationPageRef:i}=o;return new Promise((t,n)=>{e.pages.settings.duplicateGroupsPermissions(a.id,i.id).then(()=>t(),e=>n(e))})}}}}.apply(t,o))||(e.exports=a)},2076:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(7)],void 0===(a=function(e,t,n,o,a){"use strict";return o=n.__importDefault(o),a=n.__importDefault(a),{add:function(e,t,n,a){return new Promise((function(t,n){o.default.isEmpty(a.componentDefinition.componentType)&&n(new Error("componentDefinition must contain componentType"));const i=e.components.buildDefaultComponentStructure(a.componentDefinition.componentType);!function(e,t,n){const a=o.default.get(n,"pageRef.id")||e.dsRead.pages.getFocusedPageId(),i=e.pasteLogic.addContext.getPastePosition(e,t.layout,a);o.default.merge(t.layout,i)}(e,i,a),o.default.merge(i,a.componentDefinition),t(e.components.add(a.pageRef,i,a.customId,void 0,"editorSdk",{showAddToHeaderPanel:a.showAddToHeaderPanel,optionalIndex:a.optionalIndex}))}))},getPage:function(e,t,n,o){return e.components.getPage(o.componentRef)},properties:{get:function(e,t,n,o){return e.components.properties.get(o.componentRef)},update:function(e,t,n,o){e.components.properties.update(o.componentRef,o.props,o.dontAddToUndoRedoStack)}},data:{get:function(e,t,n,o){return e.components.data.get(o.componentRef)},update:function(e,t,n,o){e.components.data.update(o.componentRef,o.data,!0)}},layout:{get:function(e,t,n,o){return e.components.layout.get(o.componentRef)}},refComponents:{openReferredComponent:function(e,t,n,o){let{componentRef:i}=o;return e.store.dispatch(a.default.platform.actions.openReferredComponent(i))},closeWidgetToReferredComponent:function(e,t,n,o){let{componentRef:i}=o;return e.store.dispatch(a.default.platform.actions.closeWidgetToReferredComponent(i))}}}}.apply(t,o))||(e.exports=a)},2077:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(2)],void 0===(a=function(e,t,n,o,a){"use strict";return o=n.__importDefault(o),a=n.__importStar(a),{isValidPrefix:function(e,t,n,i){const r=o.default.get(t,"applicationId"),l=e.dsRead.routers.isValidPrefix(r,i.prefix);if(!l.valid){let e="";switch(l.message){case 1:e="DYNAMIC_PAGES_VALIDATION_PREFIX_CAN_NOT_BE_EMPTY";break;case 2:e="DYNAMIC_PAGES_VALIDATION_PREFIX_IS_TOO_LONG";break;case 3:e="DYNAMIC_PAGES_VALIDATION_PREFIX_IS_DUPLICATE_OF_URISEO";break;case 4:e="DYNAMIC_PAGES_VALIDATION_PREFIX_CONTAINS_INVALID_CHARCTERS";break;case 5:e="DYNAMIC_PAGES_VALIDATION_PREFIX_IS_FORBIDDEN_WORD";break;case 6:e="DYNAMIC_PAGES_VALIDATION_PREFIX_IS_IN_USE_BY_ANOTHER_APPLICATION"}l.message=a.translate(e)}return l},pages:{delete:function(e,t,n,a){return new Promise((function(n,i){const r=o.default.get(t,"appDefinitionId"),l=e.dsRead.routers.get.byRef(a.routerRef);if(!l||l.appDefinitionId!==r)return void i();const s={shouldShowEditorRemovePanel:!1};a.pageToNavigateAfterRemove&&(s.pageToNavigateAfterRemove=a.pageToNavigateAfterRemove),e.pages.remove(a.pageRef.id,(function(){n()}),(function(){i()}),s)}))},connect:function(e,t,n,a){return new Promise((function(n,i){const r=o.default.get(t,"appDefinitionId"),l=e.dsRead.routers.get.byRef(a.routerRef);if(!l)return void i(new Error("the router does not exist"));if(l.appDefinitionId!==r)return void i(new Error("the router does not belong to the app"));const s=e.pages.getFocusedPageId();e.dsActions.routers.pages.connect(a.routerRef,a.pageRef,a.pageRoles),s===a.pageRef.id&&e.pages.navigateTo(a.pageRef.id,n),n()}))}}}}.apply(t,o))||(e.exports=a)},2078:function(e,t,n){var o;void 0===(o=function(e,t){"use strict";return{add:function(e,t,n,o){return new Promise((function(t){e.dsActions.waitForChangesApplied((function(){e.history.add(o.label,null,o.historySnapshotId),t()}))}))}}}.apply(t,[n,t]))||(e.exports=o)},2079:function(e,t,n){var o,a;o=[n,t,n(0),n(1)],void 0===(a=function(e,t,n,o){"use strict";function a(e,t,n,o){return e.wixCode.collectionsTree.navigateToCollection(e,o.name)}return o=n.__importDefault(o),{openFile:function(e,t,n,i){const r=i.path,l=e.wixCode.fileSystem.getRoots().schemas.location;if(function(e,t){return o.default.startsWith(t,e)&&o.default.endsWith(t,".json")}(l,r)){return a(e,0,0,{name:function(e,t){return t.replace(e,"").replace(".json","")}(l,i.path)})}return e.wixCode.fileTree.navigateToFile(e,i.path,o.default.pick(i,["functionName","caretOffset","caretLocation"]))},navigateToCollection:a,treePane:{isOpen:function(e){return e.developerMode.ui.treePane.isOpen()},toggle:function(e){return new Promise((function(t){e.developerMode.ui.treePane.toggle((function(){t()}))}))}}}}.apply(t,o))||(e.exports=a)},2080:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(276),n(2081)],void 0===(a=function(e,t,n,o,a,i){"use strict";o=n.__importDefault(o),a=n.__importDefault(a);const r={appBuilder:(i=n.__importDefault(i)).default};return o.default.pick(r,a.default.getExtraNamespaces())}.apply(t,o))||(e.exports=a)},2081:function(e,t,n){var o,a;o=[n,t,n(0),n(7)],void 0===(a=function(e,t,n,o){"use strict";return o=n.__importDefault(o),{getAppName:function(e){let{store:t}=e;return o.default.applicationStudio.selectors.getAppName(t.getState())},getAppNamespace:function(e){let{store:t}=e;return o.default.applicationStudio.selectors.getNamespace(t.getState())}}}.apply(t,o))||(e.exports=a)},2082:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(7),n(2)],void 0===(a=function(e,t,n,o,a,i){"use strict";o=n.__importDefault(o),a=n.__importDefault(a),i=n.__importStar(i);const{getDeviceType:r}=a.default.editorPlugins.leftBar.selectors;const l=window.mainLoaded||0;function s(){const e=window.location.hostname.match(/editor\.(.*)/);return e?"www.".concat(e[1]):"www.wix.com"}function p(e){return!e.dsRead.generalInfo.isFirstSave()}return{getDashboardUrl:function(e,t,n,a){return new Promise((n,i)=>{const r=o.default.get(a,"appDefinitionId"),l=r||t.appDefinitionId,d=r?o.default.get(e.dsRead.platform.getAppDataByAppDefId(l),"applicationId"):t.applicationId,c=p(e),u=()=>{l===e.dsRead.platform.editorApps.DATA_BINDING.appDefId?n(function(e){return["//",s(),"/my-account/sites/",e.dsRead.generalInfo.getMetaSiteId(),"/simple-app","?app=wixcode","&referralInfo=editor_platform"].join("")}(e)):e.dsRead.tpa.app.isHybrid(d)||e.dsRead.tpa.app.isDashboardAppOnly(d)?n(function(e,t){return["//",s(),"/my-account/sites/",e.dsRead.generalInfo.getMetaSiteId(),"/app/",t,"?referralInfo=editor"].join("")}(e,l)):i("The given appDefinitionId does not have an dashboard URL.")};c?u():e.saveManager.saveInBackground((function(){u()}),i)})},getBusinessManagerUrl:function(e){if(!p(e))throw new Error("Site has never been saved");const t=i.serviceTopology.businessManagerUrl,n=e.dsRead.generalInfo.getMetaSiteId();return i.url.joinURL(t,n)},getEditorSessionId:function(){return i.editorSessionUtil.editorSessionId},getEditorReadyTimestamp:function(){return o.default.now()-l},getEditorMode:function(e){const t=e.store.getState();return r(t)},getEditorReferrer:function(){return window.document.referrer}}}.apply(t,o))||(e.exports=a)},2083:function(e,t,n){var o,a;o=[n,t,n(0),n(2)],void 0===(a=function(e,t,n,o){"use strict";return o=n.__importStar(o),{getLocale:function(){return o.editorModel.languageCode}}}.apply(t,o))||(e.exports=a)},2084:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(17),n(7)],void 0===(a=function(e,t,n,o,a,i){"use strict";return o=n.__importDefault(o),a=n.__importDefault(a),i=n.__importDefault(i),{site:{set:function(e,t,n,a){return new Promise((function(n,r){const l=t.appDefinitionId;l||r(new Error("Illegal appData - application is not registered in clientSpecMap")),e.store.dispatch(i.default.editorPlugins.userPreferences.actions.registerSitePreferencesCallbacks((function(t){t||r(new Error("Site Preferences failed to load")),o.default.forEach(a,(function(t,n){e.store.dispatch(i.default.editorPlugins.userPreferences.actions.setSiteUserPreferences(n,t,l))})),n()})))}))},get:function(e,t,n,r){return new Promise((function(n,l){const s=t.appDefinitionId;s||l(new Error("Illegal appData - application is not registered in clientSpecMap"));const p=o.default.isArray(r)?o.default(r).keyBy().mapValues(o.default.noop).value():r;e.store.dispatch(i.default.editorPlugins.userPreferences.actions.registerSitePreferencesCallbacks((function(t){t||l(new Error("Site Preferences failed to load"));const r=o.default.mapValues(p,(t,n)=>a.default.objectUtils.cloneDeep(i.default.editorPlugins.userPreferences.selectors.getSiteUserPreferences(n,s)(e.store.getState())));n(o.default.defaults(r,p))})))}))}}}}.apply(t,o))||(e.exports=a)},2085:function(e,t,n){var o,a;o=[n,t,n(0),n(1)],void 0===(a=function(e,t,n,o){"use strict";return o=n.__importDefault(o),{add:{application:function(e,t,n,a){return new Promise((function(t,n){o.default.get(a,"appDefinitionId")?e.tpa.addApplication(a.appDefinitionId,a).then((function(e){t(e)})).catch((function(e){n(e)})):n(new Error("options must contain appDefinitionId"))}))},component:function(e,t,n,a){return new Promise((function(n,i){if((a=a||{}).componentType){if(a.appDefinitionId||(a.appDefinitionId=t.appDefinitionId),"WIDGET"===a.componentType){if(!o.default.isObject(a.widget))return void i(new Error("options must contain a widget object"));a.widget.tpaWidgetId=a.widget.widgetId}else if("PAGE"===a.componentType){if(!o.default.isObject(a.page))return void i(new Error("options must contain a page object"));if(a.page.isHidden&&!o.default.isBoolean(a.page.isHidden))return void i(new Error("isHidden param should be of type boolean"))}e.tpa.addComponent(a).then((function(e){n(e)})).catch((function(e){i(e)}))}else i(new Error("options must contain componentType"))}))}},isApplicationInstalled:function(e,t,n,a){return new Promise((function(t,n){if(!o.default.get(a,"appDefinitionId"))return void n(new Error("options must contain appDefinitionId"));t(e.dsRead.tpa.app.isInstalled(a.appDefinitionId))}))},isAppSectionInstalled:function(e,t,n,a){return new Promise((function(n,i){if(!o.default.get(a,"sectionId"))return void i(new Error("options must contain sectionId"));let r=t.applicationId;if(a.appDefinitionId){const t=e.dsRead.tpa.app.getDataByAppDefId(a.appDefinitionId);r=o.default.get(t,"applicationId")}n(e.dsRead.tpa.section.isSectionInstalledByTpaPageId(r,a.sectionId))}))}}}.apply(t,o))||(e.exports=a)},2086:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(2),n(119),n(7)],void 0===(a=function(e,t,n,o,a,i,r){"use strict";o=n.__importDefault(o),a=n.__importStar(a),i=n.__importDefault(i),r=n.__importDefault(r);const{isRefHostType:l}=r.default.components.selectors;return{install:function(e,t,n,r){return a.fedopsLogger.interactionStarted(a.fedopsLogger.INTERACTIONS.INSTALL_APP),new Promise((function(n,l){const s=o.default.get(r,"appDefinitionId");if(!s)return void l(new Error("options must contain appDefinitionId"));if(s===e.platform.editorApps.WIX_CODE.appDefId)return void e.wixCode.provision({onSuccess:n,onError:l});const p=e.tpa.bi.consts.APP.TYPE.PLATFORM_ONLY,d=e.tpa.bi.consts.BI.initiator.PLATFORM,c={type:i.default.ORIGIN.CLASSIC_EDITOR_TYPE,initiator:i.default.ORIGIN.INITIATOR.APP,info:{appDefinitionId:o.default.get(t,"appDefinitionId")}};e.tpa.services.tpaAddAppService.addApp(e,r.appDefinitionId,null,null,p,d,!1,{},{},e=>{o.default.get(e,"success")?(a.fedopsLogger.interactionStarted(a.fedopsLogger.INTERACTIONS.INSTALL_APP),n(e)):(a.ravenUtils.captureError(e,{tags:{appInstallFailed:s},extra:{appData:t,options:r}}),l(e))},c)}))},appStudioWidgets:{changeVariation:function(e,t,n,o){let{componentRef:a,variationId:i,keepOverrides:r}=o;return!l(a,e.dsRead)&&e.selection.deselectComponents(),new Promise((t,n)=>{e.dsActions.appStudioWidgets.changeVariation(a,i,n=>{e.selection.selectComponentByCompRef(n),t(n)},n,{keepOverrides:r})})},addWidget:function(e,t,n,o){let{widgetId:a,variationId:i,containerRef:r,layout:l,installationType:s}=o;return new Promise((n,o)=>{e.dsActions.appStudioWidgets.addWidget(t.appDefinitionId,a,{variationPageId:i,containerRef:r,layout:l,installationType:s,onSuccess:t=>{e.selection.selectComponentByCompRef(t),e.history.add("Add widget"),n(t)},onError:o})})}}}}.apply(t,o))||(e.exports=a)},2087:function(e,t,n){var o,a;o=[n,t,n(0),n(1)],void 0===(a=function(e,t,n,o){"use strict";return o=n.__importDefault(o),{addApp:function(e,t,n){e.wixCode.provision(o.default.noop,o.default.noop),e.dsActions.platform.initApp({appDefinitionId:o.default.get(n,"appDefinitionId"),editorUrl:o.default.get(n,"editorUrl"),viewerUrl:o.default.get(n,"viewerUrl")})}}}.apply(t,o))||(e.exports=a)},2088:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(7)],void 0===(a=function(e,t,n,o,a){"use strict";return o=n.__importDefault(o),a=n.__importDefault(a),{getSelectedComponents:function(e){return e.selection.getSelectedComponents()},deselectComponents:function(e,t,n,a){e.selection.deselectComponents(o.default.get(a,"compsToDeselect",[]))},selectComponentByCompRef:function(e,t,n,a){e.selection.selectComponentByCompRef(o.default.get(a,"compsToSelect",[]))},locateAndHighlightComponentByCompRef:function(e,t,n,o){let{store:i}=e;i.dispatch(a.default.componentLocator.actions.locateComponentAndHighlight(o.compRef,!1))},clearHighlights:function(e){let{store:t}=e;t.dispatch(a.default.editorPlugins.highlights.actions.clearOverlayHighlights())}}}.apply(t,o))||(e.exports=a)},2089:function(e,t,n){var o;void 0===(o=function(e,t){"use strict";return{isEnabled:function(e){return e.developerMode.isEnabled()}}}.apply(t,[n,t]))||(e.exports=o)},2090:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(7)],void 0===(a=function(e,t,n,o,a){"use strict";return o=n.__importDefault(o),a=n.__importDefault(a),{refresh:function(e,t){return new Promise((function(n){const i=o.default.get(t,"appDefinitionId"),r=e.dsRead.pages.getFocusedPageId();e.dsRead.routers.get.byApp(i).find(e=>{let{pages:t}=e;return o.default.find(t,e=>e===r)})&&e.store.dispatch(a.default.dynamicPages.actions.fetchInnerRoutes(r)),n()}))}}}.apply(t,o))||(e.exports=a)},2091:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(508),n(17),n(29),n(119)],void 0===(a=function(e,t,n,o,a,i,r,l){"use strict";return o=n.__importDefault(o),a=n.__importStar(a),i=n.__importDefault(i),r=n.__importStar(r),l=n.__importDefault(l),{init:function(e,t){a.api.set(l.default.EDITOR_API_NS,t)},createPostMessageListener:function(e,t){return function(n){if(n.data.intent===l.default.PLATFORM_PANEL&&n.data.sourcePanel===t)switch(n.data.type){case l.default.PLATFORM_SDK_READY:!function(e,t,n){if(o.default.isUndefined(e))return;t.event.eventPayload=i.default.objectUtils.cloneDeep(t.event.eventPayload),e.postMessage||(e=e.contentWindow);e.postMessage(t,n||"*")}(n.source,{intent:l.default.PLATFORM_ON_EVENT,event:r.factory.startConfiguration(e)});break;default:return}}},onSetAppPublicAPI:function(e,t){let{apiName:n}=t;return e.dsRead.platform.requestAPIFromWorker(n).then(e=>{a.api.set(n,e)})}}}.apply(t,o))||(e.exports=a)},2092:function(e,t,n){var o,a;o=[n,t,n(0),n(2093)],void 0===(a=function(e,t,n,o){"use strict";o=n.__importDefault(o);const{workerMessagesService:a}=o.default;return{createWorkerMessagesAPI:function(){return fetch("https://76897fda-d78f-49dd-bd02-bf9ad52a4f11.dev.wix-code.com/_partials/santa/1.4316.0/node_modules/santa-wix-code/dist/wixcode-worker.js").then(e=>new Response(e.body)).then(e=>e.blob()).then(e=>URL.createObjectURL(e)).then(e=>{const t={sdkSource:"https://static.parastorage.com/services/js-wixcode-sdk/1.242.0/lib/wix.js",namespacesSdkSource:"https://static.parastorage.com/services/wixcode-namespaces/1.3.0/wixcode-namespaces.js",externalComponentsSource:"https://rawgit.com/yotamsha/statics/31a1ae3a8f2688ada5a63ea387dfec9a61d4268c/wixcode-components.min.js",workerProps:{workerUrl:e}},n=a.getAPI();return n.init(t),n})}}}.apply(t,o))||(e.exports=a)},2093:function(e,t){e.exports=S},2094:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(2),n(17)],void 0===(a=function(e,t,n,o,a,i){"use strict";o=n.__importDefault(o),a=n.__importStar(a),i=n.__importDefault(i);return{runFlowPlatformApps:function(e){const t=a.url.getParameterByName("flowAppDefId");let n=a.url.getParameterByName("flowAppParams");try{n&&(n=JSON.parse(n))}catch(e){console.error("Failed to parse flowAppParams. expected a JSON format.",e)}if(t)return i.default.requestsUtil.fetchJson("".concat("https://dev.wix.com/_api/app-service/v1/apps/").concat(t)).then(a=>{e.dsActions.platform.initApp({appDefinitionId:t,appFields:{platform:{editorScriptUrl:o.default.get(a,"components[0].compData.platformComponentData.editorScriptUrl")}}},n)})}}}.apply(t,o))||(e.exports=a)},2095:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(6),n(7)],void 0===(a=function(e,t,n,o,a,i){"use strict";o=n.__importDefault(o),a=n.__importDefault(a),i=n.__importDefault(i);const{shouldWidgetHaveAddElements:r}=i.default.editorPlugins.platform.selectors,{getSessionUserPreferences:l}=i.default.userPreferences.selectors,{setSessionUserPreferences:s}=i.default.userPreferences.actions,{isRefComponent:p}=i.default.editorPlugins.components.selectors;return{confirmOnOrphanConnections:function(e,t,n,a,r){if(function(e,t,n){const a=(n=o.default(n)).filter((function(t){return"platform.components.AppController"===e.components.getType(t)}));if(a.isEmpty())return!1;const i=n.map("id").value();return a.map(t=>e.platform.controllers.connections.getConnectedComponents(t)).some(e=>!o.default(e).map("id").difference(i).isEmpty())}(t,0,a)){const n=o.default.filter(a,e=>"platform.components.AppController"===t.components.getType(e)),l=1===n.length;return e.store.dispatch(i.default.editorPlugins.panels.actions.updateOrOpenPanel("platform.panels.appControllerDeleteConfirmationPanel",{onConfirm:r,isSingleController:l,controllerDisplayName:l?t.platform.controllers.getName(n[0]):""})),!0}return!1},resetClipboardIfCopiedComponentDescendsFromDeletedWidget:function(e,t,n,a){const i=e.clipboard.getItem(),r=o.default.get(i,"value.components",[]),l=o.default.get(i,"value.componentsData",{});if(o.default.isEmpty(r)||o.default.isEmpty(l))return!1;const s=o.default(r).map(e=>{let{_dataId:t}=e;return l[t].appWidgetAncestor}).uniqBy("id").compact().value();return o.default.isEmpty(s)||o.default.intersectionBy(a,s,"id")&&e.clipboard.removeItem(),!1},openAddElementsPanelIfNeeded:function(e,t,n,d,c){const u=o.default(d).map(e=>o.default.get(t.platform.controllers.connections.getPrimaryConnection(e),"controllerRef")).uniqBy("id").compact().value(),f=o.default.find(u,t=>r(e,t)),m=!l(a.default.USER_PREFS.ADD_ELEMENTS.ADD_ELEMENTS_OPENED)(e.store.getState());return!(!f||!m)&&(c().then(()=>{const t=p(f)?"compPanels.panels.Widget.closeAddElementsPanel":"compPanels.panels.Widget.openAddElementsPanel";e.store.dispatch(i.default.editorPlugins.panels.actions.openComponentPanel(t,{widgetRef:f})),e.store.dispatch(s(a.default.USER_PREFS.ADD_ELEMENTS.ADD_ELEMENTS_OPENED,!0))}),!0)}}}.apply(t,o))||(e.exports=a)},2096:function(e,t,n){var o,a;o=[n,t,n(0),n(5),n(4),n(11),n(2),n(3),n(19),n(9)],void 0===(a=function(e,t,n,o,a,i,r,l,s,p){"use strict";return o=n.__importDefault(o),a=n.__importDefault(a),i=n.__importStar(i),r=n.__importStar(r),l=n.__importDefault(l),s=n.__importStar(s),p=n.__importStar(p),o.default({displayName:"appControllerDeleteConfirmationPanel",propTypes:{controllerDisplayName:a.default.string,isSingleController:a.default.bool,onConfirm:a.default.func},mixins:[r.translationMixin,i.mixins.editorAPIMixin],getContentText(){const e=this.props.isSingleController?"PLATFORM_messages_delete_dataset_text":"PLATFORM_messages_multidelete_dataset_text";return this.translateTemplate(e,{appName:"Wix Database"},this.getEditorAPI())},getTitle(){const e=this.props.isSingleController?"PLATFORM_messages_delete_dataset_title":"PLATFORM_messages_multidelete_dataset_title";return this.translateTemplate(e,{appControllerName:this.props.controllerDisplayName},this.getEditorAPI())},render(){return l.default.createElement(s.frames.confirmationPanelFrame,{type:"important",panelName:"platform.panels.appControllerDeleteConfirmationPanel",onConfirm:this.props.onConfirm,confirmLabel:"PLATFORM_messages_delete",cancelLabel:"PLATFORM_messages_cancel_delete",noHelpBtn:!0,panelTitle:this.getTitle()},l.default.createElement("div",{className:"icon"},l.default.createElement(p.symbol,{name:"deleteBlogConfirmationIcon"})),l.default.createElement("div",{className:"content"},l.default.createElement("p",null,this.getContentText())))}})}.apply(t,o))||(e.exports=a)},2097:function(e,t,n){var o,a;o=[n,t,n(0),n(5),n(4),n(2),n(3),n(19),n(9)],void 0===(a=function(e,t,n,o,a,i,r,l,s){"use strict";return o=n.__importDefault(o),a=n.__importDefault(a),i=n.__importStar(i),r=n.__importDefault(r),l=n.__importStar(l),s=n.__importStar(s),o.default({displayName:"warnForDisconnectedComponentsPanel",propTypes:{undo:a.default.func.isRequired,connectedComps:a.default.bool.isRequired},mixins:[i.translationMixin],getTitle(){const e=this.props.connectedComps?"PLATFORM_messages_move_connected_element_title":"PLATFORM_messages_move_connected_dataset_title";return this.translateIfNeeded(e)},render(){return r.default.createElement(l.frames.confirmationPanelFrame,{type:"important",panelName:"platform.panels.warnForDisconnectedComponentsPanel",onCancel:this.props.undo,confirmLabel:"PLATFORM_messages_continue",cancelLabel:"PLATFORM_messages_cancel",shouldCloseByDefaultOnConfirm:!0,panelTitle:this.getTitle()},r.default.createElement("div",{className:"icon"},r.default.createElement(s.symbol,{name:"platformWarning"})),this.props.connectedComps?r.default.createElement("div",{key:"connectedCompsContent",className:"content"},r.default.createElement("p",null,this.translateIfNeeded("PLATFORM_messages_move_connected_element_text_line1")),r.default.createElement("p",null,this.translateIfNeeded("PLATFORM_messages_move_connected_element_text_line2"))):null,this.props.connectedComps?null:r.default.createElement("div",{key:"connectedDatasetContent",className:"content"},r.default.createElement("p",null,this.translateIfNeeded("PLATFORM_messages_move_connected_dataset_text_line1")),r.default.createElement("p",null,this.translateIfNeeded("PLATFORM_messages_move_connected_dataset_text_line2"))))}})}.apply(t,o))||(e.exports=a)},2098:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(5),n(4),n(2),n(7),n(6),n(3),n(19),n(8)],void 0===(a=function(e,t,n,o,a,i,r,l,s,p,d,c){"use strict";o=n.__importDefault(o),a=n.__importDefault(a),i=n.__importDefault(i),r=n.__importStar(r),l=n.__importDefault(l),s=n.__importDefault(s),p=n.__importDefault(p),d=n.__importStar(d),c=n.__importDefault(c);const u=l.default.panels.actions,{MINOR:f,MAJOR:m}=s.default.APP_STUDIO.BUILD_VERSION_TYPES,g=a.default({displayName:"appBuilderUpdateTypePanel",propTypes:{onClose:i.default.func,onUpdate:i.default.func},mixins:[r.translationMixin],getInitialState:()=>({updateType:o.default.toUpper(f)}),onUpdate(){this.props.onClose(),this.props.onUpdate(this.state.updateType)},onCancel(){this.props.onClose(),this.props.onCancel()},openUpdateHelpCenter(){this.props.openHelpCenter("be742601-7900-4fa3-9825-c74972eab4aa",null)},onRadioButtonClick(e){this.setState({updateType:e})},getTitleAndTextOptions:()=>[{value:o.default.toUpper(f),title:"AppStudio_Publish_UpdateType_Type1_Heading",text:"AppStudio_Publish_UpdateType_Type1_Text",shouldTranslate:!0},{value:o.default.toUpper(m),title:"AppStudio_Publish_UpdateType_Type2_Heading",text:"AppStudio_Publish_UpdateType_Type2_Text",shouldTranslate:!0}],render(){return p.default.createElement(d.frames.focusPanelFrame,{shouldHideHeader:!0,panelName:"platform.panels.appBuilderUpdateTypePanel"},p.default.createElement(c.default.Composites.PopupMediumSize,null,p.default.createElement(c.default.Composites.BigPanelHeader,null,p.default.createElement(c.default.PanelHeaderCenteredText,{title:"AppStudio_Publish_UpdateType_Title",subtitle:"AppStudio_Publish_UpdateType_Subtitle",titleType:"T16",shouldTranslate:!0,onHelp:this.openUpdateHelpCenter,onClose:this.onCancel,className:"dark"})),p.default.createElement(c.default.Composites.PanelContent,{className:"update-panel-content"},p.default.createElement(c.default.Composites.RadioButtonsWithIllustration,null,p.default.createElement(c.default.RadioButtonsWithIllustration,{value:this.state.updateType,onChange:this.onRadioButtonClick,options:this.getTitleAndTextOptions()}))),p.default.createElement(c.default.Composites.ActionSetHorizontalSpaced,null,p.default.createElement(c.default.Button,{onClick:this.openUpdateHelpCenter,className:"btn-text"},r.translate("AppStudio_LeftTree_Components_Update_Help_Link")),p.default.createElement(c.default.Button,{onClick:this.onUpdate},p.default.createElement("span",null,r.translate("AppStudio_Update_Button"))))))}});return r.hoc.connect(r.hoc.STORES.STATE_AND_DS,o.default.noop,(e,t)=>{let{panelName:n}=t;return{onClose:()=>e(u.closePanelByName(n)),openHelpCenter:(t,n)=>e(l.default.editorPlugins.panels.actions.openHelpCenter(t,n))}})(g)}.apply(t,o))||(e.exports=a)},2099:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(4),n(6),n(3),n(277),n(8)],void 0===(a=function(e,t,n,o,a,i,r,l,s){"use strict";var p;return o=n.__importDefault(o),a=n.__importDefault(a),i=n.__importDefault(i),r=n.__importDefault(r),l=n.__importStar(l),s=n.__importDefault(s),(p=class extends r.default.Component{constructor(){super(...arguments),this.close=()=>{this.props.onClose(),this.props.close()},this.onLinkClicked=()=>{this.props.linkAction.onClick(),this.props.close()}}render(){return r.default.createElement(l.notificationFrame,{type:this.props.type,close:this.close},r.default.createElement("div",{className:"platform-notification-content"},this.props.title?r.default.createElement(s.default.RichText,{key:"notification-title",type:"T07",className:"notification-title"},this.props.title):null,r.default.createElement(s.default.RichText,null,r.default.createElement("p",{className:"notification-message"},this.props.message)),r.default.createElement(s.default.RichText,null,this.props.linkAction&&this.props.linkAction.caption?r.default.createElement("a",{onClick:this.onLinkClicked,key:"notification-link-action",className:"notification-link"},this.props.linkAction.caption):null)))}}).displayName="platformNotification",p.propTypes={name:a.default.string,type:a.default.oneOf(o.default.values(i.default.NOTIFICATIONS.TYPES)).isRequired,title:a.default.string,message:a.default.string.isRequired,linkAction:a.default.shape({caption:a.default.string.isRequired,onClick:a.default.func.isRequired}),close:a.default.func.isRequired,onClose:a.default.func.isRequired},p}.apply(t,o))||(e.exports=a)},2100:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(29),n(7)],void 0===(a=function(e,t,n,o,a,i){"use strict";o=n.__importDefault(o),a=n.__importStar(a),i=n.__importDefault(i);const r=(e,t)=>{const{applicationId:n}=e.components.data.get(t),{applicationId:o}=e.platform.getAppDataByAppDefId(n);return o},l=(e,t,n,l)=>{o.default.forEach(t,t=>{if(i.default.editorPlugins.components.selectors.isAppWidget(t,e.dsRead)){const o=r(e,t);e.platform.notifyApplication(o,a.factory[n]({componentRef:t}))}else{const n=e.platform.controllers.connections.get(t);o.default.forEach(n,n=>{const o=r(e,n.controllerRef);e.platform.notifyApplication(o,a.factory[l]({componentRef:t,connection:n}))})}})};return{notifyApplicationAfterComponentPasted:(e,t)=>{l(e,t,"widgetPasted","connectedComponentPasted")},notifyApplicationAfterComponentDuplicated:(e,t)=>{l(e,t,"widgetDuplicated","connectedComponentDuplicated")}}}.apply(t,o))||(e.exports=a)},2101:function(e,t,n){var o,a;o=[n,t,n(0),n(7)],void 0===(a=function(e,t,n,o){"use strict";return o=n.__importDefault(o),{create:function(e){let{considerControllerTypeDisplayName:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{const a=o.default.applicationStudio.selectors.getWidgetDisplayName(e.store.getState(),e.dsRead,n);if(a)return a;const i=e.dsRead.platform.controllers.getStageData(n);if(i){if(i.displayName)return i.displayName;if(t&&i.controllerTypeDisplayName)return i.controllerTypeDisplayName}const{applicationId:r}=e.dsRead.components.data.get(n);if(r===e.dsRead.platform.editorApps.DATA_BINDING.appDefId)return"";const l=e.dsRead.platform.getAppDataByAppDefId(r);if(l){const t=e.dsRead.tpa.appMarket.getData(r);return t&&t.name?t.name:l.appDefinitionName||""}return""}}}}.apply(t,o))||(e.exports=a)},2102:function(e,t,n){var o,a;o=[n,t,n(0),n(38),n(16),n(13),n(2103)],void 0===(a=function(e,t,n,o,a,i,r){"use strict";return o=n.__importDefault(o),a=n.__importDefault(a),i=n.__importDefault(i),r=n.__importDefault(r),{register:function(){o.default(["addPanelData"],e=>{i.default.isOpen("se_addPanelOrganizing")?e.manager.override.registerOverrideGroupsForCategory(a.default.CATEGORIES_ID.INSTALLED_APPS,r.default.createSections):e.manager.override.sections.register(a.default.CATEGORIES_ID.INSTALLED_APPS,r.default.createSections)})},unregister:function(){o.default(["addPanelData"],e=>{i.default.isOpen("se_addPanelOrganizing")?e.manager.override.unRegisterOverrideGroupsForCategory(a.default.CATEGORIES_ID.INSTALLED_APPS):e.manager.override.sections.unregister(a.default.CATEGORIES_ID.INSTALLED_APPS)})}}}.apply(t,o))||(e.exports=a)},2103:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(13),n(7),n(17),n(511),n(512),n(2104),n(2105),n(12)],void 0===(a=function(e,t,n,o,a,i,r,l,s,p,d,c){"use strict";o=n.__importDefault(o),a=n.__importDefault(a),i=n.__importDefault(i),r=n.__importDefault(r),l=n.__importDefault(l),s=n.__importDefault(s),p=n.__importDefault(p),d=n.__importDefault(d),c=n.__importStar(c);const u=i.default.platform.selectors,f=i.default.platform.actions,m=(e,t)=>o.default.defaultsDeep({props:{items:o.default.map(e.props.items,e=>{return o.default.defaults({},e,{image:(n=t,s.default["".concat("LOGO".concat(n%5))])});var n})}},e),g=(e,t,n)=>{let{title:o,desc:a,image:i,id:r,appExtraData:l}=n;return{id:r,title:o,desc:a,shouldTranslate:!1,showSectionHeader:!0,symbol:"plusBig",tooltip:"add_section_add_page_blankpage_tooltip",image:s.default[i],onItemClick:()=>{e.panelManager.closeAllPanels(),e.store.dispatch(f.notifyAddWidget(t.applicationId,r,l)),e.bi.event(c.events.platform.add_widget_to_page,{source_name:"add_panel",widget_id:r,app_id:t.appDefinitionId})}}},_=(e,t,n)=>{let{items:a}=n;return o.default(a).partition(d.default.validate).thru(e=>{let[t,n]=e;return P(n,"section"),t}).map(o.default.partial(g,e,t)).value()},P=(e,t)=>o.default.forEach(e,e=>r.default.log.error("Invalid ".concat(t," definition: ").concat(JSON.stringify(e))));return{createSections:e=>{const t=e.dsRead.platform.getInstalledEditorApps();let n;const i=o.default(t).map(t=>({app:t,categoryDefinition:u.getAddPanelCategoryDefinitionFromManifest(e.dsRead,t.appDefinitionId)})).filter("categoryDefinition").partition(e=>{let{categoryDefinition:t}=e;return p.default.validate(t)}).thru(e=>{let[t,o]=e;return P(o,"category"),n=!(e=>e.length>=5)(t),t}).map(t=>((e,t,n)=>{let{app:o,categoryDefinition:a}=n;return{hide:!1,id:o.appDefinitionId,type:l.default[a.type],title:a.title,subNavigationTitle:a.title,presetTitle:a.header,subNavigationHide:t,showSectionHeader:!0,shouldTranslate:!1,disableInfoIcon:!0,props:{items:_(e,o,a)}}})(e,n,t)).sortBy("title").map(m).value();return a.default.isOpen("se_addPanelOrganizing")?[{sections:i}]:i}}}.apply(t,o))||(e.exports=a)},2104:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(511)],void 0===(a=function(e,t,n,o,a){"use strict";o=n.__importDefault(o),a=n.__importDefault(a);const i=e=>o.default.isString(e)&&!o.default.isEmpty(e),r=e=>o.default.has(a.default,e);return{validate:function(){let{title:e,header:t,type:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(e)&&i(t)&&r(n)}}}.apply(t,o))||(e.exports=a)},2105:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(512)],void 0===(a=function(e,t,n,o,a){"use strict";o=n.__importDefault(o),a=n.__importDefault(a);const i=["IMAGE_LIST"],r=(e,t)=>!e||o.default.includes(i,t)&&o.default.has(a.default,e),l=e=>o.default.isString(e)&&!o.default.isEmpty(e);return{validate:function(){let{title:e,image:t,imageSource:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l(e)&&r(t,n)}}}.apply(t,o))||(e.exports=a)},22:function(e,t){e.exports=_},276:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(119),n(2)],void 0===(a=function(e,t,n,o,a,i){"use strict";function r(e,t,n){const r={applicationId:t,appDefinitionId:n,editorType:a.default.ORIGIN.CLASSIC_EDITOR_TYPE};o.default.forEach(r,(t,n)=>{e=i.url.setUrlParam(e,n,t)});const s=l();return o.default.isEmpty(s)?e:i.url.setUrlParam(e,"extraNamespaces",o.default.join(s,","))}function l(){return i.appStudioUtils.isAppStudio()?a.default.PLATFORM_EXTRA_NAMESPACES.APP_BUILDER:[]}return o=n.__importDefault(o),a=n.__importDefault(a),i=n.__importStar(i),{getExtraNamespaces:l,getFullApplicationUrl:function(e,t,n,a){const l=o.default.chain(window.location.search.substr(1)).thru(i.url.parseUrlParams).get("editorPlatformAppSources","").split(",").invokeMap("split",":").fromPairs().value();if(o.default.startsWith(t,"http"))return r(t,a,n);const s=function(t){const n=o.default.get(e,"appFields.platform.editorScriptUrl");if(n)return n;const a=o.default.get(e,"editorArtifact");if(a)return t?i.url.joinURL(i.serviceTopology.scriptsDomainUrl,"services",a,t):i.serviceTopology.scriptsLocationMap[a]}(l[n]);if(s){return r(new URL(t,s).href,a,n)}}}}.apply(t,o))||(e.exports=a)},277:function(e,t){e.exports=I},29:function(e,t){e.exports=P},3:function(e,t){e.exports=o},38:function(e,t){e.exports=A},4:function(e,t){e.exports=a},5:function(e,t){e.exports=i},505:function(e){e.exports=JSON.parse('{"CONTROLLER_GFPP_CLICK":{"evid":26,"src":79,"endpoint":"platform","fields":{"app_name":"string","action_name":"string","controller_type":"string","component_id":"string","pageId":"string"}},"page_delete_dataset":{"evid":91,"src":79,"endpoint":"platform","fields":{"app_name":"string","controller_type":"string","component_id":"string","pageId":"string"}}}')},506:function(e,t,n){var o,a;o=[n,t,n(0),n(1),n(54),n(6)],void 0===(a=function(e,t,n,o,a,i){"use strict";o=n.__importDefault(o),a=n.__importStar(a),i=n.__importDefault(i);const{ACTIONS:r,PLATFORM:l}=i.default.ROOT_COMPS.GFPP,{POSSIBLE_VALUES:s}=l,p=[r.ADD,r.SETTINGS,r.LAYOUT,r.DESIGN,r.UPGRADE,r.CUSTOM_CONNECT],d={desktop:[r.MANAGE,r.BACKGROUND,r.ADD,r.SETTINGS,r.LINK,r.LAYOUT,r.DESIGN,r.CUSTOMIZE_DESIGN,r.APPLY_TO_OTHER_VIEW,r.CROP,r.FILTERS,r.EFFECTS,r.ANIMATION,r.AVIARY,r.STRETCH,r.STRETCH_FOR_COLUMNS,r.UPGRADE,r.HELP,r.CUSTOM_CONNECT,r.CONNECT,r.PIN_MODE],mobile:[r.MANAGE,r.SCALE_UP,r.SCALE_DOWN,r.SETTINGS,r.LAYOUT,r.DESIGN,r.CUSTOMIZE_DESIGN,r.APPLY_TO_OTHER_VIEW,r.CROP,r.FILTERS,r.EFFECTS,r.ANIMATION,r.AVIARY,r.STRETCH,r.UPGRADE,r.HIDE,r.HELP]},c=[r.HELP,r.HIDE],u="advancedStylePanel.multiComponentAdvancedStylePanel";function f(e,t){return"mobile"===e?function(e){return o.default.has(e,"textSize")?o.default.assign({},e,{scale_up:e.textSize,scale_down:e.textSize}):o.default.omit(e,["scale_up","scale_down"])}(t):t}function m(e,t,n){let{mobileEnabledActions:a,enabledActions:i}=t;return e.isMobileEditor()?o.default.includes(a,n):o.default.includes(i,n)}function g(e,t){return[o.default.get(t,[e,"mainAction1"]),o.default.get(t,[e,"mainAction2"])]}function _(e,t,n,i,r){const l=o.default(t).map((t,n)=>{if(o.default.isObject(t)&&!o.default.isEmpty(t)){const n=o.default.assign({onClick(n,l,s,p){const{actionType:d}=t;if(d&&i(n,e,d)){(function(e,t,n){const i=o.default.get(e,["presetActions",n]);return i?i.onClick:a.utils.resolveOnClickAction(t)})(e,t,d)(n,l,s,p)}t.actionId&&r(t)},shouldTranslate:!1},t);return o.default.omit(n,["actionId"])}return function(e){return!e||o.default.isEmpty(e)||e===s.DEFAULT}(t)?o.default.get(e.mainActions,[n]):null}).compact().value();return"desktop"===n&&o.default.isEmpty(l)?o.default.take(e.mainActions,1):l}function P(e,t,n,a){if(o.default.isEmpty(e.groupMapping))return function(e,t,n){e.panelManager.openComponentPanel(u,{selectedComponent:[],groupMapping:{},title:t,keyByComp:{},onPresetChanged:n,shouldTranslate:!1},!0)}(t,e.title,n);const i=t.dsRead.platform.controllers.getStageData(a).connections,r=o.default.pickBy(i,"designMapping"),l=t.dsRead.platform.controllers.connections.getConnectedComponents(a).reduce((e,n)=>{const a=(e=>{const n=t.dsRead.platform.controllers.connections.getPrimaryConnection(e);return o.default.get(n,"role")})(n),i=t.dsRead.components.getType(n),l=o.default.get(r,[a,"designMapping",i]);return l&&(e[n.id]=l),e},{});t.panelManager.openComponentPanel(u,{groupMapping:e.groupMapping,presets:e.presets,title:e.title,presetsTitle:e.presetsTitle,onPresetChanged:n,designMapping:l,customHelpId:e.customHelpId||e.helpId,presetHelpId:e.presetHelpId||e.helpId,shouldTranslate:!1},!0)}function A(e,t,n){const a=f(t,o.default.get(n,[t,"iconButtons"])),i=d[t];if(o.default.isEmpty(a))return o.default.pull(e,r.UPGRADE);const l=o.default.filter(e,e=>{const t=a[e];return function(e){return e===r.UPGRADE}(e)?t===s.DEFAULT||t===s.SITE_UPGRADE||o.default.isObject(t):o.default.includes(c,e)||t!==s.HIDE}),u=o.default.filter(i,(function(e){const t=o.default.includes(p,e)&&a[e]&&o.default.isObject(a[e]),n=o.default.includes(l,e);return t||n}));return o.default.forEach(p,(function(t){if(a[t]&&o.default.isObject(a[t])&&!o.default.includes(e,t)){const e=u.indexOf(t);l.splice(e,0,t)}})),l}return{filterEnabledActions:A,mergeMainActions:_,getMainActionsFromApp:g,generateMainActions:function(e,t,n,a){const i=g(e,t),r="desktop"===e?n.mainActions:n.mobileMainActions;return _(o.default.defaults({mainActions:r},n),i,e,m,a)},generateIconButtonsOverride:function(e,t,n,i,l,s){const d=f(e,o.default.get(t,[e,"iconButtons"])),c=o.default(d).pickBy((e,t)=>o.default.has(e,"actionId")&&o.default.includes(p,t)).mapValues((e,t)=>({isSelected:e=>e.panelManager.findPlatformPanelByType(t),onClick(){i(e)}})).value(),m=o.default.get(t,[e,"helpId"]);m&&o.default.set(c,["help","desktop"===e?"helpId":"mobileHelpId"],m);const g=o.default.get(t,[e,"globalDesign"]);if(g){const e={isSelected:a.utils.getPanelStateFn(u),onClick:e=>P(g,e,l,s)};o.default.set(c,r.DESIGN,e)}return o.default.assign({},n.presetActions,c)},generateEnabledActions:function(e,t,n){return o.default.get(t,[e,"globalDesign"])&&n.push(r.DESIGN),A(n,e,t)}}}.apply(t,o))||(e.exports=a)},507:function(e,t,n){var o,a;o=[n,t,n(0),n(7),n(2)],void 0===(a=function(e,t,n,o,a){"use strict";o=n.__importDefault(o),a=n.__importStar(a);function i(e,t){return new a.UrlBuilder("https://www.wix.com/apps/upgrade").param("appDefId",t).param("metaSiteId",e.dsRead.generalInfo.getMetaSiteId()).param("pp_origin","GFPP").url()}function r(e,t){return new a.UrlBuilder("https://www.wix.com/store/plans").param("appDefId",t).param("siteGuid",e.dsRead.generalInfo.getMetaSiteId()).param("pp_origin","GFPP").url()}return{getPremiumUrl:i,getPremiumUrlForSiteUpgrade:r,getPremiumGfpp:function(e,t){return{onClick(n){if(!n.dsRead.generalInfo.isFirstSave()){window.open("SITE_UPGRADE"===t?r(n,e):i(n,e),"_blank");const a=n.dsRead.tpa.app.getDataByAppDefId(e);n.store.dispatch(o.default.tpa.actions.addAppToTrackForUpgrade(a.applicationId))}else requirejs(["tpa"],t=>t.packagePicker.startUpgradeFlow(n,e,!1,{shouldNavigate:!1}))},icon:()=>a.ascend.isAscendUpgrade(e)?"ascend_upgrade_gfpp_icon":"upgrade",tooltip:()=>a.ascend.isAscendUpgrade(e)?"gfpp_tooltip_ascend_upgrade":"gfpp_tooltip_upgrade"}}}}.apply(t,o))||(e.exports=a)},508:function(e,t){e.exports=T},509:function(e,t,n){var o,a;o=[n,t,n(0),n(1)],void 0===(a=function(e,t,n,o){"use strict";return o=n.__importDefault(o),{generatePanelToken:function(e){return o.default.uniqueId("platform_".concat(e,"_"))},generateStaticGlobalPanelToken:function(e){return o.default.uniqueId("platform_".concat(e))}}}.apply(t,o))||(e.exports=a)},510:function(e,t,n){var o;void 0===(o=function(e,t){"use strict";return{save:function(e){return new Promise((function(t,n){e.saveManager.saveInBackground((function(){t()}),n)}))}}}.apply(t,[n,t]))||(e.exports=o)},511:function(e,t,n){var o,a;o=[n,t,n(0),n(16)],void 0===(a=function(e,t,n,o){"use strict";return{LIST:(o=n.__importDefault(o)).default.SECTIONS_TYPES.GENERIC_LIST_SECTION}}.apply(t,o))||(e.exports=a)},512:function(e,t,n){var o;void 0===(o=function(e,t){"use strict";return{LOGO0:"platform/widgetSection/widget-color-1.square.png",LOGO1:"platform/widgetSection/widget-color-2.square.png",LOGO2:"platform/widgetSection/widget-color-3.square.png",LOGO3:"platform/widgetSection/widget-color-4.square.png",LOGO4:"platform/widgetSection/widget-color-5.square.png",ROBOT:"platform/widgetSection/add-panel-robot.png"}}.apply(t,[n,t]))||(e.exports=o)},54:function(e,t){e.exports=D},6:function(e,t){e.exports=r},7:function(e,t){e.exports=l},8:function(e,t){e.exports=s},9:function(e,t){e.exports=p}})}));
//# sourceMappingURL=platform.min.js.map