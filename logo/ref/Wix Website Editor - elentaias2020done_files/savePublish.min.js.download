define("savePublish",["tslib","lodash","util","react","prop-types","create-react-class","constants","stateManagement","wix-base-ui","baseUI","santa-editor-symbols","core","coreBi","experiment","santa-core-utils","panels","zepto","santa-editor-utils","react-addons-linked-state-mixin","platformEvents","react-dom-factories"],(function(e,t,a,i,s,n,o,r,l,u,c,d,p,_,m,f,h,S,E,P,g){return function(e){var t={};function a(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(i,s,function(t){return e[t]}.bind(null,s));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=2454)}({0:function(t,a){t.exports=e},1:function(e,a){e.exports=t},10:function(e,t){e.exports=c},11:function(e,t){e.exports=d},12:function(e,t){e.exports=p},13:function(e,t){e.exports=_},17:function(e,t){e.exports=m},19:function(e,t){e.exports=f},2:function(e,t){e.exports=a},204:function(e,t,a){var i;void 0===(i=function(e,t){"use strict";return{SITE_NAME_TAKEN_PANEL_DATA:{titleKey:"ERROR_SITE_NOT_RENAMED_TITLE_LABEL",description:"ERROR_SITE_NOT_RENAMED_BODY_SUBTITLE",steps:["ERROR_SITE_NOT_RENAMED_STEP1_TEXT","ERROR_SITE_NOT_RENAMED_STEP2_TEXT","ERROR_SITE_NOT_RENAMED_STEP3_TEXT"],stepsTitle:"ERROR_SITE_NOT_RENAMED_TRY_STEPS"},SAVE_DISABLED_ON_SERVER_PANEL_DATA:{titleKey:"SAVE_ERROR_TITLE_LABEL",description:"Save_Publish_ServerErrorLabel_OnSave",showSteps:!1,showFooterText:!1},USER_NOT_AUTHORIZED_FOR_SITE:{titleKey:"SAVE_ERROR_17_TITLE",description:"SAVE_ERROR_17_DESCRIPTION_HEADER",steps:["SAVE_ERROR_17_DESCRIPTION_STEP1","SAVE_ERROR_17_DESCRIPTION_STEP2","SAVE_ERROR_17_DESCRIPTION_STEP3"],helpMessage:"SAVE_ERROR_LEARN_MORE_LABEL",helpLinkMessage:"SAVE_ERROR_LEARN_MORE_LINK"},NOT_LOGGED_IN:{titleKey:"SAVE_ERROR_15_TITLE",description:"SAVE_ERROR_15_DESCRIPTION_HEADER",steps:["SAVE_ERROR_15_DESCRIPTION_STEP1","SAVE_ERROR_15_DESCRIPTION_STEP2","SAVE_ERROR_15_DESCRIPTION_STEP3"],helpMessage:"SAVE_ERROR_LEARN_MORE_LABEL",helpLinkMessage:"SAVE_ERROR_LEARN_MORE_LINK"},PUBLISH_DISABLED_ON_SERVER_PANEL_DATA:{titleKey:"PUBLISH_ERROR_TITLE_LABEL",description:"Save_Publish_ServerErrorLabel_OnPublish",showSteps:!1,showFooterText:!1},PUBLISH_RC_FAILED_ON_SERVER_PANEL_DATA:{titleKey:"Replace_Release_Candidate_Note_Title",description:"Replace_Release_Candidate_Note_Text",showSteps:!1,showFooterText:!1,cancelLabel:"Replace_Release_Candidate_Note_Cancel_Button",confirmLabel:"Replace_Release_Candidate_Note_Continue_Button",helpMessage:"SAVE_ERROR_LEARN_MORE_LABEL",helpLinkMessage:"SAVE_PUBLISH_ERROR_LEARN_MORE_LINK",helpLink:"3365fbc2-1e03-46c8-88c0-f93b2c50ca2f"},NAME_SITE_AGAIN_PANEL_DATA:{titleKey:"ERROR_NAME_SITE_AGAIN_TITLE_LABEL",description:"ERROR_NAME_SITE_AGAIN_SUBTITLE",steps:["ERROR_NAME_SITE_AGAIN_STEP1_TEXT","ERROR_NAME_SITE_AGAIN_STEP2_TEXT","ERROR_NAME_SITE_AGAIN_STEP3_TEXT"],stepsTitle:"ERROR_NAME_SITE_AGAIN_TRY_STEPS"},SAVE_ERROR_DEFAULT_PANEL_DATA:{titleKey:"SAVE_ERROR_TITLE_LABEL",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["SAVE_PUBLISH_SAVE_ERROR_OPTION_1","SAVE_PUBLISH_SAVE_ERROR_OPTION_2"],stepsTitle:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION_BOLD",helpMessage:"SAVE_ERROR_LEARN_MORE_LABEL",helpLinkMessage:"SAVE_PUBLISH_ERROR_LEARN_MORE_LINK",helpLink:"8045e8e4-6f47-4913-8d74-6239f21fffec"},PUBLISH_ERROR_DEFAULT_PANEL_DATA:{titleKey:"PUBLISH_ERROR_TITLE_LABEL",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["SAVE_PUBLISH_ERROR_OPTION_1","SAVE_PUBLISH_ERROR_OPTION_2"],helpMessage:"PUBLISH_ERROR_LEARN_MORE_LABEL",helpLinkMessage:"SAVE_PUBLISH_ERROR_LEARN_MORE_LINK",helpLink:"3de8a931-e665-4c9f-bcb3-7096ea89f9e3"},VALIDATION_ERROR:{titleKey:"Notification_Box_Data_Curruption_Error_Title",description:"Notification_Box_Data_Curruption_Error_Text",showSteps:!1,helpMessage:null,helpLinkMessage:null,helpLink:null,confirmLabel:"Notification_Box_Data_Curruption_Error_Reload_Button"}}}.apply(t,[a,t]))||(e.exports=i)},22:function(e,t){e.exports=h},24:function(e,t){e.exports=S},2454:function(e,t,a){var i,s;i=[a,t,a(0),a(2455),a(2457),a(2458),a(2459),a(2460),a(2461),a(2462),a(2464),a(2473)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importDefault(n),o=a.__importDefault(o),r=a.__importDefault(r),l=a.__importDefault(l),u=a.__importDefault(u),c=a.__importDefault(c),d=a.__importDefault(d),t.createSaveManager=i.default,t.createAutosaveManager=s.default,t.createPublishManager=o.default;const p={connectDomain:r.default,connectDomainInProgress:l.default,common:u.default,publish:d.default,save:c.default};t.panels=p;const _=n.default.save;t.configureSave=_}.apply(t,i))||(e.exports=s)},2455:function(e,t,a){var i,s;i=[a,t,a(0),a(1),a(2),a(2456)],void 0===(s=function(e,t,a,i,s,n){"use strict";return i=a.__importDefault(i),s=a.__importStar(s),n=a.__importDefault(n),function(e,t){const a=n.default(e,t);return{save:function(e){(e=e||{}).origin=e.origin||"";const t=e.callback||i.default.noop,n=e.onError||i.default.noop;"publish"!==e.origin&&s.fedopsLogger.interactionStarted(s.fedopsLogger.INTERACTIONS.UI_SAVE),a.save(e).then((function(){t(),"publish"!==e.origin&&s.fedopsLogger.interactionEnded(s.fedopsLogger.INTERACTIONS.UI_SAVE)})).catch((function(e){s.ravenUtils.captureError(i.default.isError(e)?e:i.default.values(e)[0],{tags:{user_save:!0}}),n(e)}))},saveInBackground:function(t,n,o,r){r=r||{},e.savePublish.canSaveOrPublish()?(r.isPublish||(s.ravenUtils.breadcrumb({message:"application triggered save",data:{origin:o,options:r}}),s.fedopsLogger.interactionStarted(s.fedopsLogger.INTERACTIONS.BG_SAVE),r.isSilent=!0),a.saveInBackground(o,r).then((function(){t({}),r.isPublish||s.fedopsLogger.interactionEnded(s.fedopsLogger.INTERACTIONS.BG_SAVE)})).catch((function(e){r.isPublish?s.ravenUtils.captureError(i.default.isError(e)?e:i.default.values(e)[0],{tags:{publish_save:!0}}):s.ravenUtils.captureError(i.default.isError(e)?e:i.default.values(e)[0],{tags:{background_save:!0}}),n(e)}))):n({error:"Site is being saved or published!"})},saveAsTemplate:a.saveAsTemplate,setTimerForSaveReminder:i.default.once(a.setTimerForSaveReminder),openConcurrentSavePanel:function(e,t,i,n){a.openConcurrentSavePanel(i,n).then((function(t){s.fedopsLogger.interactionEnded(s.fedopsLogger.INTERACTIONS.UI_SAVE),e(t)})).catch((function(e){t(e)}))},displayFailurePanelMatchingAnErrorType:a.displayFailurePanelMatchingAnErrorType,openSaveReminderPanel:a.openSaveReminderPanel,getSavingStatus:a.getSavingStatus}}}.apply(t,i))||(e.exports=s)},2456:function(e,t,a){var i,s;i=[a,t,a(0),a(1),a(2),a(291),a(9),a(7),a(204),a(12),a(6),a(13)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u,c,d){"use strict";i=a.__importDefault(i),s=a.__importStar(s),n=a.__importDefault(n),o=a.__importStar(o),r=a.__importDefault(r),l=a.__importDefault(l),u=a.__importStar(u),c=a.__importDefault(c),d=a.__importDefault(d);const p=r.default.editorPlugins.domain.selectors,_=r.default.editorPlugins.savePublish.selectors;return function(e,t){const a=e.store,m="savePublish.panels.save.onBoardingMigrationConfirmationPanel",f="savePublish.panels.save.chooseDomainPanel",h="savePublish.panels.save.siteWasSavedPanel",S="savePublish.panels.common.failPanel",E="panels.messagePanels.validationErrorPanel",P="savePublish.panels.save.concurrentSavePanel",g="savePublish.panels.save.saveReminderPanel",b="SAVE_SITE_SAVED_WELCOME_BACK_TITLE",I="SAVE_SITE_SAVED_WELCOME_BACK_SUBTITLE",N="".concat(s.serviceTopology.editorServerRoot||"//editor.wix.com/html/editor/web","/renderer/edit/<%= siteId %>");let T;function v(){const t=e.dsRead.siteName.getUsed();return function(e,t){let a=e,s=1;for(;i.default.includes(t,a);){const t="-".concat(s);a=e.slice(0,20-t.length).replace(/\-$/,"").replace(/_/g,"-")+t,s++}return a}(function(){const t=_.getOverridingSiteDefaultName(a.getState()),i=s.translate(t||"Save_Publish_Site_Default_Name");return e.siteName.sanitize(i.slice(0,20).replace(/\-$/,"").replace(/_/g,"-"))||"mysite"}(),t)}function A(t,a){switch(a){case e.dsRead.errors.save.SITE_NAME_TAKEN:O(t,l.default.SITE_NAME_TAKEN_PANEL_DATA);break;case e.dsRead.errors.save.SAVE_PUBLISH_DISABLED_ON_SERVER:O(t,l.default.SAVE_DISABLED_ON_SERVER_PANEL_DATA);break;case e.dsRead.errors.save.NOT_LOGGED_IN:O(t,l.default.NOT_LOGGED_IN);break;case e.dsRead.errors.save.USER_NOT_AUTHORIZED_FOR_SITE:O(t,l.default.USER_NOT_AUTHORIZED_FOR_SITE);break;case e.dsRead.errors.save.DUPLICATE_COMPONENTS:case e.dsRead.errors.save.DATA_REFERENCE_MISMATCH:case e.dsRead.errors.save.MISSING_CONTAINERS:case e.dsRead.errors.save.APP_CONTROLLER_REFERENCE_MISMATCH:case e.dsRead.errors.save.BEHAVIOR_REFERENCE_MISMATHCHES:case e.dsRead.errors.save.DESIGN_REFERENCE_MISMATCHES:case e.dsRead.errors.save.PROPERTY_REFERENCE_MISMATCHES:case e.dsRead.errors.save.CONNECTION_LIST_REFERENCE_MISMATCHES:case e.dsRead.errors.save.STYLE_REFERENCE_MISMATCHES:const s=i.default.partial(D,a);T=window.setInterval(s,c.default.SAVE_PUBLISH.VALIDATION_ERROR_POPUP_INTERVAL),s(a);break;case e.dsRead.errors.save.SAVE_DISABLED_IN_DOCUMENT_SERVICES:alert("SAVE IS DISABLED.\nIn order to prevent accidental changes for user sites, your editor has been opened with the save/autosave disabled.");break;default:O(t,l.default.SAVE_ERROR_DEFAULT_PANEL_DATA)}}function D(t){if(Y([E,S]))return;e.bi.event(u.events.DATA_CORRUPTION_MESSAGE,{date_corruption_type:t});const a=s.windowInteractionUtils.reloadPageWithoutQuestion,n=i.default.assign({},l.default.VALIDATION_ERROR,{onConfirm:a,errorType:t});e.panelManager.openPanel(E,n,!0)}function C(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(s,n){const o=i.default.partial(x,s,n,t,a);e.panelManager.openPanel(P,{overrideSaveMethod:o,origin:t},!0)}))}function R(t,a,s){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e.panelManager.openPanel(g,{saveMethod:i.default.partial(K,e,{origin:"remember_to_save_active_save_popup"}),mainText:t,headerText:a,buttonText:s},n)}function O(t,a){const s=u.events.save.saveFailed,o=i.default.get(e.savePublish.getSiteState(),"isFirstSave"),r={errorCode:t&&n.default.extractDocumentErrorCode(t),biConfirm:o?s.First_Save_error_work_not_saved_error_ok_click:null,biHelp:o?s.First_Save_error_work_not_saved_error_help_center_link_click:null,biCancel:o?s.First_Save_error_work_not_saved_error_close_click:null},c=i.default({}).assign(a).defaults(l.default.SAVE_ERROR_DEFAULT_PANEL_DATA).assign(r).value();e.panelManager.openPanel(S,c,!0)}function L(t,s,n){return new Promise((function(o){const r=_.getOverridingSiteWasSavedPanel(a.getState());if(!e.account.isUserOwner()||e.wixStores.isSiteInWixStoreTestDrive()||i.default.get(r,"disabled"))o();else{const a=i.default.merge({},e.savePublish.getSiteState(),t);a.overrideTitle=s,a.overrideSubtitle=n,a.callback=o,e.panelManager.openPanel(h,a,!0)}}))}function U(t,s){return new Promise((function(n,o){t=i.default(t).pick(["overrideTitle","overrideSubtitle","overrideOnCancel","origin"]).assign({defaultSiteName:s?v():e.siteName.get(),freeDomainPrefix:p.getFreeDomainPrefix(a.getState(),e.dsRead),connectDomainHandler:i.default.partial(k,t,n,o,s),freeDomainHandler:i.default.partial(y,t,n,o,s)}).value();const r=_.getOverridingDomainPanel(a.getState()),l=i.default.get(r,"panelName",null);e.panelManager.openPanel(l||f,t,!0)}))}function B(t){return new Promise((function(a){const s=e.savePublish.getSiteState();e.panelManager.openPanel("savePublish.panels.connectDomain",{title:"SAVE_SITE_SAVED_TITLE_TITLE",subtitle:"PREMIUM_TITLE_SUBTITLE",onConnectDomainFlowEnded:i.default.partial(a,t),isFirstSave:s.isFirstSave,isFirstPublish:!s.isSitePublished,isPremium:s.isSitePremium,flowId:c.default.CONNECT_DOMAIN.FLOWS.SAVE},!0)}))}function y(e,t,a,i,s){return F(s,e.origin,e,i).then((function(e){if(!e.preventSiteWasSavedPanel)return L()})).then(t).catch(e=>(a(e),{error:!0}))}function M(t){return new Promise((function(a,i){e.site.getSiteDomainInfo((function(s){const n={isDomainConnected:s.isDomainConnected,isSitePremium:s.isSitePremium};s.isDomainConnected&&s.isSitePremium&&s.sitePublishedDomain&&(n.domain=s.sitePublishedDomain,e.dsActions.generalInfo.setPublicUrl(s.sitePublishedDomain)),e.savePublish.setSitePremiumState(n),t.preventSiteWasSavedPanel?a(t):L(n,b,I).then(a).catch(i)}),(function(){t.preventSiteWasSavedPanel?a(t):L().then(a)}))}))}function k(e,t,a,i){F(v(),e.origin,e,i).then(B).then(M).then(t).catch(a)}function w(t,a,i){if(i=i||{},e.savePublish.isSaveInProgress())return Promise.reject();function s(){e.savePublish.setSaveProgress(!1),e.bi.tryFlushingConditionedEvents()}return e.savePublish.setSaveProgress(!0),window.clearInterval(T),e.savePublish.save(t,a,i).then((function(e){return s(),i.preventSiteSavedPanel||("publish"===a||i.isPublish)&&d.default.isOpen("se_fixPublishFlow")?{preventSiteWasSavedPanel:!0}:e||{}})).catch((function(t){s();const o=n.default.extractDocumentErrorType(t);if(o===e.dsRead.errors.save.CONCURRENT_SAVE)return C(a,i).then((function(){return{preventSiteWasSavedPanel:!0}}));throw A(t,o),t}))}function x(e,t,a,i){"autosave"===a&&s.fedopsLogger.interactionStarted(s.fedopsLogger.INTERACTIONS.UI_SAVE),w(!0,a,i).then((function(e){if(!e.preventSiteWasSavedPanel)return L()})).then(e).catch(t)}function F(t,a,o,r){return e.savePublish.isSaveInProgress()?Promise.reject():(r?e.siteName.set(t):e.siteName.rename(t),w(!0,a,o).then((function(t){return o.keepOriginEditorUrl||function(){const t=e.dsRead.generalInfo.getSiteId(),a=e.dsRead.generalInfo.getMetaSiteId(),n=s.url.parseUrl(window.location.href).query;delete n.siteId,n.metaSiteId=a;let o=i.default.template(N)({siteId:t});o=s.url.setUrlParams(o,n),s.windowInteractionUtils.replaceState({},"",o)}(),i.default.size(e.dsRead.wixapps.classics.getAllAppPartComps("blog"))>0&&e.dsActions.wixapps.classics.reloadApp("blog"),t}),(function(a){throw function(t){return e.dsRead.errors.save.SITE_NAME_TAKEN===n.default.extractDocumentErrorType(t)}(a)&&e.siteName.markAsUsed(t),a})))}function H(){return new Promise((function(t){e.panelManager.openPanel(m,{onConfirm:t,onCancel:i.default.partial(t,"back_to_ADI")},!0)}))}function V(t){return!t&&e.dsRead.generalInfo.isSiteFromOnBoarding()&&!e.dsRead.generalInfo.isTemplate()}function W(){if(d.default.isOpen("se_fixPublishFlow")){const t=c.default.USER_PREFS.SAVE.SHOW_CONNECT_DOMAIN;return r.default.editorPlugins.userPreferences.selectors.getSessionUserPreferences(t)(e.store.getState())}}function G(t){if(d.default.isOpen("se_fixPublishFlow")){const a=c.default.USER_PREFS.SAVE.SHOW_CONNECT_DOMAIN;e.store.dispatch(r.default.editorPlugins.userPreferences.actions.setSessionUserPreferences(a,t))}}function K(s){const n=(s=s||{}).origin||"";if(_.getIsForceSaveInBackground(a.getState()))return q(n,s);if(!e.savePublish.canSaveOrPublish())return t.error("Site is being saved or published!"),Promise.resolve();if(d.default.isOpen("se_obMigrationFlow")&&!i.default.get(s,"forceOBMigration")&&V(s.getBackToADI))return H().then((function(e){if("back_to_ADI"!==e)return s.onBoarding=!1,K(i.default.defaults({forceOBMigration:!0},s))}));const o=e.savePublish.getSiteState();if(o&&o.isFirstSave||W())return d.default.isOpen("googleDomain")&&p.doesUserOwnGoogleDomain()?F(v(),n,s,!0).then((function(e){if(!e.preventSiteWasSavedPanel)return L()})):U(s,o.isFirstSave).then((function(){G(!1)}));return w(!1,s.origin,s).then((function(t){if(!(function(){const t=r.default.editorPlugins.userPreferences.selectors.getSiteUserPreferences(c.default.USER_PREFS.SAVE.SITE_SAVED_DONT_SHOW_AGAIN)(e.store.getState());return 2592e6>Date.now()-t}()||t.preventSiteWasSavedPanel))return L({},"SAVE_SITE_SAVED_SMALL_TITLE_TITLE","SAVE_SITE_SAVED_SMALL_TITLE_SUBTITLE")}))}function q(t,a){if(a=a||{},d.default.isOpen("se_obMigrationFlow")&&!i.default.get(a,"forceOBMigration")&&V(a.getBackToADI))return H().then((function(e){if("back_to_ADI"!==e)return a.onBoarding=!1,q(t,i.default.defaults({forceOBMigration:!0},a))}));a.getBackToADI&&(a.onBoarding=!0);const s=e.savePublish.getSiteState();return s&&s.isFirstSave?F(v(),t,a,!0).then((function(){G(!0)})):a.isPublish&&W()?U(a,s.isFirstSave).then((function(){G(!1)})):w(!1,t,a)}function Y(t){return i.default.some(e.panelManager.getOpenPanels(),(function(e){return i.default.includes(t,e.name)}))}function X(t,a){const i=e.dsRead.pages.background.get(t,a);i&&!i.isPreset&&(i.isPreset=!0,e.pages.background.update(t,i,a))}return{save:K,saveInBackground:q,saveAsTemplate:function(a,s){function n(t,a){e.savePublish.setSaveProgress(!1),e.savePublish.setPublishProgress(!1),t&&t(a)}e.dsRead&&e.dsRead.generalInfo&&e.dsRead.generalInfo.getUserInfo().isStudio?(e.savePublish.isSaveInProgress()&&s(),e.savePublish.setSaveProgress(!0),e.savePublish.setPublishProgress(!0),function(){const t=e.dsRead.pages.getPageIdList();i.default.forEach(t,(function(e){X(e,"desktop"),X(e,"mobile")}))}(),e.savePublish.saveAsTemplate(i.default.partial(n,a),i.default.partial(n,s))):t.info("Failed saving as template. User has no permissions to save as template")},setTimerForSaveReminder:i.default.once((function(){const t=[g,f];window.setTimeout((function i(){if(e.dsRead.generalInfo.isFirstSave()&&e.savePublish.isSaveReminderPanelEnabled()){const s=e.savePublish.canSaveOrPublish(),n=Y(t),o=e.zoomMode.isInZoomMode(),r=e.mobile.mobileWizard.isEnabled();!s||n||o||r||(R(),window.clearTimeout(a)),window.setTimeout(i,c.default.SAVE_PUBLISH.SAVE_REMINDER_TIMEOUT)}}),c.default.SAVE_PUBLISH.SAVE_REMINDER_TIMEOUT);let a=window.setTimeout((function i(){e.dsRead.generalInfo.isFirstSave()&&(!e.savePublish.canSaveOrPublish()||Y(t)||e.zoomMode.isInZoomMode()||(o.tooltipManager.showForDuration("save-button-tooltip",c.default.SAVE_PUBLISH.SAVE_TOOLTIP_DURATION),e.bi.event(u.events.save.saveReminder.REMINDER_DISPLAYED,{origin:"save tool-tip"})),a=window.setTimeout(i,c.default.SAVE_PUBLISH.SAVE_TOOLTIP_TIMEOUT))}),c.default.SAVE_PUBLISH.SAVE_TOOLTIP_TIMEOUT);d.default.isOpen("se_obMigrationFlow")&&i.default.invoke(e,"dsRead.generalInfo.isSiteFromOnBoarding")&&window.setTimeout((function(){o.tooltipManager.showForDuration("save-button-tooltip",c.default.SAVE_PUBLISH.SAVE_TOOLTIP_DURATION)}),2e3)})),openConcurrentSavePanel:C,displayFailurePanelMatchingAnErrorType:A,openSaveReminderPanel:R,getSavingStatus:function(){return e.store.getState().savingStatus}}}}.apply(t,i))||(e.exports=s)},2457:function(e,t,a){var i,s;i=[a,t,a(0),a(1),a(2),a(6),a(7),a(553),a(12),a(291)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u){"use strict";return i=a.__importDefault(i),s=a.__importStar(s),n=a.__importDefault(n),o=a.__importDefault(o),r=a.__importDefault(r),l=a.__importStar(l),u=a.__importDefault(u),function(e){const t=n.default.PROGRESS_STATUS;function a(){const e=s.url.isQA(),t="true"===s.url.getParameterByName("forceAutosave");return e&&!t}function c(t){return i.default(["CONCURRENT_SAVE","CONCURRENT_AUTO_SAVE","SITE_STALE_STATE_FROM_AUTO_SAVE"]).map(i.default.propertyOf(e.documentServices.errors.save)).includes(u.default.extractDocumentErrorType(t))}function d(e,t){let a;a="autosave"===e?t?"autosaveSuccessCount":"autosaveFailCount":t?"autoFullSaveSuccessCount":"autoFullSaveFailCount",i.default.isNaN(Number(window.testApi[a]))&&(window.testApi[a]=0),window.testApi[a]++}function p(){e.savePublish.setDiffSaveProgress(!0),P()&&e.updateState({savingStatus:t.IN_PROGRESS})}function _(a,r){const u=a?t.DONE_FAILED:t.DONE_SUCCESS,p=a?t.IDLE:t.IDLE_SAVED;e.savePublish.setDiffSaveProgress(!1),P()&&(e.updateState({savingStatus:u}),window.setTimeout((function(){e.updateState({savingStatus:p})}),n.default.SAVE_PUBLISH.DURATION_TO_SHOW_RESULT)),a&&c(a)&&e.saveManager.openConcurrentSavePanel(i.default.noop,i.default.noop,"autosave"),e.store.dispatch(o.default.editorPlugins.leavePopup.actions.setLeavePopup(!!a)),e.bi.event(l.events.save.autosave.DIFF_SAVED,{type:r,success:!a}),s.url.isQA()&&"undefined"!=typeof window&&window.testApi&&d("autosave",!a),h()}function m(){P()&&(e.savePublish.setSaveProgress(!0),e.updateState({savingStatus:t.IN_PROGRESS}))}function f(a){const r=a?t.DONE_FAILED:t.DONE_SUCCESS,l=a?t.IDLE:t.IDLE_SAVED;P()&&(e.savePublish.setSaveProgress(!1),e.updateState({savingStatus:r}),e.store.dispatch(o.default.editorPlugins.leavePopup.actions.setLeavePopup(!!a)),window.setTimeout((function(){e.updateState({savingStatus:l})}),n.default.SAVE_PUBLISH.DURATION_TO_SHOW_RESULT)),a&&(c(a)?e.saveManager.openConcurrentSavePanel(i.default.noop,i.default.noop,"autosave"):e.saveManager.displayFailurePanelMatchingAnErrorType(a)),s.url.isQA()&&"undefined"!=typeof window&&window.testApi&&d("autoFullSave",!a),h()}function h(){e.bi.tryFlushingConditionedEvents()}function S(e){return i.default.assign({},{enabled:g()},{onDiffSaveStarted:p,onDiffSaveFinished:_,onPartialSaveStarted:m,onPartialSaveFinished:f},r.default.AUTOSAVE,e)}function E(){if(!P())return;const t=n.default.ROOT_COMPS.TOPBAR.DROP_PANELS.CUSTOM.AUTO_SAVE;e.topBarMenuBar.openDropDown(t),window.setTimeout(e.topBarMenuBar.closeDropDown.bind(e,t),n.default.SAVE_PUBLISH.SITE_AUTO_SAVED_TOOLTIP_DURATION)}function P(){const t=e.documentServices;if(!t)return!1;const a=g(),i=t.getAutoSaveInfo(),s=i&&i.shouldAutoSave;return a&&s}function g(){const t=o.default.editorPlugins.userPreferences.selectors.getSiteUserPreferences(n.default.USER_PREFS.SAVE.AUTOSAVE_ENABLED)(e.store.getState());return t||void 0===t}return{init:function(t,i){const s=S(t);if(s.enabled&&a())return!1;var r;r=s.enabled,e.store.dispatch(o.default.editorPlugins.userPreferences.actions.setSiteUserPreferences(n.default.USER_PREFS.SAVE.AUTOSAVE_ENABLED,r)),e.dsActions.initAutosave(s);const l=e.dsRead.generalInfo.isSiteFromOnBoarding();return!i&&s.enabled&&P()&&!l&&E(),s},getAutosaveConfig:S,showSiteAutoSavedTooltipIfNeeded:E,shouldShowAutosaveUI:P,isAutomationWithoutAutosave:a,autosaveStatusTooltip:function(t){const a=e.dsRead.getAutoSaveInfo();if(!(a&&a.shouldAutoSave))return;const i=t?n.default.ROOT_COMPS.TOPBAR.DROP_PANELS.CUSTOM.DISABLE_AUTO_SAVE:n.default.ROOT_COMPS.TOPBAR.DROP_PANELS.CUSTOM.ENABLE_AUTO_SAVE;e.topBarMenuBar.openDropDown(i),window.setTimeout(e.topBarMenuBar.closeDropDown.bind(e,i),5e3)},isAutosaveEnabled:g}}}.apply(t,i))||(e.exports=s)},2458:function(e,t,a){var i,s;i=[a,t,a(0),a(1),a(204),a(6),a(17)],void 0===(s=function(e,t,a,i,s,n,o){"use strict";i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importDefault(n),o=a.__importDefault(o);const r="savePublish.panels.save.chooseDomainPanel",l="savePublish.panels.save.siteWasSavedPanel",u="savePublish.panels.common.failPanel";let c=null,d=null;function p(){const e=c.dsRead.siteName.getUsed(),t=c.dsRead.siteName.get();let a=t.slice(0,20),s=1;for(;i.default.includes(e,a);){const e="-".concat(s);a=t.slice(0,20-e.length)+e,s++}return a}function _(){c.panelManager.openPanel(u,s.default.SAVE_ERROR_DEFAULT_PANEL_DATA,!0)}function m(e,t){const a=i.default.clone(d);a.isMockSave=!0,a.overrideTitle=e,a.overrideSubtitle=t,c.panelManager.openPanel(l,a,!0)}function f(e){var t;d.shouldSaveSucceed?(S(),t={domain:"http://www.wix.com/"+e},d=i.default.merge(d||{},t),m()):_()}function h(){d.shouldSaveSucceed?(S(),function(){c.panelManager.openPanel("savePublish.panels.connectDomain",{title:"SAVE_SITE_SAVED_TITLE_TITLE",subtitle:"PREMIUM_TITLE_SUBTITLE",onConnectDomainFlowEnded:m.bind(this,"SAVE_SITE_SAVED_WELCOME_BACK_TITLE","SAVE_SITE_SAVED_WELCOME_BACK_SUBTITLE"),isFirstSave:!0,isFirstPublish:!0,isPremium:d.isSitePremium,flowId:n.default.CONNECT_DOMAIN.FLOWS.SAVE},!0)}()):_()}function S(){o.default.log.info("First Save Was Performed!")}return{save:function(e){c=e,c.panelManager.openPanel("savePublish.panels.save.saveConfigurationPanel",{onConfirm:function(e){e.isDomainConnected||(e.domain="http://www.wix.com/"+p()),function(e){d=i.default.clone(e)}(e),e.isFirstSave?function(){const e={defaultSiteName:p(),freeDomainPrefix:"http://www.wix.com/",connectDomainHandler:h,freeDomainHandler:f};c.panelManager.openPanel(r,e,!0)}():e.shouldSaveSucceed?(o.default.log.info("Save Was Performed!"),m("SAVE_SITE_SAVED_SMALL_TITLE_TITLE","SAVE_SITE_SAVED_SMALL_TITLE_SUBTITLE")):_()}},!0)}}}.apply(t,i))||(e.exports=s)},2459:function(e,t,a){var i,s;i=[a,t,a(0),a(1),a(2),a(17),a(291),a(204),a(292),a(7),a(12),a(6),a(13)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u,c,d,p){"use strict";i=a.__importDefault(i),s=a.__importStar(s),n=a.__importDefault(n),o=a.__importDefault(o),r=a.__importDefault(r),l=a.__importDefault(l),u=a.__importDefault(u),c=a.__importStar(c),d=a.__importDefault(d),p=a.__importDefault(p);const _=u.default.editorPlugins.domain.selectors,m=u.default.savePublish.selectors,f=u.default.savePublish.actions;return function(e){const t=e.store,a="savePublish.panels.publish.publishSuccessPanel";function h(e){s.fedopsLogger.interactionEnded(e||s.fedopsLogger.INTERACTIONS.USER_PUBLISH_SITE)}function S(a){e.savePublish.canSaveOrPublish()&&(e.dsRead.generalInfo.isFirstSave()||s.fedopsLogger.interactionStarted(s.fedopsLogger.INTERACTIONS.USER_PUBLISH_SITE),e.account.isUserOwner()&&!e.wixStores.isSiteInWixStoreTestDrive()?(I(),m.getIsDealerLoaded(t.getState())||b(),function(){const t={isFirstSave:e.dsRead.generalInfo.isFirstSave(),isPremiumUser:e.site.isPremium(),isFirstPublish:!e.dsRead.generalInfo.isSitePublished()};e.savePublish.publish(a).then((function(e){const a={siteRcExists:e&&e.siteRcExists};C((function(e){v(i.default.assign(t,e,a)),N()}),N),h()}),P)}()):e.savePublish.publish().then((function(){N(),h()}),P))}function E(){const t=e.dsRead.generalInfo.getMetaSiteId(),a=s.serviceTopology.businessManagerUrl;e.bi.event(c.events.publish.publish_rc_goto_release_manager_click,{origin:"override rc panel"}),window.open("".concat(a,"/").concat(t,"/release-manager-client?referralInfo=EDITOR"),"_blank")}function P(t){switch(o.default.extractDocumentErrorType(t)){case e.dsRead.errors.save.SAVE_PUBLISH_DISABLED_ON_SERVER:T(t,r.default.PUBLISH_DISABLED_ON_SERVER_PANEL_DATA);break;case e.dsRead.errors.save.SAVE_PUBLISH_RC_FAILED_ON_SERVER:T(t,i.default.assign({onConfirm:E},r.default.PUBLISH_RC_FAILED_ON_SERVER_PANEL_DATA));break;default:T(t,r.default.PUBLISH_ERROR_DEFAULT_PANEL_DATA)}N()}function g(t){let{isUsingDealer:i,description:s,stage:n}=t;e.bi.event(c.events.dealer.content_presented_by_dealer,{description:i?"":s,content_presented_by_dealer:i,stage:n,category:"upgrade",panel_name:a})}function b(){if(i.default.get(e.wixDealerClientApi,"DealerAssetsLoader")&&e.dsRead.generalInfo.getMetaSiteId()){const a=i.default.get(e.dsRead.platform.getAppDataByApplicationId(d.default.APPLICATIONS.META_SITE_APPLICATION_ID),"instance");s.dealerUtils.loadDealerAsset(e.wixDealerClientApi,s.dealerUtils.bannerPositions.POST_PUBLISH,null,e.site.getMetaSiteId(),a).then(e=>{const a=e.assetExist();g({isUsingDealer:a,stage:"prefetch",description:a?"":"banner data pre fetch asset does not exist error"}),t.dispatch(f.setIsDealerLoaded(a))}).catch(e=>{g({isUsingDealer:!1,stage:"prefetch",description:"banner data pre fetch ".concat(i.default.get(e,"message","unknown")," error")})})}}function I(){e.savePublish.setPublishProgress(!0)}function N(){e.savePublish.setPublishProgress(!1)}function T(t,a){const s={errorCode:o.default.extractDocumentErrorCode(t),biConfirm:c.events.publish.Publish_Work_not_Published_Error_ok_Click,biHelp:c.events.publish.Publish_Work_not_Published_Error_Help_Center_Link_Click},n=i.default.chain(a).clone().defaults(r.default.PUBLISH_ERROR_DEFAULT_PANEL_DATA).assign(s).value();e.panelManager.openPanel("savePublish.panels.common.failPanel",n,!0)}function v(s){let n=e.dsRead.generalInfo.getPublicUrl()||_.getFreeDomainPrefix(t.getState(),e.dsRead)+e.siteName.get();n=s.isDomainConnected?s.sitePremiumDomain:n;const o=d.default.USER_PREFS.PUBLISH,r=function(){const t=d.default.USER_PREFS.PUBLISH,a=u.default.editorPlugins.userPreferences.selectors.getSiteUserPreferences(t.POST_PUBLISH_DONT_SHOW_AGAIN)(e.store.getState());return 2592e6>Date.now()-a}(),c=s.rcPublicUrl?"savePublish.panels.publish.publishRCSuccessPanel":a,h=r&&c===a,S=function(t,a){let i=l.default.EMPTY;if(!t.isPremiumUser&&t.isDomainConnected)return i;if(A(t))i=l.default.CONNECT_DOMAIN;else{const s=D(t,a);if(s.length){const t=m.getPublishPanelPromotionIndex(e.store.getState());i=s[t%s.length]||l.default.EMPTY}}return i}(s,r);A(s)||function(t,a){const{getState:i,dispatch:s}=e.store,n=D(t,a),o=(m.getPublishPanelPromotionIndex(i())+1)%(n.length||1);s(f.setPublishPanelPromotionIndex(o))}(s,r);const E=!i.default.isEqual(S,l.default.EMPTY)&&!h;if(E){const a=function(a,i,s,n){const o={isFakePanel:a.isFakePublish,contentPanelType:i,configuration:a,currentDomain:e.site.getCurrentSiteDomain(),setDontShowPanelValue:t=>e.store.dispatch(u.default.editorPlugins.userPreferences.actions.setSessionUserPreferences(n.POST_PUBLISH_DONT_SHOW_AGAIN,t)),sitePublicUrl:s,closePanel:R};return m.getIsDealerLoaded(t.getState())&&e.isDealerCssLoaded&&(o.dealerViewer=e.wixReactDealerViewer.DealerViewer),o.setDontShowPanelValue=t=>{t&&e.store.dispatch(u.default.editorPlugins.userPreferences.actions.setSiteUserPreferences(n.POST_PUBLISH_DONT_SHOW_AGAIN,Date.now()))},o}(s,S,n,o);e.panelManager.openPanel(c,a,!0)}else p.default.isOpen("se_fixPublishFlow")&&i.default.forEach(e.sitePublishedCallbacks,(function(e){e()}));E||e.mobile.mobileDiscoverabilityModal.show()}function A(e){return!e.isDomainConnected}function D(e,t){const a=[],i=function(e,t){return!e.isDomainConnected&&(!t||e.isFakePublish)}(e,t),s=function(e,t){return!e.isDomainConnected&&(!t||e.isFakePublish)}(e,t),n=function(e,t){return e.isPremiumUser&&e.isDomainConnected&&(!t||e.isFakePublish)}(e,t);return i&&a.push(l.default.CONNECT_DOMAIN),s&&a.push(l.default.SHOUTOUT),n&&a.push(l.default.GROW_BUSINESS),a}function C(t,a){e.site.getSiteDomainInfo((function(e){const a=e.isDomainConnected,i=e.sitePublishedDomain;t({sitePremiumDomain:i,isDomainConnected:a})}),a)}function R(){return e.panelManager.closePanelByName(a)}return m.getIsDealerLoaded(t.getState())||b(),{publish:S,publishRC:function(){if(!e.savePublish.canSaveOrPublish())return;s.fedopsLogger.interactionStarted(s.fedopsLogger.INTERACTIONS.USER_PUBLISH_RC),I();const t={isFirstSave:e.dsRead.generalInfo.isFirstSave(),isPremiumUser:e.site.isPremium(),isFirstPublish:!e.dsRead.generalInfo.isSitePublished(),rcPublicUrl:e.dsRead.generalInfo.getCurrentRevisionPublicUrl()};e.savePublish.publishRC().then((function(){C((function(e){v(i.default.assign(t,e)),N()}),N),h(s.fedopsLogger.INTERACTIONS.USER_PUBLISH_RC)}),P)},saveAndPublish:function(t){const a=m.getOverridingSaveAndPublish(e.store.getState());if(a)return a(t),Promise.resolve();if(s.fedopsLogger.interactionStarted(s.fedopsLogger.INTERACTIONS.USER_PUBLISH_SITE),s.fedopsLogger.interactionStarted(s.fedopsLogger.INTERACTIONS.DEALER_IN_POST_PUBLISH),!e.savePublish.canSaveOrPublish())return Promise.resolve();if(e.dsRead.generalInfo.isFirstSave()){const t={overrideTitle:"PUBLISH_BEFORE_SAVE_CHOOSE_DOMAIN_TITLE",overrideSubtitle:"PUBLISH_BEFORE_SAVE_CHOOSE_DOMAIN_SUBTITLE",callback:S,origin:d.default.CONNECT_DOMAIN.FLOWS.PUBLISH,isPublish:!0};return e.saveManager.save(t),Promise.resolve()}return new Promise((a,i)=>{e.saveManager.saveInBackground((function(){try{S(...arguments),a()}catch(e){i(e)}}),(function(){try{P(...arguments),i(arguments.length<=0?void 0:arguments[0])}catch(e){i(e)}}),t,{isPublish:!0})})},configureMockPostPublish:function(){e.panelManager.openPanel("savePublish.panels.publish.config.publishConfigurationPanel",{onConfirm:function(e){(e=i.default.assign({},e,{isFakePublish:!0})).shouldPublishSucceed&&!e.isSiteContributor?v(e):e.shouldPublishSucceed&&e.isSiteContributor?(n.default.log.info("Contributors dont get to see any post operations except failure."),N()):T()}})}}}}.apply(t,i))||(e.exports=s)},2460:function(e,t,a){var i,s;i=[a,t,a(0),a(5),a(4),a(22),a(1),a(11),a(2),a(12),a(6),a(3),a(19),a(9),a(10)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u,c,d,p,_,m){"use strict";i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importDefault(n),o=a.__importDefault(o),r=a.__importStar(r),l=a.__importStar(l),u=a.__importStar(u),c=a.__importDefault(c),d=a.__importDefault(d),p=a.__importStar(p),_=a.__importStar(_),m=a.__importStar(m);const f="".concat("https://premium.wix.com/wix/api/","domainConsole").concat("?siteGuid=<%= siteGUID %>&referralAdditionalInfo=<%= referralInfo %>");return i.default({displayName:"connectDomainPanel",mixins:[r.mixins.editorAPIMixin,l.translationMixin],propTypes:{isPremium:s.default.bool.isRequired,isFirstSave:s.default.bool,isFirstPublish:s.default.bool,title:s.default.string,subtitle:s.default.string,panelName:s.default.string,onConnectDomainFlowEnded:s.default.func,flowId:s.default.oneOf(o.default.values(c.default.CONNECT_DOMAIN.FLOWS)).isRequired},getInitialState:()=>({actionIndexHovered:-1}),connectToNewDomain(){const e=u.events.save.siteWasSavedPanel.CONNECT_NEW_DOMAIN_CLICKED;let t=this.openUpgrade.bind(this,"CONNECT_NEW_DOMAIN");this.props.isPremium&&(t=this.openConnectDomainInWindow.bind(this,"CONNECT_NEW_DOMAIN")),this.connectDomain(e,t)},connectExistingDomain(){const e=u.events.save.siteWasSavedPanel.CONNECT_EXISTING_DOMAIN_CLICKED;let t=this.openUpgrade.bind(this,"CONNECT_EXISTING_DOMAIN");this.props.isPremium&&(t=this.openConnectDomainInWindow.bind(this,"CONNECT_EXISTING_DOMAIN")),this.connectDomain(e,t)},connectDomain(e,t){this.props.isFirstSave&&this.getEditorAPI().bi.event(e);const a=this.listenToTabFocusIfNeeded();t.call(this),this.onClose(a)},listenToTabFocusIfNeeded(){if(this.props.onConnectDomainFlowEnded){const e=function(){this.getWindow().off("focus",e),this.props.onConnectDomainFlowEnded()}.bind(this);return this.getWindow().on("focus",this.onEditorFocus),!0}return!1},onEditorFocus(){this.getWindow().off("focus",this.onEditorFocus),this.props.onConnectDomainFlowEnded()},getReferralCode(e){let t="edhtml_";switch(this.props.flowId){case c.default.CONNECT_DOMAIN.FLOWS.SAVE:t+="SAVE_FLOW_",t+=this.props.isFirstSave?"FIRST_SAVE_":"SECOND_SAVE_",t+=e;break;case c.default.CONNECT_DOMAIN.FLOWS.TOP_BAR:t+="TOP_BAR_SITE_MENU_CONNECT_DOMAIN_".concat(e);break;case c.default.CONNECT_DOMAIN.FLOWS.PUBLISH:t+="PUBLISH_FLOW_",t+=this.props.isFirstPublish?"FIRST_PUBLISH_":"SECOND_PUBLISH_",t+=e;break;case c.default.CONNECT_DOMAIN.FLOWS.PUBLISH_BUTTON:t+="PUBLISH_FLOW_CONNECT_BUTTON_",t+=this.props.isFirstPublish?"FIRST_PUBLISH_":"SECOND_PUBLISH_",t+=e;break;default:t=null}return t},openUpgrade(e){const t=this.getReferralCode(e);this.getEditorAPI().account.upgrade(t)},openConnectDomainInWindow(e){const t=this.createURLWithParams(f,e);window.open(t)},createURLWithParams(e,t){const a=this.getReferralCode(t);return o.default.template(e)({siteGUID:this.getEditorAPI().dsRead.generalInfo.getSiteId(),referralInfo:a})},maybeLater(){this.getEditorAPI().bi.event(u.events.save.siteWasSavedPanel.First_Save_Dialog_2_maybe_later_click),this.onClose(!1)},onClose(e){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName),!e&&this.props.onConnectDomainFlowEnded&&this.props.onConnectDomainFlowEnded()},getWindow:()=>n.default(window),resetHoverOnAction(){this.hoverOnAction(-1)},hoverOnAction(e){this.setState({actionIndexHovered:e})},isActionHovered(e){return this.state.actionIndexHovered===e},getKeyboardShortcuts(){const e=this;return{enter(){e.maybeLater()},esc(){e.onClose(!1)}}},render:function(){return d.default.createElement(p.frames.focusPanelFrame,{panelName:this.props.panelName,shouldHideHeader:!0,frameClassName:"save-publish-panel-frame",keyboardShortcuts:this.getKeyboardShortcuts(),className:"connect-domain-panel save-publish-panel"},d.default.createElement("header",{className:"save-publish-panel-header"},d.default.createElement("button",{onClick:()=>{this.onClose(!1)},className:"close"},d.default.createElement(m.symbol,{name:"headerCloseButton"})),d.default.createElement("span",{className:"title"},this.translateIfNeeded(this.props.title)),d.default.createElement("span",{className:"subtitle"},this.translateIfNeeded(this.props.subtitle))),d.default.createElement("div",{className:"actions"},d.default.createElement("a",{onClick:this.connectToNewDomain,onMouseEnter:()=>{this.hoverOnAction(1)},onMouseLeave:this.resetHoverOnAction,className:"action"},d.default.createElement("div",{className:"action-graphics"},d.default.createElement(_.symbol,{name:"connectNewDomain"})),d.default.createElement("div",{className:"action-title"},this.translateIfNeeded("PREMIUM_BUTTON_1")),this.isActionHovered(1)?null:d.default.createElement("div",{key:"optionArrow",className:"action-arrow"},d.default.createElement(_.symbol,{name:"arrowWithCircle"})),this.isActionHovered(1)?d.default.createElement("div",{key:"optionLink",className:"action-arrow"},d.default.createElement(_.symbol,{name:"openLinkInWindow"})):null),d.default.createElement("a",{onClick:this.connectExistingDomain,onMouseEnter:()=>{this.hoverOnAction(2)},onMouseLeave:this.resetHoverOnAction,className:"action"},d.default.createElement("div",{className:"action-graphics"},d.default.createElement(_.symbol,{name:"connectDomainLight"})),d.default.createElement("div",{className:"action-title"},this.translateIfNeeded("PREMIUM_BUTTON_2")),this.isActionHovered(2)?null:d.default.createElement("div",{key:"optionArrow",className:"action-arrow"},d.default.createElement(_.symbol,{name:"arrowWithCircle"})),this.isActionHovered(2)?d.default.createElement("div",{key:"optionLink",className:"action-arrow"},d.default.createElement(_.symbol,{name:"openLinkInWindow"})):null)),d.default.createElement("div",{className:"connect-domain-panel-footer"},d.default.createElement(_.button,{type:"button",label:"PREMIUM_BUTTON_LABEL",onClick:this.maybeLater,className:"maybe-later-button"})))}})}.apply(t,i))||(e.exports=s)},2461:function(e,t,a){var i,s;i=[a,t,a(0),a(4),a(7),a(2),a(3),a(19),a(9),a(10)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u){"use strict";i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importStar(n),o=a.__importDefault(o),r=a.__importStar(r),l=a.__importStar(l),u=a.__importStar(u);const{connect:c}=n.hoc;class d extends o.default.Component{constructor(){super(...arguments),this.getShortcuts=()=>({esc:this.onClose,enter:this.onClose}),this.openWorkingURL=()=>{window.open(this.props.currentPublicURL)},this.onClose=()=>{this.props.closePanel()}}render(){return o.default.createElement(r.frames.focusPanelFrame,{panelName:this.props.panelName,shouldHideHeader:!0,frameClassName:"save-publish-panel-frame",keyboardShortcuts:this.getShortcuts(),className:"connect-domain-in-progress-panel save-publish-panel"},o.default.createElement("div",{className:"save-publish-panel-header"},o.default.createElement("div",{className:"title"},n.translate("PUBLISH_HANGON_TITLE")),o.default.createElement("div",{className:"subtitle"},n.translate("PUBLISH_HANGON_SUBTITLE")),o.default.createElement("button",{onClick:this.onClose,className:"close-button"},o.default.createElement(u.symbol,{name:"headerCloseButton"}))),o.default.createElement("div",{className:"panel-content"},o.default.createElement("div",{className:"content-top-part"},o.default.createElement("div",{className:"content-graphics"},o.default.createElement(l.symbol,{name:"hangon"})),o.default.createElement("div",{className:"content-top-message"},n.translate("PUBLISH_HANGON_MAIN_TEXT"),o.default.createElement("span",{className:"public-url"},this.props.connectedDomainURL))),o.default.createElement("div",{className:"content-bottom-message"},n.translate("PUBLISH_HANGON_MEANTIME_TEXT"),o.default.createElement("a",{onClick:this.openWorkingURL,className:"content-bottom-message-link"},n.translate("PUBLISH_HANGON_CLICKING_HERE_LINK")))),o.default.createElement("div",{className:"connect-domain-panel-footer"},o.default.createElement(l.button,{type:"button",label:"PUBLISH_HANGON_DONE_BUTTON",onClick:this.onClose,className:"maybe-later-button"})))}}d.displayName="connectDomainInProgress",d.propTypes={connectedDomainURL:i.default.string.isRequired,currentPublicURL:i.default.string.isRequired,panelName:i.default.string,closePanel:i.default.func.isRequired};return c([],void 0,(e,t)=>({closePanel(){e(s.default.editorPlugins.panels.actions.closePanelByNameAction(t.panelName))}}))(d)}.apply(t,i))||(e.exports=s)},2462:function(e,t,a){var i,s;i=[a,t,a(0),a(2463)],void 0===(s=function(e,t,a,i){"use strict";return{failPanel:(i=a.__importDefault(i)).default}}.apply(t,i))||(e.exports=s)},2463:function(e,t,a){var i,s;i=[a,t,a(0),a(1),a(43),a(5),a(4),a(11),a(2),a(6),a(3),a(9),a(8),a(19)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u,c,d,p,_){"use strict";return i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importDefault(n),o=a.__importDefault(o),r=a.__importStar(r),l=a.__importStar(l),u=a.__importDefault(u),c=a.__importDefault(c),d=a.__importStar(d),p=a.__importDefault(p),_=a.__importStar(_),n.default({displayName:"failPanel",mixins:[r.mixins.editorAPIMixin],propTypes:{titleKey:o.default.string.isRequired,description:o.default.string.isRequired,stepsTitle:o.default.string,steps:o.default.array.isRequired,helpMessage:o.default.string.isRequired,helpLinkMessage:o.default.string.isRequired,helpLink:o.default.string.isRequired,errorCode:o.default.number,biEvent:o.default.object,biParams:o.default.object,failHelpId:o.default.string,biConfirm:o.default.object,biHelp:o.default.object,biCancel:o.default.object,onConfirm:o.default.func,confirmLabel:o.default.string,panelName:o.default.string,translateArgs:o.default.object},getDefaultProps:()=>({showSteps:!0,showFooterText:!0,panelName:"savePublish.panels.common.failPanel",translateArgs:{}}),translateProp(e){return this.props[e]&&l.translationUtil.translateTemplate(this.props[e],this.props.translateArgs[e])},getShortcuts(){const e=this;return{esc(){e.getEditorAPI().panelManager.closePanelByName(e.props.panelName),e.onCancel()},enter(){e.getEditorAPI().panelManager.closePanelByName(e.props.panelName),e.onConfirm()}}},getErrorCodeMessage(){return void 0!==this.props.errorCode&&null!==this.props.errorCode?" (Error Code: ".concat(this.props.errorCode,")"):""},getFooterText(){return-41218===this.props.errorCode?"":s.default.p({className:"fail-panel-help-text"},s.default.span({className:"text-part"},l.translate(this.props.helpMessage)),s.default.a({onClick:this.openHelpLink,className:"link-part"},l.translate(this.props.helpLinkMessage)),s.default.span({className:"error-code-part"},this.getErrorCodeMessage()))},getConfirmLabel(){return-41218===this.props.errorCode?"PUBLISH_ERROR_SITE_DELETED_LINK":this.props.confirmLabel||"SAVE_PUBLISH_ERROR_BUTTON_OK"},onCancel(){this.props.biCancel&&this.getEditorAPI().bi.event(this.props.biCancel)},onConfirm(){this.props.biConfirm&&this.getEditorAPI().bi.event(this.props.biConfirm),-41218!==this.props.errorCode?i.default.invoke(this.props,"onConfirm"):window.location="https://wix.com/"},openHelpLink(){const e=this.getEditorAPI();this.props.biHelp&&this.getEditorAPI().bi.event(this.props.biHelp);const t={panel_name:this.props.panelName,origin:u.default.BI.HELP.ORIGIN.PANEL,learn_more:!0};e.panelManager.openHelpCenter(this.props.helpLink,null,t),e.panelManager.closePanelByName(this.props.panelName)},sendPanelLoadedBiEvent(){this.props.biEvent&&this.props.biParams&&this.getEditorAPI().bi.event(this.props.biEvent,this.props.biParams)},componentDidMount(){this.sendPanelLoadedBiEvent()},render(){return c.default.createElement(_.frames.messagePanelFrame,{panelName:this.props.panelName,cancelLabel:this.props.cancelLabel,panelTitle:l.translate(this.props.titleKey),confirmLabel:this.getConfirmLabel(),onConfirm:this.onConfirm,onCancel:this.onCancel,footerText:this.props.showFooterText?this.getFooterText():null,keyboardShortcuts:this.getShortcuts(),className:"fail-panel"},c.default.createElement(p.default.Composites.RichTextWithIllustration,null,c.default.createElement(p.default.Illustration,null,c.default.createElement(d.symbol,{name:"plaster"})),c.default.createElement(p.default.Composites.RichText,null,-41218!==this.props.errorCode?c.default.createElement(p.default.RichText,{type:"T01",key:"errorNot-41218",className:"fail-panel__message"},c.default.createElement("p",{dangerouslySetInnerHTML:{__html:this.translateProp("description")},className:"description"}),this.props.showSteps&&this.props.stepsTitle?c.default.createElement("div",{key:"stepsTitle",className:"steps-title"},this.translateProp("stepsTitle")):null,this.props.showSteps?c.default.createElement("ol",{key:"steps"},i.default.map(this.props.steps,e=>c.default.createElement("li",{key:e},l.translate(e)))):null):null,-41218===this.props.errorCode?c.default.createElement(p.default.RichText,{type:"T01",key:"error-41218",className:"fail-panel__message"},c.default.createElement("h3",null,l.translate("PUBLISH_ERROR_SITE_DELETED_TITLE")),c.default.createElement("p",{className:"description"},l.translate("PUBLISH_ERROR_SITE_DELETED_BODY"))):null)))}})}.apply(t,i))||(e.exports=s)},2464:function(e,t,a){var i,s;i=[a,t,a(0),a(2465),a(2466),a(2468),a(2469),a(2470),a(2471),a(2472)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u){"use strict";return i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importDefault(n),o=a.__importDefault(o),r=a.__importDefault(r),l=a.__importDefault(l),u=a.__importDefault(u),{chooseDomainPanel:i.default,siteWasSavedPanel:s.default,concurrentSavePanel:n.default,saveConfigurationPanel:o.default,saveReminderPanel:r.default,onBoardingMigrationConfirmationPanel:l.default,saveYourSitePanel:u.default}}.apply(t,i))||(e.exports=s)},2465:function(e,t,a){var i,s;i=[a,t,a(0),a(5),a(4),a(1),a(11),a(2),a(12),a(6),a(3),a(19),a(9),a(10),a(2)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u,c,d,p,_,m){"use strict";return i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importDefault(n),o=a.__importStar(o),r=a.__importStar(r),l=a.__importStar(l),u=a.__importDefault(u),c=a.__importDefault(c),d=a.__importStar(d),p=a.__importStar(p),_=a.__importStar(_),i.default({displayName:"chooseDomainPanel",mixins:[o.mixins.editorAPIMixin],propTypes:{defaultSiteName:s.default.string.isRequired,freeDomainPrefix:s.default.string.isRequired,freeDomainHandler:s.default.func.isRequired,connectDomainHandler:s.default.func.isRequired,overrideTitle:s.default.string,overrideSubtitle:s.default.string,panelName:s.default.string,isDomainConnected:s.default.bool,isSitePublished:s.default.bool},DomainStates:{FREE:"free",BUY:"buy"},getInitialState(){const e=this.getEditorAPI().siteName.validate(this.props.defaultSiteName);return{domainChoice:this.DomainStates.FREE,siteName:this.props.defaultSiteName,sanitizedSiteName:this.props.defaultSiteName,isActionDisabled:!e.success}},getTitle(){return r.translate(this.props.overrideTitle||"SAVE_CHOOSE_DOMAIN_TITLE_TITLE")},getSubtitle(){return r.translate(this.props.overrideSubtitle||"SAVE_CHOOSE_DOMAIN_TITLE_SUBTITLE")},getOptions(){const e={};return e[this.DomainStates.FREE]={value:"free",label:r.translate("SAVE_CHOOSE_DOMAIN_BODY_RADIO_BUTTON_1"),prefix:this.props.freeDomainPrefix,domain:this.state.siteName,isEditable:this.state.domainChoice===this.DomainStates.FREE,domainValidator:this.getEditorAPI().siteName.validate},e[this.DomainStates.BUY]={value:"buy",label:r.translate("SAVE_CHOOSE_DOMAIN_BODY_RADIO_BUTTON_2_LINE1"),domain:r.translate("SAVE_CHOOSE_DOMAIN_BODY_RADIO_BUTTON_2_LINE2"),isEditable:!1},e},getNextDomainOptionValue(){return this.state.domainChoice===this.DomainStates.FREE?this.DomainStates.BUY:this.DomainStates.FREE},getActionButtonLabel:()=>r.translate("SAVE_CHOOSE_DOMAIN_BUTTON_SAVENCONTINUE"),handleDomainChanged(e){const t={};t.isActionDisabled=!e.isValid,t.siteName=e.value,t.sanitizedSiteName=e.sanitizedValue,this.setState(t)},handleDomainOptionSelected(e){if(!n.default.isEqual(this.state.domainChoice,e)){const t={domainChoice:e};if(e===this.DomainStates.BUY)t.isActionDisabled=!1,t.siteName=this.props.defaultSiteName,t.sanitizedSiteName=this.props.defaultSiteName;else{const e=this.getEditorAPI().siteName.validate(this.props.defaultSiteName);t.isActionDisabled=!e.success}this.setState(t),this.reportDomainClickedBI(e)}},handleAction(){if(this.reportActionButtonClickedBI(this.state.domainChoice),this.state.isActionDisabled)throw new Error("Should not get to handleAction if continue button is disabled");this.state.domainChoice===this.DomainStates.FREE?(r.browserUtil.setTabTitle(r.browserUtil.getEditorTitleBySiteName(this.state.siteName)),this.close(),this.props.freeDomainHandler(this.state.sanitizedSiteName)):this.state.domainChoice===this.DomainStates.BUY&&(this.close(),this.props.connectDomainHandler())},reportActionButtonClickedBI(e){const t=this.getEditorAPI(),a=e===this.DomainStates.BUY?"connect your own domain":"free WIX domain";t.bi.event(l.events.save.chooseDomainPanel.ACTION_BUTTON_CLICKED,{value_selected:a})},reportDomainClickedBI(e){const t=this.getEditorAPI(),a=e===this.DomainStates.BUY?"connect your own domain":"free WIX domain";t.bi.event(l.events.save.chooseDomainPanel.DOMAIN_OPTION_CLICKED,{selection:a})},getUserStatus(){let e="";return this.props.isSitePublished||(e+="not_"),e+="published_",this.props.isDomainConnected||(e+="not_"),e+="connected",e},domainInputBiReporter(e){const t={user_status:"not_published_not_connected",panel_name:this.props.panelName,save_or_publish:"save",is_first_save_or_publish:1};this.getEditorAPI().bi.event(l.events.domainInput[e],t)},cancel(){this.props.origin===u.default.CONNECT_DOMAIN.FLOWS.PUBLISH&&r.fedopsLogger.interactionEnded(r.fedopsLogger.INTERACTIONS.USER_PUBLISH_SITE),this.close()},close(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},getKeyboardShortcuts(){const e=this;return{enter(){e.state.isActionDisabled||e.handleAction()},esc(){e.cancel()},tab(t){e.handleDomainOptionSelected(e.getNextDomainOptionValue()),t.preventDefault()}}},render(){const e=this.getOptions()[this.DomainStates.FREE],t=this.getOptions()[this.DomainStates.BUY];return c.default.createElement(d.frames.focusPanelFrame,{panelName:this.props.panelName,shouldHideHeader:!0,frameClassName:"save-publish-panel-frame",keyboardShortcuts:this.getKeyboardShortcuts(),className:"choose-domain-panel save-publish-panel"},c.default.createElement("header",{className:"save-publish-panel-header"},c.default.createElement("button",{onClick:this.cancel,className:"close"},c.default.createElement(_.symbol,{name:"headerCloseButton"})),c.default.createElement("span",{className:"title"},this.getTitle()),c.default.createElement("span",{className:"subtitle"},this.getSubtitle())),c.default.createElement("label",{className:m.cx({"domain-option":!0,checked:this.state.domainChoice===this.DomainStates.FREE})},c.default.createElement("span",{className:"domain-option-label"},e.label),c.default.createElement("input",{type:"radio",name:"domain-options",value:e.value,checked:this.state.domainChoice===e.value,onChange:()=>{this.handleDomainOptionSelected(e.value)},className:"domain-option-radio-button"}),c.default.createElement("span",null),c.default.createElement("div",{className:"domain-input"},c.default.createElement(p.domainInput,{value:e.domain,onChange:this.handleDomainChanged,prefix:e.prefix,isEditable:e.isEditable,domainValidator:e.domainValidator,biHandler:this.domainInputBiReporter}))),c.default.createElement("label",{className:m.cx({"domain-option":!0,checked:this.state.domainChoice===this.DomainStates.BUY})},c.default.createElement("span",{className:"domain-option-label"},t.label),c.default.createElement("input",{type:"radio",name:"domain-options",value:t.value,checked:this.state.domainChoice===t.value,onChange:()=>{this.handleDomainOptionSelected(t.value)},className:"domain-option-radio-button"}),c.default.createElement("span",null),c.default.createElement("span",{className:"connect-domain-example"},t.domain)),c.default.createElement(p.button,{shouldTranslate:!1,label:this.getActionButtonLabel(),onClick:this.handleAction,disabled:this.state.isActionDisabled,className:"choose-domain-action-button"}))}})}.apply(t,i))||(e.exports=s)},2466:function(e,t,a){var i,s;i=[a,t,a(0),a(27),a(5),a(4),a(1),a(11),a(12),a(2),a(7),a(553),a(204),a(554),a(6),a(2467),a(3),a(19),a(9),a(8),a(10),a(2)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u,c,d,p,_,m,f,h,S,E,P,g,b){"use strict";i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importDefault(n),o=a.__importDefault(o),r=a.__importStar(r),l=a.__importStar(l),u=a.__importStar(u),c=a.__importDefault(c),d=a.__importDefault(d),p=a.__importDefault(p),_=a.__importDefault(_),m=a.__importDefault(m),f=a.__importDefault(f),h=a.__importDefault(h),S=a.__importStar(S),E=a.__importStar(E),P=a.__importDefault(P),g=a.__importStar(g);const I="PUBLISH",N="CONNECT_DOMAIN";function T(e){const t=e.lastIndexOf("/");return{prefix:e.slice(0,t+1),siteName:e.slice(t+1)}}return s.default({displayName:"siteWasSavedPanel",mixins:[i.default,r.mixins.editorAPIMixin],propTypes:{domain:n.default.string.isRequired,isSitePremium:n.default.bool,isFirstSave:n.default.bool,isDomainConnected:n.default.bool,isSitePublished:n.default.bool,isMockSave:n.default.bool,overrideTitle:n.default.string,overrideSubtitle:n.default.string,panelName:n.default.string,callback:n.default.func},getInitialState(){const e={isContinueDisabled:!1,doNotShowAgain:null,domain:this.props.domain};return this.props.isFirstSave||(e.doNotShowAgain=!!c.default.editorPlugins.userPreferences.selectors.getSessionUserPreferences(m.default.USER_PREFS.SAVE.SITE_SAVED_DONT_SHOW_AGAIN)(this.getEditorAPI().store.getState())),e},getPanelTitle(){return u.translate(this.props.overrideTitle||"SAVE_SITE_SAVED_TITLE_TITLE")},getPanelSubtitle(){return u.translate(this.props.overrideSubtitle||"SAVE_SITE_SAVED_TITLE_SUBTITLE")},getDomainInputProps(){let e;const t=this.state.domain;if(!this.props.isDomainConnected){const a=T(t);e={prefix:a.prefix,value:a.siteName,isEditable:!0,domainValidator:this.getEditorAPI().siteName.validate,domainHandler:this.props.isMockSave?null:this.renameSiteAndProcessResult,onChange:this.handleDomainEditingStatusChanged}}else e={value:t,isEditable:!1};return e.biHandler=this.domainInputBiReporter,e},getInnerPanelType(){return this.props.isSitePublished?this.props.isDomainConnected?void 0:N:I},getInnerPanel(){switch(this.getInnerPanelType()){case I:return f.default;case N:return _.default}},getPanelClass(){let e="site-was-saved-panel";const t=this.getInnerPanelClass();return e+=t?" contains-".concat(t):"",this.props.isSitePremium&&this.props.isSitePublished&&this.props.isDomainConnected&&(e+=" narrow-domain-input"),"".concat(e," save-publish-panel")},getInnerPanelClass(){switch(this.getInnerPanelType()){case I:return"publish-inner-panel";case N:return"connect-domain-inner-panel"}},getInnerPanelProps(){const e={sitePublishedDomain:this.props.domain,isDomainConnected:this.props.isDomainConnected,isFirstPublish:!this.props.isSitePublished,isSitePremium:this.props.isSitePremium,isFirstSave:this.props.isFirstSave,flowId:m.default.CONNECT_DOMAIN.FLOWS.SAVE,closePanel:this.close},t=this.getInnerPanelType(),a=this.getEditorAPI();switch(t){case I:e.publishMethod=this.props.isMockSave?a.publishManager.configureMockPostPublish:a.publishManager.publish,this.props.isMockSave||(e.actionCallback=function(){this.reportPublishClickedBI(),this.getEditorAPI().bi.event(l.events.publish.PUBLISH_CLICK,{origin:"saveSuccessPanel"})}.bind(this));break;case N:this.props.isMockSave||(e.actionCallback=this.reportConnectDomainClickedBI)}return e},shouldDisplayInnerPanel(){return!this.props.isSitePublished||!this.props.isDomainConnected},continueToPublish(){u.fedopsLogger.interactionStarted(u.fedopsLogger.INTERACTIONS.USER_PUBLISH_SITE),u.fedopsLogger.interactionStarted(u.fedopsLogger.INTERACTIONS.DEALER_IN_POST_PUBLISH),this.props.isMockSave||(this.getEditorAPI().bi.event(l.events.publish.PUBLISH_CLICK,{origin:"saveSuccessPanel"}),this.reportBIWithUserStatus(l.events.save.siteWasSavedPanel.SECOND_SAVE_PUBLISH_NOW_BUTTON_CLICKED)),this.close(),this.getEditorAPI().publishManager.publish()},continueEditing(){if(this.props.isMockSave||(this.props.isFirstSave?this.getEditorAPI().bi.event(l.events.save.siteWasSavedPanel.FIRST_SAVE_ACTION_BUTTON_CLICKED,{}):this.reportBIWithUserStatus(l.events.save.siteWasSavedPanel.SECOND_SAVE_ACTION_BUTTON_CLICKED)),this.state.isContinueDisabled)throw new Error("Should not get to continueEditing if continue button is disabled");this.state.doNotShowAgain&&this.getEditorAPI().store.dispatch(c.default.editorPlugins.userPreferences.actions.setSiteUserPreferences(m.default.USER_PREFS.SAVE.SITE_SAVED_DONT_SHOW_AGAIN,Date.now())),this.close()},reportBIWithUserStatus(e){const t={user_status:this.getUserStatus()};this.getEditorAPI().bi.event(e,t)},getUserStatus(){let e="";return this.props.isSitePublished||(e+="not_"),e+="published_",this.props.isDomainConnected||(e+="not_"),e+="connected",e},renameSiteAndProcessResult(e,t,a){const i=this.getEditorAPI();i.siteName.rename(e,(function(){t()}),(function(e){const t=e&&e.errorCode;if(t===d.default.RENAME.ERRORS.SITE_NAME_TAKEN)a("SAVE_SITE_NAME_ALREADY_EXISTS");else{a();const e=o.default.chain(p.default.NAME_SITE_AGAIN_PANEL_DATA).clone().defaults(p.default.SAVE_ERROR_DEFAULT_PANEL_DATA).assign({errorCode:t}).value();i.panelManager.openPanel("savePublish.panels.common.failPanel",e,!0)}}))},handleDomainEditingStatusChanged(e){const t={};if(e){const a=T(this.props.domain).prefix;t.isContinueDisabled=!1,t.domain=a+e}else t.isContinueDisabled=!0;this.setState(t)},handleNeedHelpConnectingDomainClicked(){this.getEditorAPI().bi.event(l.events.save.siteWasSavedPanel.HELP_CONNECTING_DOMAIN_CLICKED,{})},handleDontShowAgainClicked(e){this.setState({doNotShowAgain:e}),this.getEditorAPI().bi.event(l.events.save.siteWasSavedPanel.SECOND_SAVE_DONT_SHOW_AGAIN_CLICKED,{toggle:e,user_status:this.getUserStatus()})},reportPublishClickedBI(){this.getEditorAPI().bi.event(l.events.save.siteWasSavedPanel.PUBLISH_NOW_CLICKED,{user_status:this.getUserStatus(),is_first_save:this.props.isFirstSave?1:0})},reportConnectDomainClickedBI(){this.getEditorAPI().bi.event(l.events.save.siteWasSavedPanel.SECOND_SAVE_CONNECT_DOMAIN_CLICKED,{user_status:this.getUserStatus()})},domainInputBiReporter(e){if(!this.props.isMockSave){const t={user_status:this.getUserStatus(),panel_name:this.props.panelName,save_or_publish:"save",is_first_save_or_publish:this.props.isFirstSave?1:0};this.getEditorAPI().bi.event(l.events.domainInput[e],t)}},componentWillUnmount(){this.props.callback&&this.props.callback()},close(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},getKeyboardShortcuts(){const e=this;return{enter(){e.state.isContinueDisabled||e.continueEditing()},esc(){e.close()}}},render(){var e;const t=this.getInnerPanel();return h.default.createElement(S.frames.focusPanelFrame,{panelName:this.props.panelName,shouldHideHeader:!0,frameClassName:"save-publish-panel-frame",keyboardShortcuts:this.getKeyboardShortcuts(),className:this.getPanelClass()},h.default.createElement("header",{className:"save-publish-panel-header"},h.default.createElement("button",{onClick:this.close,className:"close"},h.default.createElement(g.symbol,{name:"headerCloseButton"})),h.default.createElement("span",{className:"title"},this.getPanelTitle()),h.default.createElement("span",{className:"subtitle"},this.getPanelSubtitle())),h.default.createElement("div",{className:"wrapper"},h.default.createElement("div",{className:"domain-input"},h.default.createElement(E.domainInputWithEditButtons,Object.assign({},this.getDomainInputProps()))),this.shouldDisplayInnerPanel()?h.default.createElement(t,Object.assign({key:"innerPanel"},this.getInnerPanelProps(),{className:b.cx("inner-panel ".concat(this.getInnerPanelClass()),null===(e=this.getInnerPanelProps())||void 0===e?void 0:e.className)})):null,h.default.createElement("div",{className:"site-saved-footer"},this.props.isFirstSave?null:h.default.createElement(P.default.Checkbox,{key:"dontShowAgainCheckbox",label:"SAVE_PUBLISH_DO_NOT_SHOW_AGAIN_LABEL",valueLink:{value:this.state.doNotShowAgain,requestChange:this.handleDontShowAgainClicked},labelAfterSymbol:!0,className:"dont-show-again"}),this.props.isSitePremium&&!this.props.isDomainConnected&&this.props.isFirstSave?h.default.createElement("span",{key:"needHelpConnectingDomain",className:"help-connecting-domain"},"".concat(u.translate("SAVE_SITE_SAVED_NEED_HELP_LABEL")," "),h.default.createElement("a",{target:"_blank",href:u.translate("SAVE_SITE_SAVED_NEED_HELP_URL"),onClick:this.handleNeedHelpConnectingDomainClicked},u.translate("SAVE_SITE_SAVED_NEED_HELP_LINK"))):null,h.default.createElement("div",{className:"footer-buttons"},this.props.isSitePublished?h.default.createElement(E.button,{onClick:this.continueToPublish,key:"publishButton",label:"SAVE_SITE_SAVED_WHATS_NEXT_PUBLISH_LINK",disabled:this.state.isContinueDisabled,className:"publish-button btn-confirm-secondary"}):null,h.default.createElement(E.button,{label:"SAVE_SITE_SAVED_BUTTON_OK",onClick:this.continueEditing,disabled:this.state.isContinueDisabled,className:"continue-button btn-confirm-primary"})))))}})}.apply(t,i))||(e.exports=s)},2467:function(e,t,a){var i,s;i=[a,t,a(0),a(5),a(4),a(11),a(3),a(293)],void 0===(s=function(e,t,a,i,s,n,o,r){"use strict";return i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importStar(n),o=a.__importDefault(o),r=a.__importDefault(r),i.default({displayName:"publishContent",mixins:[n.mixins.editorAPIMixin],propTypes:{closePanel:s.default.func.isRequired,publishMethod:s.default.func.isRequired,className:s.default.string,actionCallback:s.default.func},getClassName(){return"publish-site-content".concat(this.props.className?" ".concat(this.props.className):"")},getGeneralContentProps(){return{symbolName:"publishSite",mainTitle:"SAVE_SITE_SAVED_WHATS_NEXT_LABEL",title:"SAVE_SITE_SAVED_WHATS_NEXT_PUBLISH_LINE",actionLabel:"SAVE_SITE_SAVED_WHATS_NEXT_PUBLISH_LINK",actionCallback:this.publishSite}},publishSite(){this.props.closePanel(),this.props.publishMethod(),this.props.actionCallback&&this.props.actionCallback()},render(){return o.default.createElement(r.default,Object.assign({className:this.getClassName()},this.getGeneralContentProps()))}})}.apply(t,i))||(e.exports=s)},2468:function(e,t,a){var i,s;i=[a,t,a(0),a(5),a(1),a(4),a(11),a(12),a(2),a(17),a(3),a(19),a(9)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u,c,d,p){"use strict";return i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importDefault(n),o=a.__importStar(o),r=a.__importStar(r),l=a.__importStar(l),u=a.__importDefault(u),c=a.__importDefault(c),d=a.__importStar(d),p=a.__importStar(p),i.default({displayName:"concurrentSavePanel",mixins:[o.mixins.editorAPIMixin],propTypes:{overrideSaveMethod:n.default.func.isRequired,panelName:n.default.string,origin:n.default.string},isAutosave(){return"autosave"===this.props.origin},getTitle:()=>"Concurrent_Editing_Error_Header",getTextClassName:()=>"description-line initialPadding",getBodyText:()=>["Concurrent_Editing_Error_Text1","Concurrent_Editing_Error_Text2","Concurrent_Editing_Error_Text3"],getConfirmLabel:()=>"Concurrent_Editing_Error_Save_Button",getCancelLabel:()=>"Concurrent_Editing_Error_Update_Button",overrideSave(){this.props.overrideSaveMethod?(this.props.overrideSaveMethod(this.getEditorAPI),this.sendBI("save")):u.default.log.info("Mock Overriding Save"),this.close()},reloadEditor(){l.windowInteractionUtils.reloadPageWithoutQuestion()},handleCancel(){this.props.overrideSaveMethod&&this.sendBI("update"),this.close(),this.reloadEditor()},close(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},sendBI(e){const t=r.events.save.saveFailed,a=this.isAutosave()?t.CONCURRENT_AUTOSAVE:t.CONCURRENT_SAVE;this.getEditorAPI().bi.event(a,{selection:e})},getKeyboardShortcuts(){const e=this;return{esc(){e.close()}}},render(){return c.default.createElement(d.frames.confirmationPanelFrame,{panelName:this.props.panelName,panelTitle:l.translate(this.getTitle()),keyboardShortcuts:this.getKeyboardShortcuts(),confirmLabel:this.getConfirmLabel(),cancelLabel:this.getCancelLabel(),onConfirm:this.overrideSave,onCancel:this.handleCancel,onClose:this.close,className:"concurrent-save-panel save-publish-panel"},c.default.createElement("div",{className:"content-wrapper"},c.default.createElement("div",{className:"error-logo"},c.default.createElement(p.symbol,{name:"bicycle"})),c.default.createElement("div",{className:"description-wrapper"},s.default.map(this.getBodyText(),e=>c.default.createElement("div",{key:e,className:this.getTextClassName()},l.translate(e))))))}})}.apply(t,i))||(e.exports=s)},2469:function(e,t,a){var i,s;i=[a,t,a(0),a(27),a(5),a(4),a(11),a(17),a(3),a(19),a(9),a(8),a(2)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u,c,d,p){"use strict";return i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importDefault(n),o=a.__importStar(o),r=a.__importDefault(r),l=a.__importDefault(l),u=a.__importStar(u),c=a.__importStar(c),d=a.__importDefault(d),s.default({displayName:"SaveConfigurationPanel",mixins:[i.default,o.mixins.editorAPIMixin],propTypes:{onConfirm:n.default.func.isRequired,panelName:n.default.string},getInitialState:()=>({isSitePremium:!1,isFirstSave:!0,isDomainConnected:!1,domain:"http://www.my-domain.com",isSitePublished:!1,shouldSaveSucceed:!0}),getFrameProps(){return{panelName:this.props.panelName}},openConcurrentSave(){this.getEditorAPI().panelManager.openPanel("savePublish.panels.save.concurrentSavePanel",{overrideSaveMethod(){r.default.log.info("Override Save")}},!0)},openSaveReminder(){this.getEditorAPI().panelManager.openPanel("savePublish.panels.save.saveReminderPanel",{saveMethod:this.onConfirm},!0)},componentWillUpdate(e,t){t.isFirstSave&&t.isSitePublished&&this.setState({isSitePublished:!1,isFirstSave:!0})},premiumToggled(){const e=!this.state.isSitePremium;this.setState({isSitePremium:e,isDomainConnected:!!e&&this.state.isDomainConnected})},domainConnectedToggled(){const e=!this.state.isDomainConnected;this.setState({isDomainConnected:e,isSitePremium:e||this.state.isSitePremium})},onConfirm(){this.props.onConfirm({isSitePremium:this.state.isSitePremium,isFirstSave:this.state.isFirstSave,isDomainConnected:this.state.isDomainConnected,domain:this.state.domain,isSitePublished:this.state.isSitePublished,shouldSaveSucceed:this.state.shouldSaveSucceed})},close(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},render(){var e;return l.default.createElement(u.frames.emptyPanelFrame,Object.assign({ref:"frame"},this.getFrameProps(),{className:p.cx("save-configuration-panel",null===(e=this.getFrameProps())||void 0===e?void 0:e.className)}),l.default.createElement("a",{onClick:this.close,className:"close-button"},"x"),l.default.createElement("h2",{style:{textAlign:"center"}},"Save Testing Configuration"),l.default.createElement(d.default.Checkbox,{label:"First save",valueLink:this.linkState("isFirstSave"),shouldTranslate:!1,labelAfterSymbol:!0,className:"checkbox-field"}),l.default.createElement(d.default.Checkbox,{label:"Save succeeds",valueLink:this.linkState("shouldSaveSucceed"),shouldTranslate:!1,labelAfterSymbol:!0,className:"checkbox-field"}),l.default.createElement("p",null,l.default.createElement("br",null),"Premium Interaction:"),l.default.createElement(d.default.Checkbox,{label:"Site is/upgraded-to premium",value:this.state.isSitePremium,onChange:this.premiumToggled,shouldTranslate:!1,labelAfterSymbol:!0,className:"checkbox-field"}),l.default.createElement(d.default.Checkbox,{label:"Domain is/will-be connected",value:this.state.isDomainConnected,onChange:this.domainConnectedToggled,shouldTranslate:!1,labelAfterSymbol:!0,className:"checkbox-field"}),l.default.createElement(c.textInput,{shouldTranslate:!1,label:"Custom Domain",valueLink:this.linkState("domain"),disabled:!this.state.isDomainConnected,className:"domain-text-field"}),l.default.createElement(d.default.Checkbox,{label:"Site is published",valueLink:this.linkState("isSitePublished"),disabled:this.state.isFirstSave,shouldTranslate:!1,labelAfterSymbol:!0,className:"checkbox-field".concat(this.state.isFirstSave?" disabled":"")}),l.default.createElement("button",{shouldTranslate:!1,onClick:this.openConcurrentSave,className:"concurrent-save-button"},"Concurrent Save"),l.default.createElement("button",{shouldTranslate:!1,onClick:this.openSaveReminder,className:"save-reminder-button"},"Save Reminder"),l.default.createElement("div",{className:"save-configuration-footer"},l.default.createElement(c.button,{shouldTranslate:!1,label:"Start Save",onClick:this.onConfirm,className:"confirm-button"})))}})}.apply(t,i))||(e.exports=s)},2470:function(e,t,a){var i,s;i=[a,t,a(0),a(5),a(4),a(11),a(12),a(3),a(2),a(9),a(8),a(19),a(13)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u,c,d,p){"use strict";return i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importStar(n),o=a.__importStar(o),r=a.__importDefault(r),l=a.__importStar(l),u=a.__importStar(u),c=a.__importDefault(c),d=a.__importStar(d),p=a.__importDefault(p),i.default({displayName:"saveReminderPanel",mixins:[n.mixins.editorAPIMixin],propTypes:{saveMethod:s.default.func.isRequired,panelName:s.default.string,mainText:s.default.string,headerText:s.default.string,buttonText:s.default.string},componentWillMount(){this.getEditorAPI().bi.event(o.events.save.saveReminder.REMINDER_DISPLAYED,{origin:"pop up message"})},handleSave(){this.getEditorAPI().bi.event(o.events.save.saveReminder.SAVE_CLICKED,{}),this.close(),this.props.saveMethod()},getKeyboardShortcuts(){const e=this;return{enter(){e.close(),e.handleSave()},esc(){e.close()}}},close(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},render(){return p.default.isOpen("disableSaveReminder")?null:r.default.createElement(d.frames.messagePanelFrame,{ref:"frame",key:"saveReminder",panelName:this.props.panelName,panelTitle:l.translate(this.props.headerText?this.props.headerText:"SAVE_REMINDER_MSG_TITLE"),confirmLabel:this.props.buttonText?this.props.buttonText:"SAVE_REMINDER_MSG_BUTTON",onConfirm:this.handleSave,keyboardShortcuts:this.getKeyboardShortcuts(),className:"save-reminder-panel save-publish-panel"},r.default.createElement(c.default.Composites.RichTextWithIllustration,null,r.default.createElement(c.default.Illustration,null,r.default.createElement(u.symbol,{name:"saveYourWork"})),r.default.createElement(c.default.Composites.RichText,null,r.default.createElement(c.default.RichText,{type:"T01"},l.translate(this.props.mainText?this.props.mainText:"SAVE_REMINDER_MSG_BODY")))))}})}.apply(t,i))||(e.exports=s)},2471:function(e,t,a){var i,s;i=[a,t,a(0),a(5),a(4),a(2),a(11),a(12),a(3),a(19),a(9)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u,c){"use strict";i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importStar(n),o=a.__importStar(o),r=a.__importStar(r),l=a.__importDefault(l),u=a.__importStar(u),c=a.__importStar(c);const d="Go Back to Wix ADI",p="Save Changes";function _(e,t){e.bi.event(r.events.ON_BOARDING_MIGRATION.PANEL_ACTION_CLICKED,{action:t})}return i.default({displayName:"onBoardingMigrationConfirmationPanel",propTypes:{panelName:s.default.string.isRequired,onConfirm:s.default.func.isRequired,onCancel:s.default.func},mixins:[n.translationMixin,o.mixins.editorAPIMixin],saveDocument(){_(this.getEditorAPI(),p),this.props.onConfirm(),this.close()},navigateToOnBoarding(){this.props.onCancel(),_(this.getEditorAPI(),d),window.location=n.editorModel.onboardingEditorUrl},close(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},render(){return l.default.createElement(u.frames.focusPanelFrame,{ref:"frame",key:"onBoardingMigrationConfirmationPanel",shouldHideHelp:!0,title:this.translateIfNeeded("ADI_EDITOR_MIGRATION_SAVEPOPUP_TITLE"),panelName:this.props.panelName,className:"save-on-boarding-site-confirm-panel"},l.default.createElement("div",{className:"save-on-boarding-site-confirm-content"},l.default.createElement("div",{className:"image-container"},l.default.createElement(c.symbol,{name:"obMigrationBeforeSave"})),l.default.createElement("div",{className:"description-container"},l.default.createElement("span",{className:"description-text"},this.translateIfNeeded("ADI_EDITOR_MIGRATION_SAVEPOPUP_TEXT"))),l.default.createElement("div",{className:"footer-buttons"},l.default.createElement(c.button,{onClick:this.navigateToOnBoarding,label:"ADI_EDITOR_MIGRATION_SAVEPOPUP_BUTTON_ADI",className:"btn-confirm-secondary btn-md footer-button"}),l.default.createElement(c.button,{onClick:this.saveDocument,label:"ADI_EDITOR_MIGRATION_SAVEPOPUP_BTN_SAVE",className:"btn-confirm-primary btn-md footer-button"}))))}})}.apply(t,i))||(e.exports=s)},2472:function(e,t,a){var i,s;i=[a,t,a(0),a(5),a(4),a(11),a(3),a(2),a(9),a(8),a(19)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u,c){"use strict";return i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importStar(n),o=a.__importDefault(o),r=a.__importStar(r),l=a.__importStar(l),u=a.__importDefault(u),c=a.__importStar(c),i.default({displayName:"saveYourSitePanel",mixins:[n.mixins.editorAPIMixin],propTypes:{title:s.default.string.isRequired,panelName:s.default.string,messageBody:s.default.string.isRequired},getInitialState(){return this.keyboardShortcuts={enter:this.handleSave,esc:this.close},{}},handleSave(){this.close(),this.getEditorAPI().saveManager.save()},close(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},render(){return o.default.createElement(c.frames.messagePanelFrame,{ref:"frame",panelName:this.props.panelName,panelTitle:r.translate(this.props.title),confirmLabel:"TOPBAR_SETTINGS_BUTTON_SAVE",onConfirm:this.handleSave,keyboardShortcuts:this.keyboardShortcuts,className:"save-your-site-panel"},o.default.createElement(u.default.Composites.RichTextWithIllustration,null,o.default.createElement(u.default.Illustration,null,o.default.createElement(l.symbol,{name:"saveYourWork"})),o.default.createElement(u.default.Composites.RichText,null,o.default.createElement(u.default.RichText,{type:"T01"},r.translate(this.props.messageBody)))))}})}.apply(t,i))||(e.exports=s)},2473:function(e,t,a){var i,s;i=[a,t,a(0),a(2474),a(2475),a(2478),a(555)],void 0===(s=function(e,t,a,i,s,n,o){"use strict";return i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importDefault(n),o=a.__importDefault(o),{config:{publishConfigurationPanel:i.default},publishSuccessPanel:s.default,publishRCSuccessPanel:n.default,shoutOut:o.default}}.apply(t,i))||(e.exports=s)},2474:function(e,t,a){var i,s;i=[a,t,a(0),a(27),a(5),a(4),a(11),a(3),a(19),a(9),a(8)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u,c){"use strict";return i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importDefault(n),o=a.__importStar(o),r=a.__importDefault(r),l=a.__importStar(l),u=a.__importStar(u),c=a.__importDefault(c),s.default({displayName:"publishConfigurationPanel",mixins:[i.default,o.mixins.editorAPIMixin],propTypes:{onConfirm:n.default.func.isRequired,panelName:n.default.string},getInitialState:()=>({isSiteContributor:!1,isFirstPublish:!0,isDomainConnected:!1,isPremiumUser:!0,shouldPublishSucceed:!0,sitePremiumDomain:"http://www.published-site-domain.com"}),onConfirm(){this.props.onConfirm({isSiteContributor:this.state.isSiteContributor,isFirstPublish:this.state.isFirstPublish,isDomainConnected:this.state.isDomainConnected,sitePremiumDomain:this.state.sitePremiumDomain,isPremiumUser:this.state.isPremiumUser,shouldPublishSucceed:this.state.shouldPublishSucceed})},close(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},render(){return r.default.createElement(l.frames.emptyPanelFrame,{panelName:this.props.panelName,className:"save-configuration-panel"},r.default.createElement("a",{onClick:this.close,className:"close-button"},"x"),r.default.createElement("h2",{style:{textAlign:"center"}},"Publish Testing Configuration"),r.default.createElement(c.default.Checkbox,{label:"Is Contributor to site",valueLink:this.linkState("isSiteContributor"),shouldTranslate:!1,labelAfterSymbol:!0,className:"checkbox-field"}),r.default.createElement(c.default.Checkbox,{label:"Did Publish Succeed",valueLink:this.linkState("shouldPublishSucceed"),shouldTranslate:!1,labelAfterSymbol:!0,className:"checkbox-field"}),r.default.createElement(c.default.Checkbox,{label:"Site is Premium",valueLink:this.linkState("isPremiumUser"),shouldTranslate:!1,labelAfterSymbol:!0,className:"checkbox-field"}),r.default.createElement(c.default.Checkbox,{label:"First Publish",valueLink:this.linkState("isFirstPublish"),shouldTranslate:!1,labelAfterSymbol:!0,className:"checkbox-field"}),r.default.createElement(c.default.Checkbox,{label:"Is Domain Connected",valueLink:this.linkState("isDomainConnected"),shouldTranslate:!1,labelAfterSymbol:!0,className:"checkbox-field"}),r.default.createElement(u.textInput,{shouldTranslate:!1,label:"Site address (Domain Name)",valueLink:this.linkState("sitePremiumDomain"),className:"domain-text-field"}),r.default.createElement(u.button,{disabled:!this.state.isPremiumUser&&this.state.isDomainConnected&&this.state.shouldPublishSucceed,shouldTranslate:!1,label:"Start Publish",onClick:this.onConfirm,className:"confirm-button"}))}})}.apply(t,i))||(e.exports=s)},2475:function(e,t,a){var i,s;i=[a,t,a(0),a(27),a(3),a(5),a(1),a(4),a(11),a(2),a(7),a(29),a(292),a(555),a(2476),a(554),a(2477),a(12),a(6),a(13),a(19),a(9),a(8),a(10),a(2),a(24)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u,c,d,p,_,m,f,h,S,E,P,g,b,I,N,T){"use strict";i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importDefault(n),o=a.__importDefault(o),r=a.__importDefault(r),l=a.__importStar(l),u=a.__importStar(u),c=a.__importDefault(c),d=a.__importStar(d),p=a.__importDefault(p),_=a.__importDefault(_),m=a.__importDefault(m),f=a.__importDefault(f),h=a.__importDefault(h),S=a.__importStar(S),E=a.__importDefault(E),P=a.__importDefault(P),g=a.__importStar(g),b=a.__importStar(b),I=a.__importDefault(I),N=a.__importStar(N);const v=c.default.editorPlugins.domain.selectors,{connect:A,STORES:{EDITOR_API:D}}=u.hoc,C=n.default({displayName:"publishSuccessPanel",mixins:[i.default,l.mixins.editorAPIMixin],propTypes:{isFakePanel:r.default.bool,contentPanelType(e,t,a){if(!e[t]||!o.default.some(p.default,e[t]))return new Error("Invalid prop `".concat(t,"` supplied to ").concat(a,". Validation failed."))},configuration:r.default.object.isRequired,currentDomain:r.default.string.isRequired,setDontShowPanelValue:r.default.func.isRequired,sitePublicUrl:r.default.string.isRequired,closePanel:r.default.func.isRequired,panelName:r.default.string,dealerViewer:r.default.func,showUserActionNotification:r.default.func.isRequired},componentWillUnmount(){this.renderTimeout&&u.dealerUtils.clearDealerRenderSuccessTimeout(this.renderTimeout),P.default.isOpen("se_fixPublishFlow")&&o.default.forEach(this.getEditorAPI().sitePublishedCallbacks,(function(e){e()}));const e=this.getEditorAPI();e.dsActions.platform.notifyAppsOnCustomEvent(d.factory.sitePublishedDialogClosed({})),e.mobile.mobileDiscoverabilityModal.show()},componentDidMount(){this.props.dealerViewer?this.renderTimeout=u.dealerUtils.createDealerRenderSuccessTimeout(this.onDealerError):this.sendPanelDisplayedBI(!1)},getInitialState(){return{dealerViewerProps:this.getDealerViewerProps(),dontShowAgain:!1,hasDealerFailed:!1,hasDealerSucceeded:!1}},getDealerViewerProps(){const e=o.default.get(this.getEditorAPI().dsRead.platform.getAppDataByApplicationId(E.default.APPLICATIONS.META_SITE_APPLICATION_ID),"instance");return o.default.assign({},u.dealerUtils.getDealerViewerBaseProps(),{metaSiteId:this.getEditorAPI().dsRead.generalInfo.getMetaSiteId(),bannerPosition:u.dealerUtils.bannerPositions.POST_PUBLISH,signedInstance:e,key:"dealerViewerPublish",onDisplay:this.onDealerDisplay,onError:this.onDealerError})},getShortcuts(){return{esc:this.onClose,enter:this.handlePrimaryButtonClicked}},onClose(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},shouldPresentDealer(){return this.props.dealerViewer&&!this.state.hasDealerFailed},getFrameProps(){return{panelName:this.props.panelName,shouldHideHeader:!0}},getInnerContentClass(){if(this.props.contentPanelType===p.default.EMPTY)return null;switch(this.props.contentPanelType.name){case p.default.SHOUTOUT.name:return"grow-business-inner-panel";case p.default.CONNECT_DOMAIN.name:return"connect-domain-inner-panel";case p.default.GROW_BUSINESS.name:return"grow-business-inner-panel";default:return""}},getFrameClass(){let e="publish-success-panel save-publish-panel";const t=this.getInnerContentClass();return e+=t?" contains-".concat(t):"",e+=this.shouldPresentDealer()&&!this.state.hasDealerSucceeded?" hide-panel-before-dealer-loaded":"",e},getPanelFrameClassName(){const e=this.shouldPresentDealer()&&!this.state.hasDealerSucceeded?"hide-panel-before-dealer-loaded":"";return"save-publish-panel-frame ".concat(e)},onDoneAndBI(e){this.sendActionButtonClickedBI(e),this.onDone()},onDone(){if(this.state.dontShowAgain||this.props.isFakePanel){const e=this.state.dontShowAgain;this.props.setDontShowPanelValue(e)}this.props.configuration.siteRcExists&&this.showReleaseManagerNotification(),this.props.closePanel()},isDontShowAgainCheckboxVisible(){return!this.props.configuration.isFirstPublish&&!o.default.isEqual(this.props.contentPanelType,p.default.EMPTY)},isSecondaryButtonDisplayed(){return P.default.isOpen("publishUpgradeButtons")&&!this.props.configuration.isDomainConnected&&this.props.contentPanelType.name===p.default.CONNECT_DOMAIN.name},viewYourSite(){this.sendViewSiteBI();let e=this.getEditorAPI().site.getSitePublicUrl();this.props.configuration.isDomainConnected&&(e=this.props.configuration.sitePremiumDomain),window.open(e)},getSiteUrl(){const e=this.getEditorAPI(),t=e.store.getState(),a=v.getSiteProtocol(t,e.dsRead),i=v.isDomainConnected();return(this.props.configuration.sitePremiumDomain||this.props.sitePublicUrl).replace(/(?:^https?:\/\/)?(?:www\.)?(.*)/i,a+(i?"://www.$1":"://$1"))},sendDealerBI(e,t){this.sendBI(S.events.dealer.content_presented_by_dealer,{description:t,content_presented_by_dealer:e,stage:"render",category:"upgrade",panel_name:this.props.panelName}),this.sendPanelDisplayedBI(e)},onDealerDisplay(){this.setState({hasDealerSucceeded:!0}),u.dealerUtils.clearDealerRenderSuccessTimeout(this.renderTimeout),this.sendDealerBI(!0,""),u.fedopsLogger.interactionEnded(u.fedopsLogger.INTERACTIONS.DEALER_IN_POST_PUBLISH)},onDealerError(e){const t="dealer after pre fetch ".concat(o.default.get(e,"errorType","")," error");this.sendDealerBI(!1,t),this.setState({hasDealerFailed:!0})},getInnerPanel(){const e=this.props.contentPanelType.name;let t=null,a=null;if(this.shouldPresentDealer())t=this.props.dealerViewer,a=this.state.dealerViewerProps;else switch(e){case p.default.SHOUTOUT.name:t=_.default,a=this.getShoutoutPanelProps();break;case p.default.CONNECT_DOMAIN.name:t=f.default,a=this.getConnectDomainPanelProps(this.props.configuration);break;case p.default.GROW_BUSINESS.name:t=m.default,a={metaSiteId:this.getEditorAPI().dsRead.generalInfo.getMetaSiteId(),userStatus:this.getUserStatus(),isFirstPublish:this.props.configuration.isFirstPublish}}return t?s.default.createElement(t,a):null},getShoutoutPanelProps(){const e=this.getEditorAPI();return{isUserPremium:this.props.configuration.isPremiumUser,languageCode:u.languages.getLanguageCode(),metaSiteId:e.dsRead.generalInfo.getMetaSiteId(),sitePublicUrl:this.props.sitePublicUrl,siteNameSEO:e.dsRead.seo.title.get(),siteDescriptionSEO:e.dsRead.seo.description.get(),userStatus:this.getUserStatus(),isFirstPublish:this.props.configuration.isFirstPublish}},getConnectDomainPanelProps(e){return{isFirstPublish:e.isFirstPublish,isDomainConnected:e.isDomainConnected,currentDomain:this.props.sitePublicUrl,sitePublishedDomain:e.sitePremiumDomain,isSitePremium:e.isPremiumUser,isFirstSave:e.isFirstSave,closePanel:this.onDone,flowId:E.default.CONNECT_DOMAIN.FLOWS.PUBLISH,actionCallback:this.sendConnectDomainClickedBI}},getPrimaryButtonText(){return this.isSecondaryButtonDisplayed()?this.props.configuration.isPremiumUser?"Save_Publish_POST_CONNECT_NOW":(P.default.isOpen("spanishUpgradeText"),"Save_Publish_POST_UPGRADE_NOW"):"SAVE_PUBLISH_BUTTON_DONE"},getSecondaryButtonText:()=>"Save_Publish_POST_CONNECT_LATER",handlePrimaryButtonClicked(){const e=this.props.configuration.isFirstPublish,t=S.events.publish;let a=e?t.First_Publish_Done_click:t.Second_Publish_Done_click;if(this.isSecondaryButtonDisplayed())if(this.isConnectDomainInProgress())this.openConnectDomainInProgressPanel(),a=t.publish_flow_connect_domain_now_button_click;else if(this.props.configuration.isPremiumUser)this.getEditorAPI().account.openConnectDomain(E.default.CONNECT_DOMAIN.FLOWS.PUBLISH_BUTTON,e),a=t.publish_flow_connect_domain_now_button_click;else{const i="edhtml_PUBLISH_FLOW_UPGRADE_BUTTON_".concat(e?"FIRST_PUBLISH":"SECOND_PUBLISH");this.getEditorAPI().account.upgrade(i),a=t.publish_flow_upgrade_now_button_click}this.onDoneAndBI(a)},handleSecondaryButtonClicked(){const e=this.props.configuration.isFirstPublish,t=S.events.publish;let a=e?t.First_Publish_Done_click:t.Second_Publish_Done_click;this.isSecondaryButtonDisplayed()&&(a=this.props.configuration.isPremiumUser?t.publish_flow_connect_domain_later_button_click:t.publish_flow_upgrade_later_button_click),this.onDoneAndBI(a)},isConnectDomainInProgress(){const e=this.props.configuration.sitePremiumDomain,t=this.props.configuration.isDomainConnected,a=this.props.configuration.isPremiumUser,i=!o.default.isEmpty(e)&&!o.default.includes(e,"wix.com");return a&&i&&!t},openConnectDomainInProgressPanel(){this.getEditorAPI().panelManager.openPanel("savePublish.panels.connectDomainInProgress",{connectedDomainURL:this.props.configuration.sitePremiumDomain,currentPublicURL:this.props.sitePublicUrl},!0)},sendPanelDisplayedBI(e){const t=S.events.publish.publish_success_panel_opened_with_content,a={is_first_publish:this.props.configuration.isFirstPublish,message:e?"DEALER":this.props.contentPanelType.name,type:e?"DEALER":"EDITOR"};this.sendBI(t,a)},sendConnectDomainClickedBI(){let e=null,t=null;e=this.props.configuration.isFirstPublish?S.events.publish.First_Publish_connect_domain_click:S.events.publish.Second_Publish_connect_domain_click,this.props.configuration.isSitePremium&&!this.props.configuration.isDomainConnected?t={user_status:"Not Connected Premium"}:this.props.configuration.isSitePremium||(t={user_status:"free user"}),e.fields.message&&(t.message=this.props.contentPanelType.name),e&&t&&this.sendBI(e,t)},sendActionButtonClickedBI(e){const t=this.props.configuration.isFirstPublish,a={user_status:this.getUserStatus()};e.fields.is_first_publish&&(a.is_first_publish=t),e.fields.message&&(a.message=this.props.contentPanelType.name),this.sendBI(e,a)},sendViewSiteBI(){this.sendBI(S.events.publish.publish_view_your_site_click,{is_first_publish:this.props.configuration.isFirstPublish?1:0,panel_name:"savePublish.panels.publish.publishSuccessPanel",user_status:this.getUserStatus()})},getUserStatus(){const e=this.props.configuration.isPremiumUser,t=this.props.configuration.isDomainConnected;let a=null;return e?e&&t?a="Connected Premium":e&&!t&&(a="Not Connected Premium"):a="free user",a},toggleDontShowAgain(){const e=!this.state.dontShowAgain;this.sendToggleDontShowAgainBI(e),this.setState({dontShowAgain:e})},sendToggleDontShowAgainBI(e){e=e?1:0,this.props.configuration.isFirstPublish?this.sendBI(S.events.publish.First_Publish_dont_show_again_click,{toggle:e,user_status:this.getUserStatus()}):this.sendBI(S.events.publish.Second_Publish_dont_show_again_click,{toggle:e})},domainInputBiReporter(e){const t={user_status:this.getUserStatus(),panel_name:this.props.panelName,save_or_publish:"publish",is_first_save_or_publish:this.props.configuration.isFirstPublish?1:0};this.sendBI(S.events.domainInput[e],t)},sendBI(e,t){this.getEditorAPI().bi.event(e,t)},showReleaseManagerNotification(){this.props.showUserActionNotification({message:"Notifications_PublishAll_WithRC_Text",title:"Notifications_PublishAll_WithRC_Text",type:"info",link:{caption:"Notifications_PublishAll_WithRC_Link",onNotificationLinkClick:()=>{this.getEditorAPI().account.openReleaseManager()}}})},render(){var e;const t=this.getInnerPanel();return s.default.createElement(g.frames.focusPanelFrame,Object.assign({frameClassName:this.getPanelFrameClassName(),keyboardShortcuts:this.getShortcuts()},this.getFrameProps(),{className:T.cx(this.getFrameClass(),null===(e=this.getFrameProps())||void 0===e?void 0:e.className)}),s.default.createElement("header",{className:"save-publish-panel-header"},s.default.createElement("button",{onClick:this.props.closePanel,className:"close"},s.default.createElement(N.symbol,{name:"headerCloseButton"})),s.default.createElement("span",{className:"title"},u.translate("PUBLISH_CONGRATULATIONS_TITLE_TITLE")),s.default.createElement("span",{className:"subtitle"},u.translate("PUBLISH_CONGRATULATIONS_TITLE_SUBTITLE"))),s.default.createElement("div",{className:"address-bar-wrapper"},s.default.createElement("span",{className:"address"},s.default.createElement(b.domainInput,{value:this.getSiteUrl(),isEditable:!1,biHandler:this.domainInputBiReporter})),s.default.createElement(b.button,{label:"SAVE_PUBLISH_BUTTON_VIEW",onClick:this.viewYourSite,className:"view-site-button"})),null!==t?s.default.createElement("div",{key:"innerPanel",className:"publish-inner-panel"},t):null,s.default.createElement("div",{className:"publish-success-footer"},this.isDontShowAgainCheckboxVisible()&&null!==t?s.default.createElement(I.default.Checkbox,{key:"dontShowAgain",label:"SAVE_PUBLISH_DO_NOT_SHOW_AGAIN_LABEL",value:this.state.dontShowAgain,onChange:this.toggleDontShowAgain,labelAfterSymbol:!0,className:"dont-show-again"}):null,s.default.createElement("div",{className:"footer-buttons"},this.isSecondaryButtonDisplayed()?s.default.createElement(b.button,{key:"secondaryFooterButton",label:this.getSecondaryButtonText(),onClick:this.handleSecondaryButtonClicked,className:"btn-confirm-secondary"}):null,s.default.createElement(b.button,{label:this.getPrimaryButtonText(),onClick:this.handlePrimaryButtonClicked,className:"btn-confirm-primary"}))))}}),R=A(D,void 0,h.default.mapDispatchToProps)(C);return R.pure=C,R}.apply(t,i))||(e.exports=s)},2476:function(e,t,a){var i,s;i=[a,t,a(0),a(5),a(4),a(11),a(2),a(13),a(12),a(3),a(1),a(8),a(9)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u,c,d,p){"use strict";return i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importStar(n),o=a.__importStar(o),r=a.__importDefault(r),l=a.__importStar(l),u=a.__importDefault(u),c=a.__importDefault(c),d=a.__importDefault(d),p=a.__importStar(p),i.default({displayName:"growBusinessPanel",mixins:[n.mixins.editorAPIMixin],propTypes:{metaSiteId:s.default.string.isRequired,isFirstPublish:s.default.bool,userStatus:s.default.string},getTitle:()=>o.translate("PUBLISH_CONGRATULATIONS_NEXT_PROMOTE_TITLE"),getPanelContent(){const e={key:"seo",symbol:"publishSeo",description:o.translate("PUBLISH_CONGRATULATIONS_WHATS_NEXT_SEO_TITLE"),actionTitle:o.translate("PUBLISH_CONGRATULATIONS_WHATS_NEXT_SEO_LINK"),action:this.openSeoWizard},t={key:"newsletter",symbol:"publishShoutout",description:o.translate("PUBLISH_CONGRATULATIONS_NEXT_PROMOTE_1_TITLE"),actionTitle:o.translate("PUBLISH_CONGRATULATIONS_NEXT_PROMOTE_1_LINK"),action:this.openShoutout},a={key:"mail",symbol:"promoteMail",description:o.translate("PUBLISH_CONGRATULATIONS_NEXT_PROMOTE_2_TITLE"),actionTitle:o.translate("PUBLISH_CONGRATULATIONS_NEXT_PROMOTE_2_LINK"),action:this.getYourOwnMailbox},i={key:"traffic",symbol:"promoteContact",description:o.translate("PUBLISH_CONGRATULATIONS_NEXT_PROMOTE_3_TITLE"),actionTitle:o.translate("PUBLISH_CONGRATULATIONS_NEXT_PROMOTE_3_LINK"),action:this.getTrafficApps};return r.default.isOpen("newPublishPanel")?[t,a,e]:[t,a,i]},openSeoWizard(){this.props.userStatus&&this.getEditorAPI().bi.event(l.events.publish.Second_Publish_Seo_Wizard_click,{user_status:this.props.userStatus}),this.getEditorAPI().account.openWixSEOWiz("EDITOR_POSTPUBLISH_PREMIUM")},openShoutout(){this.sendPublishBI(l.events.publish.First_Publish_Send_ShoutOut_link_click,l.events.publish.Second_Publish_ShoutOut_Share_click),n.utils.social.openShoutout(this.props.metaSiteId)},getYourOwnMailbox(){this.sendPublishBI(l.events.publish.First_Publish_get_own_Mailbox_link_click,l.events.publish.Second_Publish_get_own_Mailbox_click),window.open("https://premium.wix.com/wix/api/googleMailBoxConsole?referralAdditionalInfo=da_quick_actions")},getTrafficApps(){this.sendPublishBI(l.events.publish.First_Publish_Traffic_Apps_link_click,l.events.publish.Second_Publish_Traffic_Apps_click);const e=["//www.wix.com/my-account/sites/",this.props.metaSiteId,"/apps/all?referralInfo=premium_publish"].join("");window.open(e)},sendPublishBI(e,t){this.props.isFirstPublish&&this.props.userStatus?this.getEditorAPI().bi.event(e,{user_status:this.props.userStatus}):!this.props.isFirstPublish&&this.props.userStatus&&this.getEditorAPI().bi.event(t,{user_status:this.props.userStatus})},render(){return u.default.createElement("div",{className:"panel-shout-out"},u.default.createElement("div",{className:"promote-title-wrapper"},u.default.createElement(d.default.Divider,{long:!0}),u.default.createElement("div",{className:"promote-title"},this.getTitle()),u.default.createElement(d.default.Divider,{long:!0})),u.default.createElement("div",{className:"promotion-content"},c.default.map(this.getPanelContent(),e=>u.default.createElement("div",{key:e.key,className:"promote"},e.symbol?u.default.createElement("div",{key:"promotionSymbol-".concat(e.key),className:"promote-symbol promote-symbol-".concat(e.key)},u.default.createElement(p.symbol,{name:e.symbol})):null,e.img&&!e.symbol?u.default.createElement("div",{key:"promotionImg-".concat(e.key),style:{backgroundImage:"url(".concat(e.img,")")},className:"promote-image"}):null,u.default.createElement("div",{className:"description"},e.description),u.default.createElement("a",{onClick:e.action},e.actionTitle)))))}})}.apply(t,i))||(e.exports=s)},2477:function(e,t,a){var i,s;i=[a,t,a(0),a(7)],void 0===(s=function(e,t,a,i){"use strict";return i=a.__importDefault(i),{mapDispatchToProps:function(e){return{showUserActionNotification:function(){return e(i.default.editorPlugins.notifications.actions.showUserActionNotification(...arguments))}}}}}.apply(t,i))||(e.exports=s)},2478:function(e,t,a){var i,s;i=[a,t,a(0),a(1),a(4),a(24),a(2),a(292),a(2479),a(12),a(3),a(19),a(9),a(8),a(2480),a(2)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u,c,d,p,_,m,f){"use strict";i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importStar(n),o=a.__importStar(o),r=a.__importDefault(r),l=a.__importDefault(l),u=a.__importStar(u),c=a.__importDefault(c),d=a.__importStar(d),p=a.__importStar(p),_=a.__importDefault(_),m=a.__importDefault(m);const{connect:h,STORES:{EDITOR_API:S}}=o.hoc,E=o.serviceTopology.businessManagerUrl;class P extends c.default.Component{constructor(){super(...arguments),this.getShortcuts=()=>({esc:this.onClose,enter:this.handlePrimaryButtonClicked}),this.onClose=()=>{this.props.panelManager.closePanelByName(this.props.panelName)},this.getFrameProps=()=>({panelName:this.props.panelName,shouldHideHeader:!0}),this.getSiteUrl=()=>{const e=this.props.configuration.sitePremiumDomain||this.props.sitePublicUrl,t=this.props.rcPublicUrl.split("siteRevision=")[1];let a=e.replace(/(?:^https?:\/\/)?(?:www\.)?(.*)/i,this.props.siteProtocol+(this.props.isDomainConnected?"://www.$1":"://$1"));return a=o.url.setUrlParams(a,{siteRevision:t}),a},this.getFrameClass=()=>{let e="publish-success-panel save-publish-panel";return e+=" contains-".concat("manage-exposure-inner-panel"),e},this.onDoneAndBI=e=>{this.sendActionButtonClickedBI(e),this.onDone()},this.onDone=()=>{this.onClose()},this.viewYourSite=()=>{this.sendViewSiteBI(),window.open(this.props.rcPublicUrl)},this.getManageExposurePanelProps=()=>({closePanel:this.onDone,actionCallback:this.openReleaseManager}),this.openReleaseManager=()=>{this.sendGotoReleaseManagerBI(),window.open("".concat(E,"/").concat(this.props.metaSiteId,"/release-manager-client?referralInfo=EDITOR"),"_blank")},this.getPrimaryButtonText=()=>"Release_Candidate_Screen_Done_Button",this.handlePrimaryButtonClicked=()=>{const e=u.events.publish.Create_RC_Clicked;this.onDoneAndBI(e)},this.sendActionButtonClickedBI=e=>{const t={panel_name:"savePublish.panels.publish.publishRCSuccessPanel"};e.fields.revision&&(t.revision=this.props.rcPublicUrl.split("siteRevision=")[1]),this.sendBI(e,t)},this.sendViewSiteBI=()=>{this.sendActionButtonClickedBI(u.events.publish.publish_rc_view_your_site_click)},this.sendGotoReleaseManagerBI=()=>{this.sendActionButtonClickedBI(u.events.publish.publish_rc_goto_release_manager_click,{origin:"RC panel"})},this.sendBI=(e,t)=>{this.props.bi.event(e,t)}}render(){var e;return c.default.createElement(d.frames.focusPanelFrame,Object.assign({frameClassName:"save-publish-panel-frame",keyboardShortcuts:this.getShortcuts()},this.getFrameProps(),{className:f.cx(this.getFrameClass(),null===(e=this.getFrameProps())||void 0===e?void 0:e.className)}),c.default.createElement("div",{className:"publish-rc"},c.default.createElement(_.default.Composites.BigPanelHeader,null,c.default.createElement(_.default.PanelHeaderCenteredText,{title:"Release_Candidate_Screen_Title",noHelpBtn:!0,titleType:"T16",onClose:this.onClose,className:"dark"})),c.default.createElement("div",{className:"address-bar-wrapper"},c.default.createElement("span",{className:"desc"},o.translate("Release_Candidate_Screen_Text")),c.default.createElement("span",{className:"address"},c.default.createElement(p.domainInput,{value:this.getSiteUrl(),isEditable:!1,biHandler:this.domainInputBiReporter})),c.default.createElement(p.button,{label:"SAVE_PUBLISH_BUTTON_VIEW",onClick:this.viewYourSite,className:"view-site-button"})),c.default.createElement("div",{key:"innerPanel",className:"publish-inner-panel"},c.default.createElement(m.default,{closePanel:this.onDone,actionCallback:this.openReleaseManager})),c.default.createElement("div",{className:"publish-success-footer"},c.default.createElement("div",{className:"footer-buttons"},c.default.createElement(p.button,{label:"Release_Candidate_Screen_Done_Button",onClick:this.handlePrimaryButtonClicked,className:"btn-confirm-primary"})))))}}P.displayName="publishRCSuccessPanel",P.propTypes={isFakePanel:s.default.bool,contentPanelType(e,t,a){if(!e[t]||!i.default.some(r.default,e[t]))return new Error("Invalid prop `".concat(t,"` supplied to ").concat(a,". Validation failed."))},configuration:s.default.object.isRequired,sitePublicUrl:s.default.string.isRequired,closePanel:s.default.func.isRequired,panelName:s.default.string};const g=i.default.flowRight(n.hoc.draggable,h(S,l.default.mapStateToProps,l.default.mapDispatchToProps))(P);return g.pure=P,g}.apply(t,i))||(e.exports=s)},2479:function(e,t,a){var i,s;i=[a,t,a(0),a(7)],void 0===(s=function(e,t,a,i){"use strict";i=a.__importDefault(i);const{getSingleSelectedComponent:s}=i.default.editorPlugins.selection.selectors,n=i.default.editorPlugins.domain.selectors,o=(e,t,a)=>{let{editorAPI:i}=a;i.developerToolBar.toggle()};return{mapStateToProps:e=>{let{editorAPI:t}=e;const{store:a}=t,i=a.getState(),o=s(i),r=n.getSiteProtocol(i,t.dsRead),l=n.isDomainConnected(),u=t.dsRead.generalInfo.getMetaSiteId(),c=t.dsRead.generalInfo.getCurrentRevisionPublicUrl();return{editedComponent:o,metaSiteId:u,siteProtocol:r,bi:t.bi,isDomainConnected:l,panelManager:t.panelManager,rcPublicUrl:c}},mapDispatchToProps:e=>({onClose(){e(o)},openHelpCenter(t,a,s){e(i.default.editorPlugins.panels.actions.openHelpCenter(t,a,s))}})}}.apply(t,i))||(e.exports=s)},2480:function(e,t,a){var i,s;i=[a,t,a(0),a(4),a(2),a(3),a(293)],void 0===(s=function(e,t,a,i,s,n,o){"use strict";var r;return i=a.__importDefault(i),s=a.__importStar(s),n=a.__importDefault(n),o=a.__importDefault(o),(r=class extends n.default.Component{constructor(){super(...arguments),this.getClassName=()=>"manage-exposure".concat(this.props.className?" ".concat(this.props.className):""),this.getGeneralContentProps=()=>({symbolName:"manageExposure",mainTitle:s.translate("Release_Candidate_Screen_Whats_Next_Section_Title"),title:s.translate("Release_Candidate_Screen_Whats_Next_Section_Heading"),actionLabel:s.translate("Release_Candidate_Screen_Whats_Next_Section_Link"),shouldTranslate:!1,actionCallback:this.action,subtitle:s.translate("Release_Candidate_Screen_Whats_Next_Section_Text")}),this.action=()=>{this.props.actionCallback&&this.props.actionCallback(),this.props.closePanel()}}render(){return n.default.createElement(o.default,Object.assign({className:this.getClassName()},this.getGeneralContentProps()))}}).displayName="manageExposure",r.propTypes={closePanel:i.default.func.isRequired,className:i.default.string,actionCallback:i.default.func},r}.apply(t,i))||(e.exports=s)},27:function(e,t){e.exports=E},29:function(e,t){e.exports=P},291:function(e,t,a){var i,s;i=[a,t,a(0),a(1)],void 0===(s=function(e,t,a,i){"use strict";return i=a.__importDefault(i),{extractDocumentErrorCode:function(e){return i.default.get(e,"document.errorCode")||i.default.get(e,"documentServices.errorCode")},extractDocumentErrorType:function(e){return i.default.get(e,"document.errorType")||i.default.get(e,"documentServices.errorType")}}}.apply(t,i))||(e.exports=s)},292:function(e,t,a){var i,s;i=[a,t,a(6)],void 0===(s=function(e,t){"use strict";return{EMPTY:{name:"EMPTY"},SHOUTOUT:{name:"SHOUTOUT",userPref:!0},CONNECT_DOMAIN:{name:"CONNECT_DOMAIN",userPref:!0},GROW_BUSINESS:{name:"GROW_BUSINESS",userPref:!0}}}.apply(t,i))||(e.exports=s)},293:function(e,t,a){var i,s;i=[a,t,a(0),a(5),a(4),a(2),a(3),a(8),a(9)],void 0===(s=function(e,t,a,i,s,n,o,r,l){"use strict";return i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importStar(n),o=a.__importDefault(o),r=a.__importDefault(r),l=a.__importStar(l),i.default({displayName:"generalContent",mixins:[n.translationMixin],propTypes:{symbolName:s.default.string,imageSrc:s.default.string,imageStyle:s.default.object,mainTitle:s.default.string.isRequired,title:s.default.string.isRequired,subtitle:s.default.string,actionCallback:s.default.func.isRequired,actionLabel:s.default.string.isRequired,className:s.default.string},getClassName(){return"general-content".concat(this.props.className?" ".concat(this.props.className):"")},render(){return o.default.createElement("div",{className:this.getClassName()},o.default.createElement("div",{className:"main-title-wrapper"},o.default.createElement(r.default.Divider,{long:!0}),o.default.createElement("div",{className:"main-title"},this.translateIfNeeded(this.props.mainTitle)),o.default.createElement(r.default.Divider,{long:!0})),o.default.createElement("div",{className:"middle-spacer"}),o.default.createElement("div",{className:"bottom-section"},o.default.createElement("div",{className:"left-side"},this.props.symbolName?o.default.createElement(l.symbol,{name:this.props.symbolName,key:"symbol"}):null,this.props.imageSrc?o.default.createElement("img",{key:"image",src:this.props.imageSrc,style:this.props.imageStyle||{}}):null),o.default.createElement("div",{className:"right-side"},o.default.createElement("div",{className:"title"},this.translateIfNeeded(this.props.title)),this.props.subtitle?o.default.createElement("div",{key:"subtitle",dangerouslySetInnerHTML:{__html:this.translateIfNeeded(this.props.subtitle)},className:"subtitle"}):null,o.default.createElement("a",{onClick:this.props.actionCallback,className:"general-content-action"},this.translateIfNeeded(this.props.actionLabel)))))}})}.apply(t,i))||(e.exports=s)},3:function(e,t){e.exports=i},4:function(e,t){e.exports=s},43:function(e,t){e.exports=g},5:function(e,t){e.exports=n},553:function(e,t,a){var i,s;i=[a,t,a(0),a(13)],void 0===(s=function(e,t,a,i){"use strict";let s=(i=a.__importDefault(i)).default.getValue("se_autosaveActionCount"),n=i.default.getValue("se_saveAfterAutosaveCount"),o=i.default.getValue("se_autosaveInterval");function r(e,t){return/^config\d+$/.test(e)?Number(e.replace("config","")):t}return s=r(s,7),n=r(n,10),o=r(o,30),{ERROR_CODES:{SAVE_PUBLISH_DISABLED_ON_SERVER:-10132,SAVE_PUBLISH_RC_FAILED_ON_SERVER:-10154},SAVE:{SAVE_FAILED_HELP_LINK:"8045e8e4-6f47-4913-8d74-6239f21fffec"},AUTOSAVE:{AUTOSAVE_TIMEOUT:o,AUTOSAVE_ACTION_COUNT:s,SAVE_AFTER_AUTOSAVE_COUNT:n,DEBOUNCE_WAIT:2},RENAME:{ERRORS:{SITE_NAME_TAKEN:-40003}}}}.apply(t,i))||(e.exports=s)},554:function(e,t,a){var i,s;i=[a,t,a(0),a(1),a(11),a(5),a(4),a(2),a(6),a(13),a(3),a(293),a(2)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u,c,d,p){"use strict";i=a.__importDefault(i),s=a.__importStar(s),n=a.__importDefault(n),o=a.__importDefault(o),r=a.__importStar(r),l=a.__importDefault(l),u=a.__importDefault(u),c=a.__importDefault(c),d=a.__importDefault(d);const _=u.default.isOpen("spanishUpgradeText")?"UPGRADE_NOW_FOR_SPAIN_ONLY":"SAVE_PUBLISH_WHATS_NEXT_UPGRADE_LINK";return n.default({displayName:"connectDomain",mixins:[s.mixins.editorAPIMixin],propTypes:{className:o.default.string,closePanel:o.default.func.isRequired,sitePublishedDomain:o.default.string,currentDomain:o.default.string,isDomainConnected:o.default.bool,isFirstPublish:o.default.bool,isSitePremium:o.default.bool,isFirstSave:o.default.bool,actionCallback:o.default.func,flowId:o.default.oneOf(i.default.values(l.default.CONNECT_DOMAIN.FLOWS)).isRequired},getGeneralContentProps(){const e=this.getEditorAPI(),t={className:"",symbolName:"connectDomain",mainTitle:r.translate("SAVE_SITE_SAVED_WHATS_NEXT_LABEL"),title:r.translate("SAVE_PUBLISH_WHATS_NEXT_CONNECT_LINE1"),actionLabel:r.translate(this.props.isSitePremium?"SAVE_PUBLISH_WHATS_NEXT_CONNECT_LINK":_),shouldTranslate:!1,actionCallback:this.panelAction,subtitle:r.translate("SAVE_PUBLISH_WHATS_NEXT_CONNECT_LINE2")};if(e.campaigns.personalSale.isActiveCampaign()&&!this.props.isSitePremium){const a=e.campaigns.personalSale.getDiscountValue();i.default.assign(t,function(e){const t=i.default.template(r.translate("SAVE_PUBLISH_WHATS_NEXT_PERSONAL_SALE_TEXT_DYNAMIC"));return{imageSrc:u.default.isOpen("se_personalSale")?r.media.getMediaUrl("savePublish/panels/content/connectDomain_".concat(e,".png")):void 0,symbolName:u.default.isOpen("se_personalSale")?void 0:"connectDomain_50",className:"personal-sale-campaign",subtitle:t({discount:i.default.toString(e)})}}(a))}return t},panelAction(){this.props.actionCallback&&this.props.actionCallback(),this.props.closePanel(),this.isSiteBeingConnectedToDomain()?this.openConnectDomainInProgressPanel():!this.props.isDomainConnected&&this.props.isSitePremium?this.getEditorAPI().account.openConnectDomain(this.props.flowId):this.getEditorAPI().account.upgrade(this.getUpgradeReferralCode())},getUpgradeReferralCode(){let e="edhtml_";switch(this.props.flowId){case l.default.CONNECT_DOMAIN.FLOWS.PUBLISH:const t=this.props.isFirstPublish?"FIRST_PUBLISH":"SECOND_PUBLISH";e+="PUBLISH_FLOW_".concat(t);break;case l.default.CONNECT_DOMAIN.FLOWS.SAVE:e+="SAVE_FLOW_SECOND_SAVE_AND_PUBLISHED";break;default:e=null}return e},isSiteBeingConnectedToDomain(){return this.isUnconnectedDomainPremium()&&!i.default.isEmpty(this.props.sitePublishedDomain)&&!i.default.includes(this.props.sitePublishedDomain,"wix.com")},isUnconnectedDomainPremium(){return!this.props.isDomainConnected&&this.props.isSitePremium},openConnectDomainInProgressPanel(){this.getEditorAPI().panelManager.openPanel("savePublish.panels.connectDomainInProgress",{connectedDomainURL:this.props.sitePublishedDomain,currentPublicURL:this.props.currentDomain},!0)},render:function(){var e;return c.default.createElement(d.default,Object.assign({},this.getGeneralContentProps(),{className:p.cx("connect-domain-content ".concat(this.props.className),null===(e=this.getGeneralContentProps())||void 0===e?void 0:e.className)}))}})}.apply(t,i))||(e.exports=s)},555:function(e,t,a){var i,s;i=[a,t,a(0),a(1),a(5),a(4),a(11),a(2),a(12),a(3),a(8),a(9)],void 0===(s=function(e,t,a,i,s,n,o,r,l,u,c,d){"use strict";return i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importDefault(n),o=a.__importStar(o),r=a.__importStar(r),l=a.__importStar(l),u=a.__importDefault(u),c=a.__importDefault(c),d=a.__importStar(d),s.default({displayName:"shoutoutPanel",mixins:[o.mixins.editorAPIMixin],propTypes:{isUserPremium:n.default.bool,languageCode:n.default.string,metaSiteId:n.default.string.isRequired,sitePublicUrl:n.default.string,siteNameSEO:n.default.string,siteDescriptionSEO:n.default.string,isFirstPublish:n.default.bool,userStatus:n.default.string},getTitle:()=>r.translate("PUBLISH_CONGRATULATIONS_WHATS_NEXT_TITLE"),getPanelContent(){return[{key:"seo",symbol:"publishSeo",description:r.translate("PUBLISH_CONGRATULATIONS_WHATS_NEXT_SEO_TITLE"),actionTitle:r.translate("PUBLISH_CONGRATULATIONS_WHATS_NEXT_SEO_LINK"),action:this.openSeoWizard},{key:"twitter",symbol:"publishTwitter",description:r.translate("PUBLISH_CONGRATULATIONS_WHATS_NEXT_2_TITLE"),actionTitle:r.translate("PUBLISH_CONGRATULATIONS_WHATS_NEXT_2_LINK"),action:this.openTwitter},{key:"shoutout",symbol:"publishShoutout",description:r.translate("PUBLISH_CONGRATULATIONS_WHATS_NEXT_3_TITLE"),actionTitle:r.translate("PUBLISH_CONGRATULATIONS_WHATS_NEXT_3_LINK"),action:this.openShoutout}]},openFacebook(){this.sendSecondPublishBI(l.events.publish.Second_Publish_facebook_Share_click),o.utils.social.openFacebook(this.props.sitePublicUrl,this.props.languageCode,this.props.siteNameSEO,this.props.siteDescriptionSEO)},openSeoWizard(){this.sendSecondPublishBI(l.events.publish.Second_Publish_Seo_Wizard_click),this.getEditorAPI().account.openWixSEOWiz("EDITOR_POSTPUBLISH")},openTwitter(){this.sendSecondPublishBI(l.events.publish.Second_Publish_Twitter_share_click),o.utils.social.openTwitter(this.props.sitePublicUrl,this.props.isUserPremium)},openShoutout(){this.sendSecondPublishBI(l.events.publish.Second_Publish_ShoutOut_Share_click),o.utils.social.openShoutout(this.props.metaSiteId)},sendSecondPublishBI(e){!this.props.isFirstPublish&&this.props.userStatus&&this.getEditorAPI().bi.event(e,{user_status:this.props.userStatus})},render(){return u.default.createElement("div",{className:"panel-shout-out"},u.default.createElement("div",{className:"promote-title-wrapper"},u.default.createElement(c.default.Divider,{long:!0}),u.default.createElement("div",{className:"promote-title"},this.getTitle()),u.default.createElement(c.default.Divider,{long:!0})),u.default.createElement("div",{className:"promotion-content"},i.default.map(this.getPanelContent(),e=>u.default.createElement("div",{key:e.key,className:"promote"},e.symbol?u.default.createElement("div",{key:"promotionSymbol-".concat(e.key),className:"promote-symbol promote-symbol-".concat(e.key)},u.default.createElement(d.symbol,{name:e.symbol})):null,e.img&&!e.symbol?u.default.createElement("div",{key:"promotionImg-".concat(e.key),style:{backgroundImage:"url(".concat(e.img,")")},className:"promote-image"}):null,u.default.createElement("div",{className:"description"},e.description),u.default.createElement("a",{onClick:e.action},e.actionTitle)))))}})}.apply(t,i))||(e.exports=s)},6:function(e,t){e.exports=o},7:function(e,t){e.exports=r},8:function(e,t){e.exports=l},9:function(e,t){e.exports=u}})}));
//# sourceMappingURL=savePublish.min.js.map