define("shoutOut",["tslib","lodash","util","react","prop-types","create-react-class","constants","stateManagement","baseUI","santa-editor-symbols","core","experiment","addPanelDataConsts","santa-core-utils","tpa","superAppMenuInfra","mixins"],(function(e,t,a,i,s,n,r,o,l,u,p,d,c,m,_,f,g){return function(e){var t={};function a(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(i,s,function(t){return e[t]}.bind(null,s));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=2481)}({0:function(t,a){t.exports=e},1:function(e,a){e.exports=t},10:function(e,t){e.exports=u},11:function(e,t){e.exports=p},13:function(e,t){e.exports=d},147:function(e,t){e.exports=g},16:function(e,t){e.exports=c},17:function(e,t){e.exports=m},2:function(e,t){e.exports=a},205:function(e,t,a){var i,s;i=[a,t,a(0),a(2484)],void 0===(s=function(e,t,a,i){"use strict";return{events:(i=a.__importDefault(i)).default.biEvents,registerEvents:i.default.registerEvents}}.apply(t,i))||(e.exports=s)},206:function(e,t,a){var i,s;i=[a,t,a(0),a(23),a(6),a(92)],void 0===(s=function(e,t,a,i,s,n){"use strict";let r;function o(e,t,a){i.superApps.addWidget(e,t,a,{origin:i.constants.BI.type.ADD_WIDGET}),r.panelManager.closePanelByName(s.default.SUPER_APPS.SHOUTOUT_PANEL_NAME)}return i=a.__importStar(i),s=a.__importDefault(s),n=a.__importDefault(n),{onGsWidgetDrop:function(e,t){e.width=t.structure.layout.width,e.height=t.structure.layout.height,o(n.default.apps.getSubscribers.appId,t.structure.data.widgetId,e)},onGsWidgetClick:function(e){o(n.default.apps.getSubscribers.appId,e.data.widgetId)},onFeedWidgetDrop:function(e,t){e.width=t.structure.layout.width,e.height=t.structure.layout.height,o(n.default.appDefId,t.structure.data.widgetId,e)},onFeedWidgetClick:function(e){o(n.default.appDefId,e.data.widgetId)},init:function(e){r=e}}}.apply(t,i))||(e.exports=s)},23:function(e,t){e.exports=_},2481:function(e,t,a){var i,s;i=[a,t,a(0),a(40),a(2482),a(2485),a(206),a(92),a(6),a(13)],void 0===(s=function(e,t,a,i,s,n,r,o,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=a.__importStar(i),s=a.__importDefault(s),n=a.__importDefault(n),r=a.__importDefault(r),o=a.__importDefault(o),l=a.__importDefault(l),u=a.__importDefault(u),t.onPreviewReady=function(e){if(!e.dsRead)return;const t=l.default.SUPER_APPS.SHOUTOUT_PANEL_NAME,a=e.dsRead.generalInfo.isSitePublished(),s=function(){n||p(!0)};let n=!1;function p(a){i.button.registerButton(e,"shoutout",!0,t,"SiteApp_ShoutOut_Button_Hover_Caption","SiteApp_ShoutOut_Button_Hover_Caption","shoutout-panel","shoutOutLeftBarIcon",a),n=!0,u.default.isOpen("shoutOutNewFlow")&&e.registerInitUserPrefsCallback((function(){o.default.fetchSoState(e,(function(){!o.default.isUserFirstTimer(e)&&o.default.pimpleShouldAppear(e)&&o.default.showPimple(e)}))}))}a?p(!1):e.registerSitePublishedCallbacks(s),r.default.init(e)};const p=u.default.isOpen("shoutOutNewFlow")?n.default:s.default;t.menuPanel=p}.apply(t,i))||(e.exports=s)},2482:function(e,t,a){var i,s;i=[a,t,a(0),a(5),a(2),a(92),a(2483),a(3),a(40)],void 0===(s=function(e,t,a,i,s,n,r,o,l){"use strict";return i=a.__importDefault(i),s=a.__importStar(s),n=a.__importDefault(n),r=a.__importDefault(r),o=a.__importDefault(o),l=a.__importStar(l),i.default({displayName:"soMenuPanel",mixins:[s.propTypesFilterMixin],getSuperApp:()=>({id:"shoutout",appDefId:n.default.appDefId,appName:"shoutout",firstTimeTour:{templateFlow:[r.default],manuallyInstalledFlow:[r.default],promotionalFlow:[r.default]},panel:{name:"shoutOut.menuPanel",manage:{title:"no_title",helpId:"1",template:r.default},pages:{title:"no_title",helpId:"1",template:r.default},addElements:{title:"no_title",helpId:"1",template:r.default},learnMore:{title:"no_title",helpId:"1",template:r.default}},upgradeLinkText:"superAppTranslationKeys.upgradeLinkText",isAppInstalled:()=>!1}),render:function(){return o.default.createElement(l.superAppPanel,Object.assign({superApp:this.getSuperApp(),panelClass:"shoutout-panel"},this.filteredProps()))}})}.apply(t,i))||(e.exports=s)},2483:function(e,t,a){var i,s;i=[a,t,a(0),a(5),a(4),a(11),a(2),a(92),a(205),a(3),a(9),a(10),a(23)],void 0===(s=function(e,t,a,i,s,n,r,o,l,u,p,d){"use strict";return i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importStar(n),r=a.__importStar(r),o=a.__importDefault(o),l=a.__importDefault(l),u=a.__importDefault(u),p=a.__importStar(p),d=a.__importStar(d),i.default({displayName:"shoutOutPanel",mixins:[n.mixins.editorAPIMixin,r.propTypesFilterMixin,r.postMessageMixin],propTypes:{onClose:s.default.func.isRequired},promotionalImage:r.media.getMediaUrl("shoutOut/shoutOutPromotional.png"),userStates:{loading:"loading",firstTime:"firstTime",returning:"returning"},returningUserIframeUrl(){const e=this.getEditorAPI().site.getMetaSiteId();return o.default.getReturningUserIframeUrl(e)},getInitialState:()=>({userState:"none"}),componentDidMount(){this._updatedState()},startNowClick(){const e=this.getEditorAPI().site.getMetaSiteId();this._newMessageEvent();const t=o.default.getShoutOutNewMessageUrl(e);window.open(t)},createNewClick(){const e=this.getEditorAPI();this._newMessageEvent();const t=this.getEditorAPI().site.getMetaSiteId();e.panelManager.openPanel("panels.focusPanels.shoutOutTemplatesPanel",{frameUrl:o.default.getDirectTemplatesUrl(t)},!0)},onClose(){const e={is_first:this.state.userState===this.userStates.firstTime};this.getEditorAPI().bi.event(l.default.events.SHOUTOUT_EDITOR_PANEL_CLOSE,e),this.props.onClose()},_newMessageEvent(){this.getEditorAPI().bi.event(l.default.events.SHOUTOUT_NEW_MESSAGE,{context:"editor",msid:"guid",origin:"editorShotoutPanel",package_group:"",package_id:""})},_updatedState(){const e=this.getEditorAPI().site.getMetaSiteId();this.setState({userState:this.userStates.loading}),o.default.getUserState(e,this._onDone)},_onDone(e){const t=e.isReturning?this.userStates.returning:this.userStates.firstTime,a={is_first:!e.isReturning};this.getEditorAPI().bi.event(l.default.events.SHOUTOUT_EDITOR_PANEL_OPEN,a),this.setState({userState:t})},render(){return u.default.createElement("div",{className:"welcome-slide shoutout-add-panel"},this.state.userState==this.userStates.loading?u.default.createElement("div",{key:"shoutOutLoadingState",className:"shoutout-loading shoutout-panel-loading"}):null,this.state.userState==this.userStates.firstTime?u.default.createElement("div",{key:"shoutOutFirstTimeState",className:"shoutout-panel-first-time"},u.default.createElement("div",{onClick:this.onClose,className:"close"},u.default.createElement(d.symbol,{name:"headerCloseButton",className:"headerCloseButton"})),u.default.createElement("div",{src:this.promotionalImage,alt:"shoutout",className:"shoutout-first-time-image"},u.default.createElement("img",{src:this.promotionalImage,alt:"shoutout"})),u.default.createElement("h1",{className:"title shoutout-first-time-title"},r.translate("SiteApp_ShoutOut_Panel_Title")),u.default.createElement("div",{className:"sub-title shoutout-first-time-sub-title"},u.default.createElement("div",{className:"shoutout-first-time-sub-title-line"},r.translate("SiteApp_ShoutOut_Panel_Sub_Title_Get_The_Word")),u.default.createElement("div",{className:"shoutout-first-time-sub-title-line"},r.translate("SiteApp_ShoutOut_Panel_Sub_Title_Market_Your")," ",r.translate("SiteApp_ShoutOut_Panel_Sub_Title_Send_NewsLetter"))),u.default.createElement(p.button,{label:"SiteApp_ShoutOut_Panel_Next_button_Label",onClick:this.startNowClick,className:"shoutout-returning-create-new"})):null,this.state.userState==this.userStates.returning?u.default.createElement("div",{key:"shoutOutReturningState",className:"shoutout-panel-returning"},u.default.createElement("header",{className:"panel-header light shoutout-returning-header"},u.default.createElement("span",{className:"panel-header-title"},r.translate("SiteApp_ShoutOut_Common_My_ShoutOuts")),u.default.createElement("div",{onClick:this.onClose,className:"close"},u.default.createElement(d.symbol,{name:"headerCloseButton",className:"headerCloseButton"}))),u.default.createElement("iframe",{src:this.returningUserIframeUrl(),width:"100%",className:"shoutout-returning-user-iframe"}),u.default.createElement("div",{className:"shoutout-returning-footer"},u.default.createElement(p.button,{label:"SiteApp_ShoutOut_Panel_Returning_New",onClick:this.createNewClick,className:"shoutout-returning-create-new"}))):null)}})}.apply(t,i))||(e.exports=s)},2484:function(e,t,a){var i,s;i=[a,t,a(0),a(1)],void 0===(s=function(e,t,a,i){"use strict";return{biEvents:{SHOUTOUT_NEW_MESSAGE:{evid:77,src:36,endpoint:"shout",sampleRatio:0,fields:{context:"string",msid:"guid",origin:"string",package_group:"string",package_id:"string"}},SHOUTOUT_EDITOR_PANEL_OPEN:{evid:89,src:36,endpoint:"shout",sampleRatio:0,fields:{is_first:"bool",msid:"guid"}},SHOUTOUT_EDITOR_PANEL_CLOSE:{evid:90,src:36,endpoint:"shout",sampleRatio:0,fields:{is_first:"bool",type:"string",notification:"string",msid:"guid"}},SIE_WELCOME_PANEL_GET_STARTED_CLICK:{evid:111,src:36,endpoint:"shout",sampleRatio:0,fields:{shoutout_user:"bool",msid:"guid"}},SIE_SHOUTOUT_PANEL_RETURNING_BANNER_VIEW:{evid:112,src:36,endpoint:"shout",sampleRatio:0,fields:{type:"string",msid:"guid"}},SIE_SHOUTOUT_PANEL_RETURNING_BANNER_CLICK:{evid:113,src:36,endpoint:"shout",sampleRatio:0,fields:{type:"string",msid:"guid"}}},registerEvents:(i=a.__importDefault(i)).default.noop}}.apply(t,i))||(e.exports=s)},2485:function(e,t,a){var i,s;i=[a,t,a(0),a(5),a(11),a(92),a(205),a(2486),a(2487),a(2488),a(2489),a(2490),a(3),a(40)],void 0===(s=function(e,t,a,i,s,n,r,o,l,u,p,d,c,m){"use strict";i=a.__importDefault(i),s=a.__importStar(s),n=a.__importDefault(n),r=a.__importDefault(r),o=a.__importDefault(o),l=a.__importDefault(l),u=a.__importDefault(u),p=a.__importDefault(p),d=a.__importDefault(d),c=a.__importDefault(c),m=a.__importStar(m);const _={id:"shoutout",appDefId:n.default.appDefId,appName:"shoutout",firstTimeTour:{templateFlow:[o.default],manuallyInstalledFlow:[o.default],promotionalFlow:[o.default]},panel:{name:"shoutOut.menuPanel",manage:{title:"SiteApp_ShoutOut_Panels_Email_Title",helpId:"b4bf9ded-bf71-412b-889f-8586727adc24",template:l.default},pages:{title:"to-hide",helpId:"1",template:l.default},addElements:{title:"SiteApp_ShoutOut_Panels_Subscribe_Title",helpId:"012fc8f2-e84b-4bfb-b419-2f76bacc03aa",sections:[p.default],teaser:{id:"category_shoutout_get_subscribers_teaser",hide:!1,title:"SiteApp_ShoutOut_GsTeaser_Title",text:"SiteApp_ShoutOut_GsTeaser_Text",linkText:"true",helpId:"afc595d9-3b30-4d59-ac61-4ad3d7c2777d"}},learnMore:{title:"to-hide",helpId:"1",template:l.default}},extraTabs:[{title:"SiteApp_ShoutOut_Panels_Feed_Title",helpId:"c6b8ccb7-47bf-4045-ba36-21c44ce3111d",template:u.default,isDynamicHeight:!0,index:4,teaser:{id:"category_shoutout_feed_teaser",hide:!1,title:"SiteApp_ShoutOut_FeedTeaser_Title",text:"SiteApp_ShoutOut_FeedTeaser_Text"},sections:[d.default]}],upgradeLinkText:"superAppTranslationKeys.upgradeLinkText",isAppInstalled:()=>!0};return i.default({displayName:"soMenuPanel",mixins:[s.mixins.editorAPIMixin],componentWillUnmount(){n.default.isPimpleVisible(this.getEditorAPI())&&n.default.setPimpleViewed(this.getEditorAPI())},componentDidMount(){!function(e){let t="none";n.default.gs.isInstalled()?n.default.gs.isTouched()||(t="gsNotTouched"):t="gsNotInstalled",e(r.default.events.SHOUTOUT_EDITOR_PANEL_OPEN,{type:"Email",notification:t})}(this.getEditorAPI().bi.event)},getClass:()=>"shoutout-panel shoutout-panel-new",getSuperApp:()=>_,render:function(){return c.default.createElement(m.superAppPanel,{superApp:this.getSuperApp(),panelClass:this.getClass()})}})}.apply(t,i))||(e.exports=s)},2486:function(e,t,a){var i,s;i=[a,t,a(0),a(5),a(4),a(2),a(11),a(205),a(92),a(3),a(1),a(9),a(10),a(2)],void 0===(s=function(e,t,a,i,s,n,r,o,l,u,p,d,c,m){"use strict";return i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importStar(n),r=a.__importStar(r),o=a.__importDefault(o),l=a.__importDefault(l),u=a.__importDefault(u),p=a.__importDefault(p),d=a.__importStar(d),c=a.__importStar(c),i.default({displayName:"shoutOutFirstTimeTour",mixins:[r.mixins.editorAPIMixin,n.propTypesFilterMixin],render(){return u.default.createElement("div",{className:"get-started-slide shoutout-first-time-tour"},u.default.createElement("div",{onClick:this.onClose,className:"button"},u.default.createElement(c.symbol,{name:"headerCloseButton"})),u.default.createElement("div",{className:m.cx("shoutout-first-time-tour-image-container",{"shoutout-first-time-tour-image-container-large":this.state.banner.pros.length>3})},u.default.createElement("img",{src:this.firstTimePromoImage,alt:"shoutout"})),u.default.createElement("h1",{className:"title"},n.translate(this.state.banner.title)),u.default.createElement("div",{className:"bullets-wrapper"},u.default.createElement("ul",{className:"tip-bullets"},p.default.map(this.state.banner.pros,e=>u.default.createElement("li",{key:e,className:"bullet"},u.default.createElement("span",{className:"bullet-symbol"},u.default.createElement(c.symbol,{name:"cyclePickerV",className:"cyclePickerV"})),u.default.createElement("p",{className:"bullet-text"},n.translate(e)))))),u.default.createElement(d.button,{label:this.state.banner.action,onClick:this.onNextButtonClick,className:"get-started-add-btn"}))},firstTimePromoImage:n.media.getMediaUrl("shoutOut/shoutOutFirstTimeTour.png"),propTypes:{onClose:s.default.func.isRequired,nextSlide:s.default.func.isRequired},getInitialState(){const e={title:"SiteApp_ShoutOut_First_Time_Heading",pros:["SiteApp_ShoutOut_First_Time_Bullet_Promote","SiteApp_ShoutOut_First_Time_Bullet_Share","SiteApp_ShoutOut_First_Time_Bullet_Subscribers"],action:"SiteApp_ShoutOut_First_Time_Action"};return(l.default.isUserOpenedSo()||l.default.isUserReturning())&&(e.title="SiteApp_ShoutOut_First_Time_Opened_Heading",e.pros=["SiteApp_ShoutOut_First_Time_Opened_Bullet_Introduce","SiteApp_ShoutOut_First_Time_Opened_Bullet_Promote","SiteApp_ShoutOut_First_Time_Opened_Bullet_Share","SiteApp_ShoutOut_First_Time_Opened_Bullet_Subscribers"],e.action="SiteApp_ShoutOut_First_Time_Opened_Action"),{banner:e}},onClose(){this.props.onClose()},onNextButtonClick(){this.getEditorAPI().bi.event(o.default.events.SIE_WELCOME_PANEL_GET_STARTED_CLICK,{shoutout_user:l.default.isUserOpenedSo()||l.default.isUserReturning()}),this.props.nextSlide()}})}.apply(t,i))||(e.exports=s)},2487:function(e,t,a){var i,s;i=[a,t,a(0),a(5),a(11),a(2),a(23),a(92),a(205),a(206),a(6),a(3),a(10)],void 0===(s=function(e,t,a,i,s,n,r,o,l,u,p,d,c){"use strict";function m(){const e={visible:!1,installed:!1,touched:!1};return o.default.isPimpleVisible(this.getEditorAPI())&&(e.visible=!0,e.installed=o.default.gs.isInstalled(),e.touched=o.default.gs.isTouched()),e}function _(){return o.default.isUserReturning()?this.userStates.returning:this.userStates.new}return i=a.__importDefault(i),s=a.__importStar(s),n=a.__importStar(n),r=a.__importStar(r),o=a.__importDefault(o),l=a.__importDefault(l),u=a.__importDefault(u),p=a.__importDefault(p),d=a.__importDefault(d),c=a.__importStar(c),i.default({displayName:"shoutOutPanel",mixins:[s.mixins.editorAPIMixin,n.propTypesFilterMixin,n.postMessageMixin],propTypes:{},newUserPromoImage:n.media.getMediaUrl("shoutOut/shoutOutNewUser.png"),newUserGsBannerIcon:n.media.getMediaUrl("shoutOut/shoutOutNewUserGrowBannerIcon.png"),metaSiteId:"",userStates:{loading:"loading",new:"new",returning:"returning"},bannerTypes:{generic:"generic",store:"store"},getInitialState(){return{userState:_.call(this),gsState:m.call(this)}},componentDidMount(){o.default.isUserReturning()&&this.getEditorAPI().bi.event(l.default.events.SIE_SHOUTOUT_PANEL_RETURNING_BANNER_VIEW,{type:this.getBanner().type})},myShoutOutsUrl(){return o.default.getMyShoutOutsUrl(this.getEditorAPI().site.getMetaSiteId())},returningUserIframeUrl(){return o.default.getNewReturningUserIframeUrl(this.getEditorAPI().site.getMetaSiteId())},createNewClick(){this.getEditorAPI().bi.event(l.default.events.SHOUTOUT_NEW_MESSAGE,{context:"editor",msid:"guid",origin:"editorShotoutPanel",package_group:"",package_id:""})},getCreateNewUrl(){return o.default.getShoutOutNewMessageUrl(this.getEditorAPI().site.getMetaSiteId())},getBanner(){const e={type:this.bannerTypes.generic,templatesUrl:o.default.getShoutOutTemplatesUrl(this.getEditorAPI().site.getMetaSiteId()),imageUrl:n.media.getMediaUrl("shoutOut/shoutOutReturningUserBannerGeneric.png"),titleKey:"SiteApp_ShoutOut_Email_Panel_Returning_Title",actionKey:"SiteApp_ShoutOut_Email_Panel_Returning_Create"};return r.superApps.isInstalled(o.default.apps.store.appId)&&(e.type=this.bannerTypes.store,e.imageUrl=n.media.getMediaUrl("shoutOut/shoutOutReturningUserBannerStore.png"),e.titleKey="SiteApp_ShoutOut_Email_Panel_Returning_Store_Title",e.actionKey="SiteApp_ShoutOut_Email_Panel_Returning_Store_Create"),e},viewTemplates(){this.getEditorAPI().panelManager.openPanel("panels.focusPanels.shoutOutTemplatesPanel",{frameUrl:o.default.getDirectTemplatesUrl(this.getEditorAPI().site.getMetaSiteId())},!0)},addGsToSiteClick(){u.default.onGsWidgetClick({data:{widgetId:o.default.apps.getSubscribers.widgetId}})},closeGsBanner(){this.setState({gsState:{visible:!1}})},openGsHelp(){const e=this.getEditorAPI(),t={origin:p.default.SUPER_APPS.SHOUTOUT_PANEL_NAME,component:"shoutoutGs",learn_more:!0};e.panelManager.openHelpCenter("012fc8f2-e84b-4bfb-b419-2f76bacc03aa",null,t)},bannerActionClick(){this.viewTemplates(),this.getEditorAPI().bi.event(l.default.events.SIE_SHOUTOUT_PANEL_RETURNING_BANNER_CLICK,{type:this.getBanner().type})},render(){return d.default.createElement("div",{className:"shoutout-email-panel"},this.state.userState===this.userStates.loading?d.default.createElement("div",{key:"shoutout-email-panel-loading",className:"shoutout-panel-loading"}):null,this.state.userState===this.userStates.new?d.default.createElement("div",{key:"shoutout-email-panel-new-user",className:"shoutout-panel-new-user"},d.default.createElement("div",{className:"shoutout-new-user-standard"},d.default.createElement("div",{className:"shoutout-new-user-image"},d.default.createElement("img",{src:this.newUserPromoImage,alt:"shoutout"})),d.default.createElement("div",{className:"shoutout-new-user-overlay"},d.default.createElement("p",{className:"shoutout-new-user-title"},n.translate("SiteApp_ShoutOut_Email_Panel_First_Title")),d.default.createElement("a",{href:this.getCreateNewUrl(),target:"_blank",onClick:this.createNewClick,className:"control-button shoutout-panel-url-as-button"},n.translate("SiteApp_ShoutOut_Email_Panel_First_Create")),d.default.createElement("button",{onClick:this.viewTemplates,className:"shoutout-panel-button-as-url shoutout-open-templates"},n.translate("SiteApp_ShoutOut_Email_Panel_First_Templates"))))):null,this.state.userState===this.userStates.returning?d.default.createElement("div",{key:"shoutout-email-panel-returning",className:"shoutout-email-panel-returning"},this.state.gsState.visible?d.default.createElement("div",{key:"visible",className:"shoutout-email-panel-returning-gs"},d.default.createElement("div",{className:"first-time-info-box in-header shoutout-new-user-gs-banner"},d.default.createElement("div",{className:"top-line"},d.default.createElement("div",{onClick:this.closeGsBanner,className:"close"},d.default.createElement(c.symbol,{name:"firstTimeInfoBoxClose"}))),d.default.createElement("div",{className:"shoutout-new-user-gs-banner-image"},d.default.createElement("img",{src:this.newUserGsBannerIcon,alt:"shoutout"}),d.default.createElement("div",{className:"shoutout-new-user-gs-banner-notification"},"1")),d.default.createElement("div",{className:"shoutout-new-user-gs-banner-content"},d.default.createElement("div",{className:"shoutout-new-user-gs-banner-text"},this.state.gsState.installed?n.translate("SiteApp_ShoutOut_Email_Panel_First_Gs_Installed_Banner_Text"):n.translate("SiteApp_ShoutOut_Email_Panel_First_Gs_Banner_Text")),d.default.createElement("div",{className:"shoutout-new-user-gs-banner-actions"},d.default.createElement("button",{onClick:this.openGsHelp,className:"control-button link no-margin btn-sm btn-text"},d.default.createElement("span",null,n.translate("add_category_teaser_link")),d.default.createElement(c.symbol,{name:"firstTimeInfoBoxArrowRight",key:"learnMoreSymbol",className:"arrow"})),!1===this.state.gsState.installed?d.default.createElement("button",{onClick:this.addGsToSiteClick,key:"installed",className:"control-button shoutout-new-user-gs-banner-action"},n.translate("SiteApp_ShoutOut_Email_Panel_First_Gs_Banner_Action")):null)))):null,this.state.gsState.visible?null:(()=>{const e=this.getBanner();return d.default.createElement("div",{key:"notVisible",className:"shoutout-email-panel-returning-standard"},d.default.createElement("div",{className:"shoutout-email-returning-banner-image"},d.default.createElement("img",{src:e.imageUrl,alt:"shoutout"})),d.default.createElement("div",{className:"shoutout-email-returning-banner-bottom"},d.default.createElement("p",{className:"shoutout-email-returning-banner-title"},n.translate(e.titleKey)),d.default.createElement("button",{onClick:this.bannerActionClick,className:"control-button shoutout-email-returning-banner-action"},n.translate(e.actionKey))))})(),d.default.createElement("iframe",{src:this.returningUserIframeUrl(),width:"100%",className:"shoutout-email-returning-shoutouts-iframe"}),d.default.createElement("a",{href:this.myShoutOutsUrl(),target:"_blank",className:"shoutout-panel-url shoutout-panel-url-my-shoutouts"},n.translate("SiteApp_ShoutOut_Email_Panel_Returning_View_ShoutOuts"))):null)}})}.apply(t,i))||(e.exports=s)},2488:function(e,t,a){var i,s;i=[a,t,a(0),a(1),a(5),a(4),a(11),a(147),a(3),a(2),a(10)],void 0===(s=function(e,t,a,i,s,n,r,o,l,u,p){"use strict";return i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importDefault(n),r=a.__importStar(r),o=a.__importStar(o),l=a.__importDefault(l),u=a.__importStar(u),p=a.__importStar(p),s.default({displayName:"superAppAddElementsPanel",mixins:[r.mixins.editorAPIMixin,o.dragToStageMixin],propTypes:{onChangeStateOnInnerNavigationOpen:n.default.func.isRequired,superApp:n.default.shape({panel:{addElements:n.default.object},extraTabs:n.default.array}).isRequired},getInitialState:()=>({firstTimeInfoBoxHeight:0}),isMobile(){return this.getEditorAPI().viewMode.get()===this.getEditorAPI().dsRead.viewMode.VIEW_MODES.MOBILE},getSections(){return this.props.superApp.extraTabs[0].sections},getTeaser(){return this.props.superApp.extraTabs[0].teaser},getCategoryViewProps(){const e=i.default.cloneDeep(this.props);return i.default.assign(e,{changeStateOnInnerNavigationOpen:this.props.onChangeStateOnInnerNavigationOpen,firstTimeInfoBoxHeight:this.state.firstTimeInfoBoxHeight,onItemDrag:this.startItemDrag})},goToDesktop(){this.getEditorAPI().setDesktopEditor()},render(){const e=this.props.superApp.panel.addElements,t=this.isMobile(),a=this.getEditorAPI().addPanelInfra.categoryView;return l.default.createElement("div",{className:"super-app-add-elements-panel category-view-wrapper"},t?null:l.default.createElement(a,Object.assign({key:"categoryView",teaser:this.getTeaser(),origin:"vertical_button",items:this.getSections()},this.getCategoryViewProps())),t?l.default.createElement("div",{key:"mobileView",className:"super-app-mobile-view"},l.default.createElement(p.symbol,{name:this.props.superApp.panel.addElements.mobileImage}),l.default.createElement("p",{className:"bigger-text"},u.translate(e.disabledInMobileMessageTitle)),l.default.createElement("p",null,u.translate(e.disabledInMobileMessageDescription)," ",l.default.createElement("a",{onClick:this.goToDesktop},u.translate(e.disabledInMobileMessageDescriptionLink)))):null)}})}.apply(t,i))||(e.exports=s)},2489:function(e,t,a){var i,s;i=[a,t,a(0),a(16),a(92),a(206)],void 0===(s=function(e,t,a,i,s,n){"use strict";return i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importDefault(n),{type:i.default.SECTIONS_TYPES.PRESET,hide:!1,title:"SiteApp_ShoutOut_Panels_Subscribe_Add_Title",showSectionHeader:!0,additionalBehaviours:{labelMode:i.default.LABEL_BEHAVIOUR.NONE,infoIcon:i.default.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:i.default.HOVER_IMAGE_ACTIONS.NONE,scaleProportion:i.default.DEFAULT_SCALE_FOR_PRESET,iconEnabledForComps:[]},props:{image:"shoutOut/shoutOutSectionGetSub.png",imageHover:null,onDrop:n.default.onGsWidgetDrop,onClick:n.default.onGsWidgetClick,items:[{id:"shoutout_get_subscribers_main",structure:{skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:500,height:126,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},applicationId:"16",widgetId:s.default.apps.getSubscribers.widgetId},style:{type:"TopLevelStyle",id:"tpaw0",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{groups:{},properties:{},propertiesSource:{}},componentClassName:"",pageId:"",compId:"",styleType:"system",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"}},preset:{rect:{width:436,height:134,x:0,y:0},label:""}}],compTypes:["wysiwyg.viewer.components.tpapps.TPAWidget"]},help:{hide:!1,text:"SiteApp_ShoutOut_Panels_Subscribe_Add_Tooltip"}}}.apply(t,i))||(e.exports=s)},2490:function(e,t,a){var i,s;i=[a,t,a(0),a(16),a(92),a(206)],void 0===(s=function(e,t,a,i,s,n){"use strict";return i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importDefault(n),{type:i.default.SECTIONS_TYPES.PRESET,hide:!1,title:"SiteApp_ShoutOut_Panels_Feed_Add_Title",showSectionHeader:!0,additionalBehaviours:{labelMode:i.default.LABEL_BEHAVIOUR.NONE,infoIcon:i.default.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:i.default.HOVER_IMAGE_ACTIONS.NONE,scaleProportion:i.default.DEFAULT_SCALE_FOR_PRESET,iconEnabledForComps:[]},props:{image:"shoutOut/shoutOutSectionFeed.png",imageHover:null,onDrop:n.default.onFeedWidgetDrop,onClick:n.default.onFeedWidgetClick,items:[{id:"shoutout_get_feed_main",structure:{skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:420,height:280,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},applicationId:"16",widgetId:s.default.apps.feed.widgetId},style:{type:"TopLevelStyle",id:"tpaw0",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{groups:{},properties:{},propertiesSource:{}},componentClassName:"",pageId:"",compId:"",styleType:"system",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"}},preset:{rect:{width:435,height:286,x:0,y:0},label:""}}],compTypes:["wysiwyg.viewer.components.tpapps.TPAWidget"]},help:{hide:!1,text:"SiteApp_ShoutOut_Panels_Feed_Add_Tooltip"}}}.apply(t,i))||(e.exports=s)},3:function(e,t){e.exports=i},4:function(e,t){e.exports=s},40:function(e,t){e.exports=f},5:function(e,t){e.exports=n},6:function(e,t){e.exports=r},7:function(e,t){e.exports=o},9:function(e,t){e.exports=l},92:function(e,t,a){var i,s;i=[a,t,a(0),a(17),a(6),a(7)],void 0===(s=function(e,t,a,i,s,n){"use strict";i=a.__importDefault(i),s=a.__importDefault(s),n=a.__importDefault(n);const r="135c3d92-0fea-1f9d-2ba5-2a1dfb04297e",o="1375baa8-8eca-5659-ce9d-455b2009250d",l="https://editor.wix.com/shoutout/",u="//editor.wix.com/shoutout/api/",p=s.default.SUPER_APPS.SHOUTOUT_PANEL_NAME,d={userState:{isReturning:!1,openedSo:!1},gsState:{installed:null,touched:null}};function c(e,t){const a="".concat(u,"services/instance?metaSiteId=").concat(e);i.default.requestsUtil.fetchJson(a).then(e=>{const t=e?e.instance:null;if(!t)return Promise.reject();const a="".concat(u,"messages/counts?instance=").concat(t);return i.default.requestsUtil.fetchJson(a)}).then(e=>{e&&e.total>0?t({isReturning:!0}):t({isReturning:!1,openedSo:!0})}).catch(()=>t({isReturning:!1}))}function m(e,t){const a=e.dsRead.tpa.app.getDataByAppDefId(t);return a?e.dsRead.tpa.app.getAllCompsByApplicationId(a.applicationId):[]}return{appDefId:r,getReturningUserIframeUrl:function(e){return"".concat(l+e,"/direct#/messages-list")},getDirectTemplatesUrl:function(e){return"".concat(l+e,"/direct#/template-choose/wix-editor")},getShoutOutNewMessageUrl:function(e,t){const a=encodeURIComponent("?dl=message&referralInfo=editorSoPanel&tags=".concat(t||"so-template-site-promotion"));return"https://www.wix.com/my-account/sites/".concat(e,"/app/").concat(r,"?referralInfo=editorSoPanel&appState=").concat(a)},getUserState:c,apps:{store:{appId:"1380b703-ce81-ff05-f115-39571d94dfcd"},music:{appId:"13bb5d67-1add-e770-a71f-001277e17c57"},getSubscribers:{appId:o,widgetId:"1375babd-6f2b-87ed-ff19-5778602c8b86"},feed:{widgetId:"141995eb-c700-8487-6366-a482f7432e2b"}},getNewReturningUserIframeUrl:function(e){return"".concat(l+e,"/direct#/messages-list-new")},getShoutOutTemplatesUrl:function(e){const t=encodeURIComponent("?dl=template-choose/wix-editor");return"https://www.wix.com/my-account/sites/".concat(e,"/app/").concat(r,"?referralInfo=editorSoPanel&appState=").concat(t)},getMyShoutOutsUrl:function(e){const t=encodeURIComponent("?dl=my-shoutouts");return"https://www.wix.com/my-account/sites/".concat(e,"/app/").concat(r,"?referralInfo=editorSoPanel&appState=").concat(t)},pimpleShouldAppear:function(e){return!(d.gsState.touched||function(e){return!!n.default.editorPlugins.userPreferences.selectors.getSiteUserPreferences("".concat("shoutout","/pimpleViewed"))(e.store.getState())}(e)||!d.userState.isReturning)},setPimpleViewed:function(e){e.store.dispatch(n.default.editorPlugins.leftBar.actions.setNotificationsCount(p,0)),e.store.dispatch(n.default.editorPlugins.userPreferences.actions.setSiteUserPreferences("".concat("shoutout","/pimpleViewed"),"true"))},showPimple:function(e){e.store.dispatch(n.default.editorPlugins.leftBar.actions.setNotificationsCount(p,1))},isPimpleVisible:function(e){return n.default.editorPlugins.leftBar.selectors.getNotificationsCount(e.store.getState(),p)>0},isUserReturning:function(){return!!d.userState&&d.userState.isReturning},isUserOpenedSo:function(){return!!d.userState&&(d.userState.isReturning||d.userState.openedSo)},isUserFirstTimer:function(e){const t=n.default.editorPlugins.userPreferences.selectors.getSiteUserPreferences("".concat("shoutout","/in_first_time_tour"))(e.store.getState());return!t||"false"!==t},fetchSoState:function(e,t){!function(e,t){const a=m(e,o);a&&a.length>0?t(!0):t(!1)}(e,(function(a){d.gsState.installed=a,function(e,t){const a=m(e,o);a&&a.length>0&&(a.length>1||a[0].tpaData)?t(!0):t(!1)}(e,(function(a){d.gsState.touched=a,c(e.site.getMetaSiteId(),(function(e){d.userState=e,t()}))}))}))},gs:{isInstalled:()=>d.gsState.installed,isTouched:()=>d.gsState.touched}}}.apply(t,i))||(e.exports=s)}})}));
//# sourceMappingURL=shoutOut.min.js.map