!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("videoMakerOpener",[],e):"object"==typeof exports?exports.videoMakerOpener=e():t.videoMakerOpener=e()}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="https://static.parastorage.com/services/video-maker-opener/1.382.0/",n(n.s=42)}([function(t,e,n){!function(t){"use strict";function e(t){return null==t}function n(t){throw new Error("Argument "+t+" is empty.")}function r(t){return"function"==typeof t&&"getType"in t}function o(t){throw new Error("Argument "+t+' is invalid, it should be an action-creator instance from "typesafe-actions"')}function i(t,e){if(null==t)throw new Error("Argument contains array with empty element at index "+e);if(null==t.getType)throw new Error("Argument contains array with invalid element at index "+e+', it should be an action-creator instance from "typesafe-actions"')}function u(t){return"string"==typeof t||"symbol"==typeof t}function s(t){return!u(t)}function a(t){throw new Error("Argument "+t+" is invalid, it should be an action type of type: string | symbol")}function c(t,e){if(null==t)throw new Error("Argument contains array with empty element at index "+e);if("string"!=typeof t&&"symbol"!=typeof t)throw new Error("Argument contains array with invalid element at index "+e+", it should be of type: string | symbol")}function f(t,r,i,u){return e(t)&&n(1),s(t)&&o(1),{type:t,payload:r,meta:i,error:u}}function l(t,r){return e(t)&&n(1),s(t)&&a(1),Object.assign((function(){var e=null!=r?r.apply(void 0,arguments):void 0;return Object.assign({type:t},e)}),{getType:function(){return t},toString:function(){return t}})}function d(t,r,o){return e(t)&&n(1),s(t)&&a(1),function(){return l(t,(function(){var t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1];return null==r&&null==o||(t=null!=r?r.apply(void 0,arguments):void 0,e=null!=o?o.apply(void 0,arguments):void 0),Object.assign({},void 0!==t&&{payload:t},{},void 0!==e&&{meta:e})}))}}function p(t){return e(t)&&n(1),r(t)||o(1),t.getType()}function h(t,r){e(t)&&n(1),s(t)&&a(1);var o=null!=r?r(t):function(){return{type:t}};return Object.assign(o,{getType:function(){return t},toString:function(){return t}})}var v={createAction:function(t,e){var n=null==e?function(){return f(t)}:e(f.bind(null,t));return Object.assign(n,{getType:function(){return t},toString:function(){return t}})},createCustomAction:h,createStandardAction:function(t){return e(t)&&n(1),s(t)&&a(1),Object.assign((function(){return h(t,(function(t){return function(e,n){return{type:t,payload:e,meta:n}}}))}),{map:function(e){return h(t,(function(t){return function(n,r){return Object.assign(e(n,r),{type:t})}}))}})}};t.action=f,t.createAction=d,t.createAsyncAction=function(t,e,n,r){return function(){var o=[t,e,n,r].map((function(t,e){return Array.isArray(t)?d(t[0],t[1],t[2])():"string"==typeof t||"symbol"==typeof t?d(t)():void(e<3&&function(t){throw new Error("Argument "+t+' is invalid, it should be an action type of "string | symbol" or a tuple of "[string | symbol, Function, Function?]"')}(e))}));return{request:o[0],success:o[1],failure:o[2],cancel:o[3]}}},t.createCustomAction=l,t.createReducer=function t(e,n){void 0===n&&(n={});var o=Object.assign({},n),i=function(n,i){var s=Array.isArray(n)?n:[n],a={};return s.map((function(t,e){return r(t)?p(t):u(t)?t:function(t){throw new Error("Argument "+t+' is invalid, it should be an action-creator instance from "typesafe-actions" or action type of type: string | symbol')}(e+1)})).forEach((function(t){return a[t]=i})),t(e,Object.assign({},o,{},a))};return Object.assign((function(t,n){if(void 0===t&&(t=e),o.hasOwnProperty(n.type)){var r=o[n.type];if("function"!=typeof r)throw Error('Reducer under "'+n.type+'" key is not a valid reducer');return r(t,n)}return t}),{handlers:Object.assign({},o),handleAction:i,handleType:i})},t.deprecated=v,t.getType=p,t.isActionOf=function(t,r){e(t)&&n(1);var o=Array.isArray(t)?t:[t];o.forEach(i);var u=function(t){return o.some((function(e){return t.type===e.getType()}))};return void 0===r?u:u(r)},t.isOfType=function(t,r){e(t)&&n(1);var o=Array.isArray(t)?t:[t];o.forEach(c);var i=function(t){return o.includes(t.type)};return void 0===r?i:i(r)}}(e)},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5).Host;e.setHost=function(t){r=t},e.getHost=function(){return r},e.isWebWorker=function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope},e.requestWindow=function(t){if("undefined"!=typeof window&&window)try{return window.top===window.self?t?t(window):window:null}catch(t){return null}return null}},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.now=function(){return"undefined"!=typeof performance&&performance&&performance.now?performance.now():-1},e.getDesktopSize=function(t){return(t.screen&&t.screen.width||0)+"x"+(t.screen&&t.screen.height||0)},e.getWindowSize=function(t){var e=0,n=0;return t.innerWidth?(e=t.innerWidth,n=t.innerHeight):t.document&&(t.document.documentElement&&t.document.documentElement.clientWidth?(e=t.document.documentElement.clientWidth,n=t.document.documentElement.clientHeight):t.document.body&&t.document.body.clientWidth&&(e=t.document.body.clientWidth,n=t.document.body.clientHeight)),e+"x"+n},e.sendBeacon=function(t,e){return!("undefined"==typeof navigator||!navigator||!navigator.sendBeacon)&&navigator.sendBeacon(t,e)},e.readCookie=function(t){if("undefined"==typeof document)return null;for(var e=0,n=document.cookie.split(";");e<n.length;e++){for(var r=n[e].split("="),o=r[0],i=r[1];" "===o[0];)o=o.substr(1);if(o===t)return i}return""}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Host="frog.wix.com",e.LoggerVersion="2.0.270",function(t){t.Auto="auto",t.PostMessage="postMessage"}(e.PublishMethods||(e.PublishMethods={})),function(t){t[t.Unsupported=0]="Unsupported"}(e.Errors||(e.Errors={})),function(t){t.msid="_msid",t.clientId="_client_id",t.uuid="_uuid",t.visitorId="_visitorId",t.siteMemberId="_siteMemberId"}(e.EventContextMap||(e.EventContextMap={}))},,function(t,e){},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.name=n.constructor.name,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Error),e}();t.exports.defined=function(t,e){if(void 0===t)throw new o(e)},t.exports.object=function(t,e){if(void 0!==t&&("object"!==(void 0===t?"undefined":r(t))||Array.isArray(t)||null===t))throw new o(e)},t.exports.ok=function(t,e){if(!t)throw new o(e)},t.exports.func=function(t,e){if(void 0!==t&&"function"!=typeof t)throw new o(e)},t.exports.AssertionError=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),o=n(2),i=0;e.getCookies=function(t){return Object.keys(t).reduce((function(e,n){var o="string"==typeof t[n]?{name:t[n]}:t[n],i=o.name,u=o.transform,s=(void 0===u?function(t){return t}:u)(r.readCookie(i));return s&&(e[n]=s),e}),{})},e.buildBiUrl=function(t,e,n){var r=t.host,u=void 0===r?"":r,s=t.endpoint,a=void 0===s?"":s;void 0===n&&(n={}),u=u||o.getHost(),a=n.endpoint||a,n.useBatch||(e._=""+(new Date).getTime()+i++);var c=n.useBatch?[]:Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}),[]);return["//"+u+"/"+a].concat(c.length?c.join("&"):[]).join("?")},e.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var n=t.call(this,e)||this;return n.name=n.constructor.name,n}return o(e,t),e}(Error);e.AssertionError=i;var u=function(t){function e(e){var n=t.call(this,e)||this;return n.name=n.constructor.name,n}return o(e,t),e}(Error);e.APINotSupportedError=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(38);e.Mandatory=r.Mandatory;var o=n(39);e.Quality=o.Quality;var i=n(40);e.VideoScripts=i.VideoScripts;var u=n(41);e.Orientations=u.Orientations},function(t,e){},function(t,e,n){"use strict";var r=n(26),o=n(14),i=n(15);t.exports.BiLoggerFactory=r,t.exports.BiLogger=o,t.exports.BiLoggerManager=i.BiLoggerManager,t.exports.factory=function(){return new r},t.exports.manager=i.manager},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=n(8),i=n(27),u=i.mapValues,s=i.filterValues,a=n(28),c=n(29),f=n(30),l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._publishers=e.publishers,this._validators=e.validators||[],this._defaults=e.defaults,this._events=e.events||{},this._context=n||{},this._defaultValueTimeout=e.defaultValueTimeout||5e3,this._defaultContinueOnFail=e.defaultContinueOnFail||!1,this._onPublisherFailHandler=e.onPublisherFailHandler||t._defaultPublisherFailHandler}return r(t,[{key:"log",value:function(t,e,n){var r=this;o.defined(t,"Event object or event key must be provided.");var i=this._extractEventAndContext(t,e,n),a=i.event,c=i.context,f=void 0!==c.useBatch?c.useBatch:this._context.useBatch;if(f){var l=this._initBuffer(f),d=s(this._defaults,(function(t){return"function"==typeof t})),p=u(d,(function(t){return t()}));return l.feed(Object.assign({},a,p),c)}return this._getDefaults().then((function(t){var e=Object.assign({},t,a);if(!(0===r._validators.length||r._validators.some((function(t){return t.match(e)&&(t.execute(e)||!0)}))))throw new Error("No validator accepted the event. Source: "+e.src+" Evid: "+(e.evid||e.evtId));return r._send(e,c)}))}},{key:"flush",value:function(){return this._buffer?this._buffer.flush():Promise.resolve()}},{key:"_send",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Promise.all(this._publishers.map((function(r){var o=Object.assign({},t);return Promise.resolve().then((function(){return r(o,Object.assign({},e._context,n))})).catch((function(t){return e._onPublisherFailHandler(t,{publisherName:r.name})}))}))).then((function(){}))}},{key:"_extractEventAndContext",value:function(t,e,n){var r=void 0,i={};if("string"!=typeof t)r=t,i=e||i;else{if(!(r=this._events[t]))throw new o.AssertionError("Event with key '"+t+"' not found in event map.");e&&(r=Object.assign({},r,e),i=n||i)}return{event:r,context:i}}},{key:"_initBuffer",value:function(t){var e=this,n=!0===t?300:t;return this._buffer||(this._buffer=new f(n).onFlush((function(n){var r=s(e._defaults,(function(t){return"function"!=typeof t}));return n.g=r,e._send(n,{useBatch:t})})))}},{key:"_handleDefaultsError",value:function(t){return this._defaultContinueOnFail?(c.error(t),null):Promise.reject(t)}},{key:"_getDefaults",value:function(){var t=this;if(!this._defaults)return Promise.resolve({});var e=u(this._defaults,(function(e,n){if("function"==typeof e)try{e=e()}catch(e){return t._handleDefaultsError(e)}return e&&"function"!=typeof e.then?e:a.timedPromise(e,{message:"Cannot get default value '"+n+" for BI Event'",timeout:t._defaultValueTimeout}).catch((function(e){return t._handleDefaultsError(e)}))}));return a.allAsObject(e)}}],[{key:"_defaultPublisherFailHandler",value:function(t,e){return e.publisherName}}]),t}();t.exports=l},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=n(8),i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.reset()}return r(t,[{key:"reset",value:function(){this._handlers=[]}},{key:"onLoggerCreated",value:function(t){o.defined(t,"Handler must be provided."),o.func(t,"Handler must be a function."),this._handlers.push(t)}},{key:"notifyLoggerCreated",value:function(t){this._handlers.forEach((function(e){return e(t)}))}}]),t}();t.exports={manager:new i,BiLoggerManager:i}},function(t,e){},function(t,e){},function(t,e,n){var r=n(22);"string"==typeof r&&(r=[[t.i,r,""]]);var o={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(24)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){"use strict";var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var o=n(13),i=r(n(32)),u=r(n(34));e.factory=function(t){return void 0===t&&(t={}),(t.trackSession||void 0===t.trackSession)&&i.track(u.factory),u.factory(t)},e.setHost=u.setHost,e.manager=o.manager,e.default={factory:e.factory,setHost:u.setHost,manager:o.manager}},,,function(t,e,n){(e=t.exports=n(23)(!1)).push([t.i,"._2Vrzi{position:fixed;top:0;left:0;width:100%;height:100%;z-index:10100;border:none;overflow:hidden}\n",""]),e.locals={frame:"_2Vrzi"}},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=(u=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(u))))+" */"),i=r.sources.map((function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"}));return[n].concat(i).concat([o]).join("\n")}var u;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(o=0;o<t.length;o++){var u=t[o];null!=u[0]&&r[u[0]]||(n&&!u[2]?u[2]=n:n&&(u[2]="("+u[2]+") and ("+n+")"),e.push(u))}},e}},function(t,e,n){var r,o,i={},u=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),s=function(t,e){return e?e.querySelector(t):document.querySelector(t)},a=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var r=s.call(this,t,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}}(),c=null,f=0,l=[],d=n(25);function p(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=i[r.id];if(o){o.refs++;for(var u=0;u<o.parts.length;u++)o.parts[u](r.parts[u]);for(;u<r.parts.length;u++)o.parts.push(b(r.parts[u],e))}else{var s=[];for(u=0;u<r.parts.length;u++)s.push(b(r.parts[u],e));i[r.id]={id:r.id,refs:1,parts:s}}}}function h(t,e){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],u=e.base?i[0]+e.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[u]?r[u].parts.push(s):n.push(r[u]={id:u,parts:[s]})}return n}function v(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),l.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=a(t.insertAt.before,n);n.insertBefore(e,o)}}function y(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=l.indexOf(t);e>=0&&l.splice(e,1)}function m(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var r=function(){0;return n.nc}();r&&(t.attrs.nonce=r)}return g(e,t.attrs),v(t,e),e}function g(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function b(t,e){var n,r,o,i;if(e.transform&&t.css){if(!(i="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=i}if(e.singleton){var u=f++;n=c||(c=m(e)),r=E.bind(null,n,u,!1),o=E.bind(null,n,u,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),v(t,e),e}(e),r=P.bind(null,n,e),o=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(e),r=O.bind(null,n),o=function(){y(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=u()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=h(t,e);return p(n,e),function(t){for(var r=[],o=0;o<n.length;o++){var u=n[o];(s=i[u.id]).refs--,r.push(s)}t&&p(h(t,e),e);for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var a=0;a<s.parts.length;a++)s.parts[a]();delete i[s.id]}}}};var w,_=(w=[],function(t,e){return w[t]=e,w.filter(Boolean).join("\n")});function E(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=_(e,o);else{var i=document.createTextNode(o),u=t.childNodes;u[e]&&t.removeChild(u[e]),u.length?t.insertBefore(i,u[e]):t.appendChild(i)}}function O(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function P(t,e,n){var r=n.css,o=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(r=d(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var u=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(u),s&&URL.revokeObjectURL(s)}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var o,i=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=n(8),u=n(14),s=n(15),a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._publishers=[],this._validators=[],this._defaults={},this._events={}}return o(t,[{key:"addPublisher",value:function(t){return i.defined(t,"Publisher must be provided"),i.ok("function"==typeof t,"Expected a publisher function"),this._publishers.push(t),this}},{key:"addValidator",value:function(t){return i.defined(t,"Validator must be provided"),i.ok("object"===(void 0===t?"undefined":r(t))&&t,"Expected a validator object"),i.ok(t.execute&&t.match,"Provided validator does not match the interface"),this._validators.push(t),this}},{key:"setDefaults",value:function(t){return i.defined(t,"Defaults must be provided"),i.object(t,"Defaults must be an object"),this._defaults=t,this}},{key:"updateDefaults",value:function(t){return i.defined(t,"Defaults must be provided"),i.object(t,"Defaults must be an object"),Object.assign(this._defaults,t),this}},{key:"setEvents",value:function(t){return i.defined(t,"Events must be provided"),i.object(t,"Events must be an object"),this._events=t,this}},{key:"setDefaultValueTimeout",value:function(t){return i.defined(t,"Default Value Timeout must be provided"),this._defaultValueTimeout=t,this}},{key:"setDefaultContinueOnFail",value:function(t){return i.defined(t,"Default Continue On Fail must be provided"),this._defaultContinueOnFail=t,this}},{key:"setPublisherFailHandler",value:function(t){return i.defined(t,"Publisher Fail Handler must be provided"),this._onPublisherFailHandler=t,this}},{key:"logger",value:function(t){var e=new u({publishers:this._publishers,validators:this._validators,defaults:this._defaults,events:this._events,defaultValueTimeout:this._defaultValueTimeout,defaultContinueOnFail:this._defaultContinueOnFail,onPublisherFailHandler:this._onPublisherFailHandler},t);return s.manager.notifyLoggerCreated(e),e}}]),t}();t.exports=a},function(t,e,n){"use strict";t.exports.mapValues=function(t,e){return t?Object.keys(t).reduce((function(n,r){return n[r]=e(t[r],r,t),n}),{}):{}},t.exports.filterValues=function(t,e){return t?Object.keys(t).reduce((function(n,r){return e(t[r],r,t)&&(n[r]=t[r]),n}),{}):{}}},function(t,e,n){"use strict";t.exports.timedPromise=function(t,e){var n=e.message,r=e.timeout,o=new Promise((function(t,e){setTimeout(e,r,n?"Timeout: "+n:"Timeout")}));return Promise.race([t,o])},t.exports.allAsObject=function(t){var e=Object.keys(t);return Promise.all(e.map((function(e){return t[e]}))).then((function(t){return t.reduce((function(t,n,r){return t[e[r]]=n,t}),{})}))}},function(t,e,n){"use strict";t.exports={error:function(){var t;console&&console.error&&(t=console).error.apply(t,arguments)}}},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=n(31),i=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._flushHandler=function(t){return t},this._flushDebounced=o((function(){return n.flush()}),e),this._init()}return r(t,[{key:"_init",value:function(){var t=this;this._startTime=Date.now(),this._events=[],this._resolve=null,this._promise=new Promise((function(e){return t._resolve=e}))}},{key:"flush",value:function(){if(!this._events.length)return Promise.resolve();var t=this._events,e=this._resolve,n=this._startTime;return this._init(),this._flushHandler(function(t,e){return{dt:Date.now()-e,e:t}}(t,n)).then(e)}},{key:"onFlush",value:function(t){return this._flushHandler=t,this}},{key:"feed",value:function(t,e){return this._events.push(function(t,e,n){return{dt:Date.now()-n,f:t,context:e}}(t,e,this._startTime)),this._flushDebounced(),this._promise}}]),t}();t.exports=i},function(t,e,n){"use strict";t.exports=function(t,e,n){var r=void 0;return function(){var o=this,i=arguments,u=function(){r=null,n||t.apply(o,i)},s=n&&!r;clearTimeout(r),r=setTimeout(u,e),s&&t.apply(o,i)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),o=n(33),i=n(2),u=n(4);function s(t){var e=function(t){return t({endpoint:"p"}).updateDefaults({src:19,evid:3,vsi:r.guid()}).logger()}(t),n=1;o.listen((function(t,r){var o=i.requestWindow((function(t){return{sr:u.getDesktopSize(t),wr:u.getWindowSize(t)}})),s=o.sr,a=o.wr;e.log({from:t,to:r,fis:n,sr:s,wr:a}),n=0}))}e.track=function(t){!i.isWebWorker()&&i.requestWindow((function(t){return!t.__isTrackingBiBrowsingSession__}))&&(i.requestWindow((function(t){return t.__isTrackingBiBrowsingSession__=!0})),s(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2);function o(t){setTimeout((function(){return r.requestWindow((function(e){return t(e.location.href)}))}))}function i(t){r.requestWindow((function(e){var n=e.history;return["pushState","replaceState"].forEach((function(e){!function(t,e,n){if(t&&t[e]){var r=t[e];t[e]=function(){return n.apply(null,arguments),r.apply(t,arguments)}}}(n,e,(function(e,n,r){return t(r)}))}))}))}function u(t){r.requestWindow((function(e){return e.addEventListener("popstate",(function(){return t(e.location.href)}))}))}e.listen=function(t){r.requestWindow((function(e){var n=e.document.referrer;[o,i,u].forEach((function(e){return e((function(e){t(n,e),n=e}))}))}))}},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=n(13),u=o(n(35)),s=n(36),a=n(9),c=n(5),f=n(5);e.PublishMethods=f.PublishMethods;var l=n(2);e.setHost=l.setHost;var d=function(t){return Object.keys(t).reduce((function(e,n){return c.EventContextMap[n]&&(e[c.EventContextMap[n]]=t[n]),e}),{})},p=function(){function t(t){var e;void 0===t&&(t={}),this.options=t,this.initialized=!1,this.muted=!1,u.ok(!t.publishMethod||(e=t.publishMethod,-1!==Object.keys(c.PublishMethods).map((function(t){return c.PublishMethods[t]})).indexOf(e)),'Unsupported publish method "'+t.publishMethod+'"'),this.loggerClientFactory=i.factory(),this.withUserContext(a.getCookies({clientId:"_wixCIDX",uuid:{name:"_wixUIDX",transform:function(t){return"string"==typeof t&&t.split("|")[1]}}}))}return t.prototype.initFactory=function(){if(this.initialized)return this.loggerClientFactory;this.initialized=!0;var t=s.getPublisher(this.options,this.transformer,this.publishFunctions);return this.loggerClientFactory.addPublisher(t)},t.prototype.withTransformer=function(t){return u.defined(t,"Transformer must be provided"),u.ok("function"==typeof t||t&&"function"==typeof t.postMessage,"Valid transformer must be provided"),this.transformer=t,this},t.prototype.withPublishFunction=function(t){return u.defined(t,"Publish function must be provided"),u.ok(t&&"function"==typeof t.postMessage,"Valid publish function must be provided"),this.publishFunctions=t,this},t.prototype.withUserContext=function(t){return u.defined(t,"User context object must be provided"),this.updateDefaults(d(t)),this},t.prototype.withUoUContext=function(t){return u.defined(t,"UoU context object must be provided"),this.updateDefaults(d(t)),this},t.prototype.updateDefaults=function(t){return this.loggerClientFactory.updateDefaults(t),this},t.prototype.setMuted=function(t){return this.muted=t,this},t.prototype.onError=function(t){return this.loggerClientFactory.setPublisherFailHandler(t),this},t.prototype.logger=function(t){void 0===t&&(t={});var e=this,n=void 0!==t.useBatch?t.useBatch:this.options.useBatch,o=this.initFactory().logger(r({},t,{useBatch:n}));return{log:function(t,n){return e.muted?Promise.resolve():o.log(t,n)}}},t}();e.Factory=p,e.factory=function(t){return void 0===t&&(t={}),new p(t)},e.manager=i.manager},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10);e.defined=function(t,e){if(void 0===t)throw new r.AssertionError(e)},e.object=function(t,e){if(void 0!==t&&("object"!=typeof t||Array.isArray(t)||null===t))throw new r.AssertionError(e)},e.ok=function(t,e){if(!t)throw new r.AssertionError(e)}},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n};Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),u=n(2),s=n(5),a=n(10),c=n(4),f=n(37),l=function(t){return t.useBatch?"POST":"GET"},d=function(t){return void 0===t&&(t={}),t.ms=Math.round(c.now()),t._lv=s.LoggerVersion,t};function p(t){return void 0===t&&(t={}),function(e,n){void 0===n&&(n={});var r=i.buildBiUrl(t,e,n);return f.beaconTransport(r,e,!!n.useBatch).catch((function(){return n.useBatch?f.fetchTransport(r,e,l(n)):f.pixelTransport(r,n.image)}))}}function h(t){return void 0===t&&(t={}),function(e,n){void 0===n&&(n={});var r=i.buildBiUrl(t,e,n),o=l(n);return f.fetchTransport(r,e,o).catch((function(t){return t instanceof a.APINotSupportedError?f.xhrTransport(r,e,o):Promise.reject(t)}))}}function v(t,e){return void 0===t&&(t={}),function(t){return f.postMessageTransport(t,e)}}e.imagePublisher=function(t){return void 0===t&&(t={}),function(e,n){if(void 0===n&&(n={}),n.useBatch)throw new a.APINotSupportedError("Can't use image publisher to send batched events.");var r=i.buildBiUrl(t,e,n);return f.pixelTransport(r,n.image)}},e.beaconPublisher=p,e.fetchPublisher=h,e.xhrPublisher=function(t){return void 0===t&&(t={}),function(e,n){void 0===n&&(n={});var r=i.buildBiUrl(t,e,n),o=l(n);return f.xhrTransport(r,e,o)}},e.postMessagePublisher=v,e.resolvePublisher=function(t,e){var n,r;return t.publishMethod===s.PublishMethods.PostMessage?(n=v,r=e&&e.postMessage):n=u.isWebWorker()?h:p,n(t,r)},e.getPublisher=function(t,n,i){var u=e.resolvePublisher(t,i),a=function(t,e){e&&("function"!=typeof e&&e.postMessage&&t.publishMethod===s.PublishMethods.PostMessage?e=e.postMessage:"function"!=typeof e&&(e=null));var n=e?function(t){return e(d(t))}:d;return function(e,i){return i.useBatch?(e.e=e.e.map((function(e){var u=e.context,s=o(e,["context"]);return r({},s,{f:r({},n(s.f),{_rp:u&&u.endpoint||i.endpoint||t.endpoint})})})),e):n(e)}}(t,n);return function(t,e){return u(a(t,e),e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),o=n(10);e.beaconTransport=function(t,e,n){return void 0===n&&(n=!1),new Promise((function(o,i){return r.sendBeacon(t,n?JSON.stringify(e):void 0)?o():i(new Error("Transport Error: Cannot send bi using beacon"))}))},e.pixelTransport=function(t,e){return new Promise((function(n,r){var o=e||new window.Image(0,0);o.onload=function(){return n()},o.onerror=function(){return r(new Error("Transport Error: Cannot send bi using pixel"))},o.src=t}))},e.fetchTransport=function(t,e,n){if(void 0===n&&(n="GET"),"undefined"==typeof fetch)return Promise.reject(new o.APINotSupportedError("fetch"));var r={method:n,credentials:"include"};return"POST"===n?r.body=JSON.stringify(e):r.keepalive=!0,fetch(t,r).then((function(t){if(!t.ok)throw Error("Transport Error: Cannot send bi using fetch. Status: "+t.status)}))},e.xhrTransport=function(t,e,n){return void 0===n&&(n="GET"),new Promise((function(r,o){var i=new XMLHttpRequest;i.open(n,""+location.protocol+t),i.onload=r,i.onerror=function(){o(new Error("Transport Error: Cannot send bi using xhr."))},i.withCredentials=!0,"POST"===n?i.send(JSON.stringify(e)):i.send()}))},e.postMessageTransport=function(t,e){void 0===e&&(e=self.postMessage);var n=[t];return"undefined"==typeof WorkerGlobalScope&&n.push("*"),e.apply(self,n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.AsIs="as-is",t.Use="use",t.No="no"}(e.Mandatory||(e.Mandatory={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.SD="sd",t.HQ="hq",t.HD="hd",t.FullHD="fullhd"}(e.Quality||(e.Quality={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.PRODUCT="product",t.GENERAL="general",t.GENERAL_TEMPLATE="general_template"}(e.VideoScripts||(e.VideoScripts={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.Landscape="landscape",t.Portrait="portrait",t.Square="square"}(e.Orientations||(e.Orientations={}))},function(t,e,n){"use strict";n.r(e),n.d(e,"NewWindowManager",(function(){return h})),n.d(e,"StandaloneManager",(function(){return v})),n.d(e,"IframeManager",(function(){return g})),n.d(e,"BasicGenericScenarioParams",(function(){return b.BasicGenericScenarioParams})),n.d(e,"EmptyGenericScenarioParams",(function(){return b.EmptyGenericScenarioParams})),n.d(e,"BasicTemplateData",(function(){return b.BasicTemplateData})),n.d(e,"GenericScenarioParams",(function(){return b.GenericScenarioParams})),n.d(e,"parentIncomingActions",(function(){return O})),n.d(e,"childIncomingActions",(function(){return P})),n.d(e,"ProductScenarioParams",(function(){return A.ProductScenarioParams})),n.d(e,"EditScenarioParams",(function(){return M.EditScenarioParams})),n.d(e,"Scenarios",(function(){return c})),n.d(e,"EditScenarioFirstScreen",(function(){return f})),n.d(e,"ScenarioParams",(function(){return S.ScenarioParams})),n.d(e,"ScenarioParamsExtended",(function(){return S.ScenarioParamsExtended})),n.d(e,"VideoMakerFrameApi",(function(){return j})),n.d(e,"VideoMakerOpener",(function(){return L})),n.d(e,"biContext",(function(){return F})),n.d(e,"ForceVariations",(function(){return k})),n.d(e,"Opener",(function(){return C})),n.d(e,"OpenerVersion",(function(){return D})),n.d(e,"VideoScripts",(function(){return G.VideoScripts})),n.d(e,"Orientations",(function(){return G.Orientations})),n.d(e,"Source",(function(){return q.Source})),n.d(e,"GenericVideoData",(function(){return K.GenericVideoData})),n.d(e,"MediaTypes",(function(){return V})),n.d(e,"Templates",(function(){return H})),n.d(e,"InstanceErrorMessage",(function(){return U}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function u(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{a(r.next(t))}catch(t){i(t)}}function s(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,s)}a((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function a(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],u=0,s=i.length;u<s;u++,o++)r[o]=i[u];return r}var c,f,l=function(){function t(){this.queue=[]}return t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.queue.push({type:"log",args:t})},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.queue.push({type:"info",args:t})},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.queue.push({type:"warn",args:t})},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.queue.push({type:"error",args:t})},t.prototype.drain=function(t){this.queue.forEach((function(e){var n=e.type,r=e.args;t[n].apply(t,r)})),this.queue=[]},t.prototype.clean=function(){this.queue=[]},t}(),d=function(){function t(e){var n=this;this.log=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];(t=n.impl).log.apply(t,a([n.serviceName+":"],e))},this.info=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];(t=n.impl).info.apply(t,a([n.serviceName+":"],e))},this.warn=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];(t=n.impl).warn.apply(t,a([n.serviceName+":"],e))},this.error=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];(t=n.impl).error.apply(t,a([n.serviceName+":"],e))},this.switchToRealtime=function(){n.impl=console},this.serviceName=e,t.instances.push(this),this.impl=t.queueImpl}return t.switchAllToRealtime=function(){t.queueImpl.drain(console),t.instances.forEach((function(t){return t.switchToRealtime()}))},t.cleanQueue=function(){t.queueImpl.clean()},t.instances=[],t.queueImpl=new l,t}(),p=function(){function t(t){void 0===t&&(t=new d("WindowMessenger")),this.logger=t}return t.prototype.destroy=function(){},t.prototype.show=function(){},t.prototype.hide=function(){},t}(),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.create=function(t){var e=window.open(t.src);if(!e)throw new Error("Cannot open window");return e},e.prototype.getOpenerWindow=function(){return window.opener},e}(p),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.create=function(t){return window},e.prototype.getOpenerWindow=function(){return window},e}(p),y=n(18),m=n.n(y),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.create=function(t){var e=t.src,n=t.frameId,r=t.appendTo;if(this.iframe&&this.iframe.src===e){if(!this.iframe.contentWindow)throw new Error("No content window");return this.iframe.contentWindow}if(this.iframe&&this.destroy(),this.iframe=document.createElement("iframe"),this.iframe.allowFullscreen=!0,this.iframe.setAttribute("allow","autoplay; camera; microphone; geolocation; vr"),this.iframe.setAttribute("allowtransparency","true"),n&&(this.iframe.id=n),this.hide(),this.iframe.src=e,this.iframe.className=m.a.frame,this.getAppendTo(r).appendChild(this.iframe),this.logger.log("iFrame created",this.iframe),!this.iframe.contentWindow)throw new Error("No content window");return this.iframe.contentWindow},e.prototype.destroy=function(){this.iframe&&(this.iframe.parentNode&&this.iframe.parentNode.removeChild(this.iframe),this.iframe=void 0,this.logger.log("iFrame killed"))},e.prototype.show=function(){this.iframe&&(this.iframe.style.display="block",this.iframe.contentWindow&&this.iframe.contentWindow.focus())},e.prototype.hide=function(){this.iframe&&(this.iframe.style.display="none")},e.prototype.getOpenerWindow=function(){return window.parent},e.prototype.getAppendTo=function(t){if(t instanceof HTMLElement)return t;var e=document.querySelector(t);if(!e)throw new Error("Cannot find element to appendTo by selector '"+t+"'");return e},e}(p),b=n(1),w=n(0),_={ready:Object(w.createAction)("@@FRAME_API/READY")(),settingsReady:Object(w.createAction)("@@FRAME_API/SETTINGS_READY")(),closeRequest:Object(w.createAction)("@@FRAME_API/CLOSE_REQUEST")()},E={settings:Object(w.createAction)("@@FRAME_API/SETTINGS")(),hidden:Object(w.createAction)("@@FRAME_API/HIDDEN")(),shown:Object(w.createAction)("@@FRAME_API/SHOW")()},O=i(i({},_),{addToProduct:Object(w.createAction)("VIDEO_MAKER_OPENER/ADD_TO_PRODUCT")(),addToSite:Object(w.createAction)("VIDEO_MAKER_OPENER/ADD_TO_SITE")(),videoSavedToMediaManager:Object(w.createAction)("VIDEO_MAKER_OPENER/VIDEO_SAVED_TO_MEDIA_MANAGER")(),getInstanceRequest:Object(w.createAction)("VIDEO_MAKER_OPENER/GET_INSTANCE_REQUEST")()}),P=i(i({},E),{settings:Object(w.createAction)("@@FRAME_API/SETTINGS")(),addToProductSuccessful:Object(w.createAction)("VIDEO_MAKER_OPENER/ADD_TO_PRODUCT_SUCCESSFUL")(),addToProductFailed:Object(w.createAction)("VIDEO_MAKER_OPENER/ADD_TO_PRODUCT_FAILED")(),addToSiteSuccessful:Object(w.createAction)("VIDEO_MAKER_OPENER/ADD_TO_SITE_SUCCESSFUL")(),addToSiteFailed:Object(w.createAction)("VIDEO_MAKER_OPENER/ADD_TO_SITE_FAILED")(),getInstanceSuccessful:Object(w.createAction)("VIDEO_MAKER_OPENER/GET_INSTANCE_SUCCESS")(),getInstanceFailed:Object(w.createAction)("VIDEO_MAKER_OPENER/GET_INSTANCE_FAILED")()}),A=n(3),M=n(12);!function(t){t.Product="Product",t.Generic="Generic",t.Edit="Edit"}(c||(c={})),function(t){t.Intro="intro",t.Save="save",t.Customize="customize"}(f||(f={}));var x,S=n(7),T=function(){function t(t,e){void 0===e&&(e=new d("WindowMessenger")),this.handlerDescriptions=[],this.logger=e,this.targetWindow=t,window.addEventListener("message",this.handleMessage.bind(this),!1)}return t.prototype.setTarget=function(t){this.targetWindow=t},t.prototype.on=function(t,e,n){var r=this;return void 0===n&&(n=!1),this.handlerDescriptions.push({actionCreator:t,handler:e,once:n}),function(){r.off(t,e)}},t.prototype.once=function(t,e){return this.on(t,e,!0)},t.prototype.off=function(t,e){this.handlerDescriptions=this.handlerDescriptions.filter((function(n){return!(n.actionCreator===t&&(n.handler===e||!e))}))},t.prototype.emit=function(t){if(this.logger.log("postMessage emitted",t),!this.targetWindow)throw new Error("target window should be defined");this.targetWindow.postMessage(t,"*")},t.prototype.offAll=function(){this.handlerDescriptions=[]},t.prototype.handleMessage=function(t){if(t.source===this.targetWindow){var e=this.parseMessageData(t.data);e&&(this.logger.log("postMessage received",e),this.handlerDescriptions.filter((function(t){return Object(w.getType)(t.actionCreator)===e.type})).forEach(this.runObserver(e)))}},t.prototype.runObserver=function(t){var e=this;return function(n){n.handler.call(e,t),n.once&&e.off(n.actionCreator,n.handler)}},t.prototype.parseMessageData=function(t){void 0===t&&(t={});var e=t.type,n=t.payload;if(e&&"string"==typeof e)return{type:e,payload:n}},t}(),j=function(t){function e(){return t.call(this,{incomingActions:P,outgoingActions:O})||this}return o(e,t),e.prototype.kill=function(){t.prototype.offAll.call(this)},e}(function(t){function e(e,n,r){void 0===n&&(n=window.parent),void 0===r&&(r=new d("FrameApi"));var o=t.call(this,void 0,r)||this;o.options=e;var i=new(0,o.constructor.WindowManagerCls)(r);return o.setTarget(i.getOpenerWindow()),o}return o(e,t),e.setDefaultWindowManager=function(t){this.WindowManagerCls=t},e.prototype.waitForSettings=function(t){var e=this;this.on(this.options.incomingActions.settings,(function(n){t(n),e.emit(e.options.outgoingActions.settingsReady())})),this.emit(this.options.outgoingActions.ready())},e.WindowManagerCls=g,e}(T)),I=function(){};!function(t){t.Hide="hide",t.Kill="kill"}(x||(x={}));var k,C,D,R=function(t){function e(e){var n=t.call(this,void 0,new d("FrameOpener"))||this;n._readyUnsubscribe=I,n._settingsReadyUnsubscribe=I,n.isReady=!1,n.options=i({appendTo:"body",closeMethod:x.Kill},e);var r=n.constructor.WindowManagerCls;return n.windowManager=e.windowManager||new r(n.logger),n}return o(e,t),e.setDefaultWindowManager=function(t){this.WindowManagerCls=t},e.prototype.open=function(t,e){var n=this,r=(void 0===e?{}:e).displayOnReady,o=void 0===r||r,i=this.getFrameUrl(t),u=this.windowManager.create({src:i,appendTo:this.options.appendTo,frameId:this.options.frameId});return this.setTarget(u),this.once(_.closeRequest,(function(){n.close()})),this.sendSettings(t).then((function(){o&&n.windowManager.show()}))},e.prototype.close=function(){switch(this.options.closeMethod){case x.Kill:this.kill();break;case x.Hide:this.windowManager.hide(),this.emit(this.options.outgoingActions.hidden());break;default:throw new Error("Unsupported close method '"+this.options.closeMethod+"'")}},e.prototype.kill=function(){this.offAll(),this.isReady=!1,this.windowManager.destroy()},e.prototype.sendSettings=function(t){var e=this;return this._readyUnsubscribe(),this._settingsReadyUnsubscribe(),new Promise((function(n){var r=function(){e.emit(e.options.outgoingActions.settings(t)),e._settingsReadyUnsubscribe=e.once(e.options.incomingActions.settingsReady,(function(){return e.logger.log("iFrame settings are applied"),n()}))};e.isReady&&r(),e._readyUnsubscribe=e.on(e.options.incomingActions.ready,(function(){e.isReady=!0,r()}))}))},e.prototype.getFrameUrl=function(t){var e=this.options.url;return function(t){var e=document.createElement("a");return e.href=t,e.href}("string"==typeof e?e:e(t))},e.WindowManagerCls=g,e}(T);!function(t){t[t.No=0]="No",t[t.ForceOne=1]="ForceOne",t[t.ForceMany=2]="ForceMany"}(k||(k={})),function(t){t.MediaManager="media-manager",t.Playground="playground",t.MediaEditorPanel="media_editor_panel"}(C||(C={})),function(t){t.V1="v1",t.V2="v2"}(D||(D={}));var F,U,N=n(19),W=n.n(N).a.factory({endpoint:"video-maker"}).updateDefaults({src:84}).logger();function B(){return"s-"+Date.now()+"-"+Math.round(Math.random()*Math.pow(10,10))}!function(t){t.New="new",t.Edit="edit"}(F||(F={})),function(t){t.NoInstanceInResult='video-maker-opener: can\'t get instance from method "withInstanceGetter"',t.NotProvidedMethodWithInstanceGetter="video-maker-opener: withInstanceGetter method is not provided"}(U||(U={}));var V,H,L=function(t){function e(e){var n=void 0===e?{}:e,r=n.baseUrl,o=void 0===r?"undefined"!=typeof location&&location.host.endsWith("editorx.com")?"https://manage.editorx.com/video-maker-modal/modal":"https://www.wix.com/video-maker-modal/modal":r,i=n.url,u=t.call(this,{incomingActions:O,outgoingActions:P,url:i||function(t){var e=t.debug,n=t.metaSiteId;return o+"?metaSiteId="+n+(e?"&debug":"")},frameId:"video-maker-modal"})||this;return u.isFirst=!0,u.sessionId=B(),u}return o(e,t),e.setDefaultWindowManager=function(e){t.setDefaultWindowManager.call(this,e)},e.prototype.withInstanceGetter=function(t){return this.instanceGetter=t,this},e.prototype.open=function(e){var n=this,r=this.instanceGetter;if(!r)throw new Error(U.NotProvidedMethodWithInstanceGetter);this.sessionId=B();var o=i(i({},e),{isFirst:this.isFirst,sessionId:this.sessionId,openerVersion:D.V2});return this.__sendOpenEvent(e),this.on(O.getInstanceRequest,(function(){return u(n,void 0,void 0,(function(){var t,e;return s(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,r()];case 1:if(!(t=n.sent()))throw new Error(U.NoInstanceInResult);return[3,3];case 2:throw e=n.sent(),this.emit(P.getInstanceFailed(e)),e;case 3:return this.emit(P.getInstanceSuccessful(t)),[2]}}))}))})),t.prototype.open.call(this,o).then((function(){n.isFirst=!1}))},e.prototype.kill=function(){t.prototype.kill.call(this)},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.on=function(e,n,r){return t.prototype.on.call(this,e,n,r)},e.prototype.off=function(e,n){t.prototype.off.call(this,e,n)},e.prototype.once=function(e,n){return t.prototype.once.call(this,e,n)},e.prototype.setTarget=function(e){t.prototype.setTarget.call(this,e)},e.prototype.getContext=function(t){return t===c.Edit?F.Edit:F.New},e.prototype.__sendOpenEvent=function(t){var e,n,r,o,i,u,s;e={metaSiteId:t.metaSiteId,isFirst:this.isFirst,origin:t.origin,source:t.opener,sessionId:this.sessionId,context:this.getContext(t.scenario)},n=e.isFirst,r=e.metaSiteId,o=e.origin,i=e.sessionId,u=e.source,s=e.context,W.log({evid:200,isFirst:n,msid:r,origin:o,sessionId:i,source:u,context:s}).catch((function(t){throw new Error(t)}))},e}(R),G=n(11),q=n(16),K=n(17);!function(t){t.PICTURE="picture",t.VIDEO="video"}(V||(V={})),function(t){t.Empty="Empty",t.Basic="Basic"}(H||(H={}))}])}));
//# sourceMappingURL=videoMakerOpener.bundle.min.js.map